(()=>{var ml={9669:(l,F,b)=>{l.exports=b(1609)},5448:(l,F,b)=>{"use strict";var E=b(4867),D=b(6026),S=b(4372),g=b(5327),m=b(4097),f=b(4109),d=b(7985),p=b(5061);l.exports=function(y){return new Promise(function(Q,C){var k=y.data,_=y.headers;E.isFormData(k)&&delete _["Content-Type"];var x=new XMLHttpRequest;if(y.auth){var G=y.auth.username||"",W=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";_.Authorization="Basic "+btoa(G+":"+W)}var j=m(y.baseURL,y.url);if(x.open(y.method.toUpperCase(),g(j,y.params,y.paramsSerializer),!0),x.timeout=y.timeout,x.onreadystatechange=function(){if(!(!x||x.readyState!==4)&&!(x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0))){var H="getAllResponseHeaders"in x?f(x.getAllResponseHeaders()):null,O=!y.responseType||y.responseType==="text"?x.responseText:x.response,I={data:O,status:x.status,statusText:x.statusText,headers:H,config:y,request:x};D(Q,C,I),x=null}},x.onabort=function(){!x||(C(p("Request aborted",y,"ECONNABORTED",x)),x=null)},x.onerror=function(){C(p("Network Error",y,null,x)),x=null},x.ontimeout=function(){var H="timeout of "+y.timeout+"ms exceeded";y.timeoutErrorMessage&&(H=y.timeoutErrorMessage),C(p(H,y,"ECONNABORTED",x)),x=null},E.isStandardBrowserEnv()){var X=(y.withCredentials||d(j))&&y.xsrfCookieName?S.read(y.xsrfCookieName):void 0;X&&(_[y.xsrfHeaderName]=X)}if("setRequestHeader"in x&&E.forEach(_,function(H,O){typeof k=="undefined"&&O.toLowerCase()==="content-type"?delete _[O]:x.setRequestHeader(O,H)}),E.isUndefined(y.withCredentials)||(x.withCredentials=!!y.withCredentials),y.responseType)try{x.responseType=y.responseType}catch(A){if(y.responseType!=="json")throw A}typeof y.onDownloadProgress=="function"&&x.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",y.onUploadProgress),y.cancelToken&&y.cancelToken.promise.then(function(H){!x||(x.abort(),C(H),x=null)}),k||(k=null),x.send(k)})}},1609:(l,F,b)=>{"use strict";var E=b(4867),D=b(1849),S=b(321),g=b(7185),m=b(5655);function f(p){var v=new S(p),y=D(S.prototype.request,v);return E.extend(y,S.prototype,v),E.extend(y,v),y}var d=f(m);d.Axios=S,d.create=function(v){return f(g(d.defaults,v))},d.Cancel=b(5263),d.CancelToken=b(4972),d.isCancel=b(6502),d.all=function(v){return Promise.all(v)},d.spread=b(8713),d.isAxiosError=b(6268),l.exports=d,l.exports.default=d},5263:l=>{"use strict";function F(b){this.message=b}F.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},F.prototype.__CANCEL__=!0,l.exports=F},4972:(l,F,b)=>{"use strict";var E=b(5263);function D(S){if(typeof S!="function")throw new TypeError("executor must be a function.");var g;this.promise=new Promise(function(d){g=d});var m=this;S(function(d){m.reason||(m.reason=new E(d),g(m.reason))})}D.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},D.source=function(){var g,m=new D(function(d){g=d});return{token:m,cancel:g}},l.exports=D},6502:l=>{"use strict";l.exports=function(b){return!!(b&&b.__CANCEL__)}},321:(l,F,b)=>{"use strict";var E=b(4867),D=b(5327),S=b(782),g=b(3572),m=b(7185);function f(d){this.defaults=d,this.interceptors={request:new S,response:new S}}f.prototype.request=function(p){typeof p=="string"?(p=arguments[1]||{},p.url=arguments[0]):p=p||{},p=m(this.defaults,p),p.method?p.method=p.method.toLowerCase():this.defaults.method?p.method=this.defaults.method.toLowerCase():p.method="get";var v=[g,void 0],y=Promise.resolve(p);for(this.interceptors.request.forEach(function(Q){v.unshift(Q.fulfilled,Q.rejected)}),this.interceptors.response.forEach(function(Q){v.push(Q.fulfilled,Q.rejected)});v.length;)y=y.then(v.shift(),v.shift());return y},f.prototype.getUri=function(p){return p=m(this.defaults,p),D(p.url,p.params,p.paramsSerializer).replace(/^\?/,"")},E.forEach(["delete","get","head","options"],function(p){f.prototype[p]=function(v,y){return this.request(m(y||{},{method:p,url:v,data:(y||{}).data}))}}),E.forEach(["post","put","patch"],function(p){f.prototype[p]=function(v,y,P){return this.request(m(P||{},{method:p,url:v,data:y}))}}),l.exports=f},782:(l,F,b)=>{"use strict";var E=b(4867);function D(){this.handlers=[]}D.prototype.use=function(g,m){return this.handlers.push({fulfilled:g,rejected:m}),this.handlers.length-1},D.prototype.eject=function(g){this.handlers[g]&&(this.handlers[g]=null)},D.prototype.forEach=function(g){E.forEach(this.handlers,function(f){f!==null&&g(f)})},l.exports=D},4097:(l,F,b)=>{"use strict";var E=b(1793),D=b(7303);l.exports=function(g,m){return g&&!E(m)?D(g,m):m}},5061:(l,F,b)=>{"use strict";var E=b(481);l.exports=function(S,g,m,f,d){var p=new Error(S);return E(p,g,m,f,d)}},3572:(l,F,b)=>{"use strict";var E=b(4867),D=b(8527),S=b(6502),g=b(5655);function m(f){f.cancelToken&&f.cancelToken.throwIfRequested()}l.exports=function(d){m(d),d.headers=d.headers||{},d.data=D(d.data,d.headers,d.transformRequest),d.headers=E.merge(d.headers.common||{},d.headers[d.method]||{},d.headers),E.forEach(["delete","get","head","post","put","patch","common"],function(y){delete d.headers[y]});var p=d.adapter||g.adapter;return p(d).then(function(y){return m(d),y.data=D(y.data,y.headers,d.transformResponse),y},function(y){return S(y)||(m(d),y&&y.response&&(y.response.data=D(y.response.data,y.response.headers,d.transformResponse))),Promise.reject(y)})}},481:l=>{"use strict";l.exports=function(b,E,D,S,g){return b.config=E,D&&(b.code=D),b.request=S,b.response=g,b.isAxiosError=!0,b.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},b}},7185:(l,F,b)=>{"use strict";var E=b(4867);l.exports=function(S,g){g=g||{};var m={},f=["url","method","data"],d=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],v=["validateStatus"];function y(k,_){return E.isPlainObject(k)&&E.isPlainObject(_)?E.merge(k,_):E.isPlainObject(_)?E.merge({},_):E.isArray(_)?_.slice():_}function P(k){E.isUndefined(g[k])?E.isUndefined(S[k])||(m[k]=y(void 0,S[k])):m[k]=y(S[k],g[k])}E.forEach(f,function(_){E.isUndefined(g[_])||(m[_]=y(void 0,g[_]))}),E.forEach(d,P),E.forEach(p,function(_){E.isUndefined(g[_])?E.isUndefined(S[_])||(m[_]=y(void 0,S[_])):m[_]=y(void 0,g[_])}),E.forEach(v,function(_){_ in g?m[_]=y(S[_],g[_]):_ in S&&(m[_]=y(void 0,S[_]))});var Q=f.concat(d).concat(p).concat(v),C=Object.keys(S).concat(Object.keys(g)).filter(function(_){return Q.indexOf(_)===-1});return E.forEach(C,P),m}},6026:(l,F,b)=>{"use strict";var E=b(5061);l.exports=function(S,g,m){var f=m.config.validateStatus;!m.status||!f||f(m.status)?S(m):g(E("Request failed with status code "+m.status,m.config,null,m.request,m))}},8527:(l,F,b)=>{"use strict";var E=b(4867);l.exports=function(S,g,m){return E.forEach(m,function(d){S=d(S,g)}),S}},5655:(l,F,b)=>{"use strict";var E=b(4867),D=b(6016),S={"Content-Type":"application/x-www-form-urlencoded"};function g(d,p){!E.isUndefined(d)&&E.isUndefined(d["Content-Type"])&&(d["Content-Type"]=p)}function m(){var d;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(d=b(5448)),d}var f={adapter:m(),transformRequest:[function(p,v){return D(v,"Accept"),D(v,"Content-Type"),E.isFormData(p)||E.isArrayBuffer(p)||E.isBuffer(p)||E.isStream(p)||E.isFile(p)||E.isBlob(p)?p:E.isArrayBufferView(p)?p.buffer:E.isURLSearchParams(p)?(g(v,"application/x-www-form-urlencoded;charset=utf-8"),p.toString()):E.isObject(p)?(g(v,"application/json;charset=utf-8"),JSON.stringify(p)):p}],transformResponse:[function(p){if(typeof p=="string")try{p=JSON.parse(p)}catch(v){}return p}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(p){return p>=200&&p<300}};f.headers={common:{Accept:"application/json, text/plain, */*"}},E.forEach(["delete","get","head"],function(p){f.headers[p]={}}),E.forEach(["post","put","patch"],function(p){f.headers[p]=E.merge(S)}),l.exports=f},1849:l=>{"use strict";l.exports=function(b,E){return function(){for(var S=new Array(arguments.length),g=0;g<S.length;g++)S[g]=arguments[g];return b.apply(E,S)}}},5327:(l,F,b)=>{"use strict";var E=b(4867);function D(S){return encodeURIComponent(S).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}l.exports=function(g,m,f){if(!m)return g;var d;if(f)d=f(m);else if(E.isURLSearchParams(m))d=m.toString();else{var p=[];E.forEach(m,function(P,Q){P===null||typeof P=="undefined"||(E.isArray(P)?Q=Q+"[]":P=[P],E.forEach(P,function(k){E.isDate(k)?k=k.toISOString():E.isObject(k)&&(k=JSON.stringify(k)),p.push(D(Q)+"="+D(k))}))}),d=p.join("&")}if(d){var v=g.indexOf("#");v!==-1&&(g=g.slice(0,v)),g+=(g.indexOf("?")===-1?"?":"&")+d}return g}},7303:l=>{"use strict";l.exports=function(b,E){return E?b.replace(/\/+$/,"")+"/"+E.replace(/^\/+/,""):b}},4372:(l,F,b)=>{"use strict";var E=b(4867);l.exports=E.isStandardBrowserEnv()?function(){return{write:function(g,m,f,d,p,v){var y=[];y.push(g+"="+encodeURIComponent(m)),E.isNumber(f)&&y.push("expires="+new Date(f).toGMTString()),E.isString(d)&&y.push("path="+d),E.isString(p)&&y.push("domain="+p),v===!0&&y.push("secure"),document.cookie=y.join("; ")},read:function(g){var m=document.cookie.match(new RegExp("(^|;\\s*)("+g+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove:function(g){this.write(g,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:l=>{"use strict";l.exports=function(b){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(b)}},6268:l=>{"use strict";l.exports=function(b){return typeof b=="object"&&b.isAxiosError===!0}},7985:(l,F,b)=>{"use strict";var E=b(4867);l.exports=E.isStandardBrowserEnv()?function(){var S=/(msie|trident)/i.test(navigator.userAgent),g=document.createElement("a"),m;function f(d){var p=d;return S&&(g.setAttribute("href",p),p=g.href),g.setAttribute("href",p),{href:g.href,protocol:g.protocol?g.protocol.replace(/:$/,""):"",host:g.host,search:g.search?g.search.replace(/^\?/,""):"",hash:g.hash?g.hash.replace(/^#/,""):"",hostname:g.hostname,port:g.port,pathname:g.pathname.charAt(0)==="/"?g.pathname:"/"+g.pathname}}return m=f(window.location.href),function(p){var v=E.isString(p)?f(p):p;return v.protocol===m.protocol&&v.host===m.host}}():function(){return function(){return!0}}()},6016:(l,F,b)=>{"use strict";var E=b(4867);l.exports=function(S,g){E.forEach(S,function(f,d){d!==g&&d.toUpperCase()===g.toUpperCase()&&(S[g]=f,delete S[d])})}},4109:(l,F,b)=>{"use strict";var E=b(4867),D=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];l.exports=function(g){var m={},f,d,p;return g&&E.forEach(g.split(`
`),function(y){if(p=y.indexOf(":"),f=E.trim(y.substr(0,p)).toLowerCase(),d=E.trim(y.substr(p+1)),f){if(m[f]&&D.indexOf(f)>=0)return;f==="set-cookie"?m[f]=(m[f]?m[f]:[]).concat([d]):m[f]=m[f]?m[f]+", "+d:d}}),m}},8713:l=>{"use strict";l.exports=function(b){return function(D){return b.apply(null,D)}}},4867:(l,F,b)=>{"use strict";var E=b(1849),D=Object.prototype.toString;function S(T){return D.call(T)==="[object Array]"}function g(T){return typeof T=="undefined"}function m(T){return T!==null&&!g(T)&&T.constructor!==null&&!g(T.constructor)&&typeof T.constructor.isBuffer=="function"&&T.constructor.isBuffer(T)}function f(T){return D.call(T)==="[object ArrayBuffer]"}function d(T){return typeof FormData!="undefined"&&T instanceof FormData}function p(T){var L;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?L=ArrayBuffer.isView(T):L=T&&T.buffer&&T.buffer instanceof ArrayBuffer,L}function v(T){return typeof T=="string"}function y(T){return typeof T=="number"}function P(T){return T!==null&&typeof T=="object"}function Q(T){if(D.call(T)!=="[object Object]")return!1;var L=Object.getPrototypeOf(T);return L===null||L===Object.prototype}function C(T){return D.call(T)==="[object Date]"}function k(T){return D.call(T)==="[object File]"}function _(T){return D.call(T)==="[object Blob]"}function x(T){return D.call(T)==="[object Function]"}function G(T){return P(T)&&x(T.pipe)}function W(T){return typeof URLSearchParams!="undefined"&&T instanceof URLSearchParams}function j(T){return T.replace(/^\s*/,"").replace(/\s*$/,"")}function X(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function A(T,L){if(!(T===null||typeof T=="undefined"))if(typeof T!="object"&&(T=[T]),S(T))for(var N=0,M=T.length;N<M;N++)L.call(null,T[N],N,T);else for(var B in T)Object.prototype.hasOwnProperty.call(T,B)&&L.call(null,T[B],B,T)}function H(){var T={};function L(B,J){Q(T[J])&&Q(B)?T[J]=H(T[J],B):Q(B)?T[J]=H({},B):S(B)?T[J]=B.slice():T[J]=B}for(var N=0,M=arguments.length;N<M;N++)A(arguments[N],L);return T}function O(T,L,N){return A(L,function(B,J){N&&typeof B=="function"?T[J]=E(B,N):T[J]=B}),T}function I(T){return T.charCodeAt(0)===65279&&(T=T.slice(1)),T}l.exports={isArray:S,isArrayBuffer:f,isBuffer:m,isFormData:d,isArrayBufferView:p,isString:v,isNumber:y,isObject:P,isPlainObject:Q,isUndefined:g,isDate:C,isFile:k,isBlob:_,isFunction:x,isStream:G,isURLSearchParams:W,isStandardBrowserEnv:X,forEach:A,merge:H,extend:O,trim:j,stripBOM:I}},5186:(l,F,b)=>{var E=b(3698),D=b(2505),S=b(6417),g=Function.bind,m=g.bind(g);function f(P,Q,C){var k=m(S,null).apply(null,C?[Q,C]:[Q]);P.api={remove:k},P.remove=k,["before","error","after","wrap"].forEach(function(_){var x=C?[Q,_,C]:[Q,_];P[_]=P.api[_]=m(D,null).apply(null,x)})}function d(){var P="h",Q={registry:{}},C=E.bind(null,Q,P);return f(C,Q,P),C}function p(){var P={registry:{}},Q=E.bind(null,P);return f(Q,P),Q}var v=!1;function y(){return v||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),v=!0),p()}y.Singular=d.bind(),y.Collection=p.bind(),l.exports=y,l.exports.Hook=y,l.exports.Singular=y.Singular,l.exports.Collection=y.Collection},2505:l=>{l.exports=F;function F(b,E,D,S){var g=S;b.registry[D]||(b.registry[D]=[]),E==="before"&&(S=function(m,f){return Promise.resolve().then(g.bind(null,f)).then(m.bind(null,f))}),E==="after"&&(S=function(m,f){var d;return Promise.resolve().then(m.bind(null,f)).then(function(p){return d=p,g(d,f)}).then(function(){return d})}),E==="error"&&(S=function(m,f){return Promise.resolve().then(m.bind(null,f)).catch(function(d){return g(d,f)})}),b.registry[D].push({hook:S,orig:g})}},3698:l=>{l.exports=F;function F(b,E,D,S){if(typeof D!="function")throw new Error("method for before hook must be a function");return S||(S={}),Array.isArray(E)?E.reverse().reduce(function(g,m){return F.bind(null,b,m,g,S)},D)():Promise.resolve().then(function(){return b.registry[E]?b.registry[E].reduce(function(g,m){return m.hook.bind(null,g,S)},D)():D(S)})}},6417:l=>{l.exports=F;function F(b,E,D){if(!!b.registry[E]){var S=b.registry[E].map(function(g){return g.orig}).indexOf(D);S!==-1&&b.registry[E].splice(S,1)}}},4098:function(l,F){var b=function(E){function D(){this.fetch=!1,this.DOMException=E.DOMException}return D.prototype=E,new D}(typeof self!="undefined"?self:this);(function(E){var D=function(S){var g={searchParams:"URLSearchParams"in E,iterable:"Symbol"in E&&"iterator"in Symbol,blob:"FileReader"in E&&"Blob"in E&&function(){try{return new Blob,!0}catch(N){return!1}}(),formData:"FormData"in E,arrayBuffer:"ArrayBuffer"in E};function m(N){return N&&DataView.prototype.isPrototypeOf(N)}if(g.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(N){return N&&f.indexOf(Object.prototype.toString.call(N))>-1};function p(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(N))throw new TypeError("Invalid character in header field name");return N.toLowerCase()}function v(N){return typeof N!="string"&&(N=String(N)),N}function y(N){var M={next:function(){var B=N.shift();return{done:B===void 0,value:B}}};return g.iterable&&(M[Symbol.iterator]=function(){return M}),M}function P(N){this.map={},N instanceof P?N.forEach(function(M,B){this.append(B,M)},this):Array.isArray(N)?N.forEach(function(M){this.append(M[0],M[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(M){this.append(M,N[M])},this)}P.prototype.append=function(N,M){N=p(N),M=v(M);var B=this.map[N];this.map[N]=B?B+", "+M:M},P.prototype.delete=function(N){delete this.map[p(N)]},P.prototype.get=function(N){return N=p(N),this.has(N)?this.map[N]:null},P.prototype.has=function(N){return this.map.hasOwnProperty(p(N))},P.prototype.set=function(N,M){this.map[p(N)]=v(M)},P.prototype.forEach=function(N,M){for(var B in this.map)this.map.hasOwnProperty(B)&&N.call(M,this.map[B],B,this)},P.prototype.keys=function(){var N=[];return this.forEach(function(M,B){N.push(B)}),y(N)},P.prototype.values=function(){var N=[];return this.forEach(function(M){N.push(M)}),y(N)},P.prototype.entries=function(){var N=[];return this.forEach(function(M,B){N.push([B,M])}),y(N)},g.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function Q(N){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}function C(N){return new Promise(function(M,B){N.onload=function(){M(N.result)},N.onerror=function(){B(N.error)}})}function k(N){var M=new FileReader,B=C(M);return M.readAsArrayBuffer(N),B}function _(N){var M=new FileReader,B=C(M);return M.readAsText(N),B}function x(N){for(var M=new Uint8Array(N),B=new Array(M.length),J=0;J<M.length;J++)B[J]=String.fromCharCode(M[J]);return B.join("")}function G(N){if(N.slice)return N.slice(0);var M=new Uint8Array(N.byteLength);return M.set(new Uint8Array(N)),M.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(N){this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:g.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:g.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():g.arrayBuffer&&g.blob&&m(N)?(this._bodyArrayBuffer=G(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||d(N))?this._bodyArrayBuffer=G(N):this._bodyText=N=Object.prototype.toString.call(N):this._bodyText="",this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var N=Q(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?Q(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var N=Q(this);if(N)return N;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(x(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(H)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(N){var M=N.toUpperCase();return j.indexOf(M)>-1?M:N}function A(N,M){M=M||{};var B=M.body;if(N instanceof A){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,M.headers||(this.headers=new P(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!B&&N._bodyInit!=null&&(B=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=M.credentials||this.credentials||"same-origin",(M.headers||!this.headers)&&(this.headers=new P(M.headers)),this.method=X(M.method||this.method||"GET"),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(B)}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function H(N){var M=new FormData;return N.trim().split("&").forEach(function(B){if(B){var J=B.split("="),ie=J.shift().replace(/\+/g," "),te=J.join("=").replace(/\+/g," ");M.append(decodeURIComponent(ie),decodeURIComponent(te))}}),M}function O(N){var M=new P,B=N.replace(/\r?\n[\t ]+/g," ");return B.split(/\r?\n/).forEach(function(J){var ie=J.split(":"),te=ie.shift().trim();if(te){var se=ie.join(":").trim();M.append(te,se)}}),M}W.call(A.prototype);function I(N,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new P(M.headers),this.url=M.url||"",this._initBody(N)}W.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},I.error=function(){var N=new I(null,{status:0,statusText:""});return N.type="error",N};var T=[301,302,303,307,308];I.redirect=function(N,M){if(T.indexOf(M)===-1)throw new RangeError("Invalid status code");return new I(null,{status:M,headers:{location:N}})},S.DOMException=E.DOMException;try{new S.DOMException}catch(N){S.DOMException=function(M,B){this.message=M,this.name=B;var J=Error(M);this.stack=J.stack},S.DOMException.prototype=Object.create(Error.prototype),S.DOMException.prototype.constructor=S.DOMException}function L(N,M){return new Promise(function(B,J){var ie=new A(N,M);if(ie.signal&&ie.signal.aborted)return J(new S.DOMException("Aborted","AbortError"));var te=new XMLHttpRequest;function se(){te.abort()}te.onload=function(){var ue={status:te.status,statusText:te.statusText,headers:O(te.getAllResponseHeaders()||"")};ue.url="responseURL"in te?te.responseURL:ue.headers.get("X-Request-URL");var pe="response"in te?te.response:te.responseText;B(new I(pe,ue))},te.onerror=function(){J(new TypeError("Network request failed"))},te.ontimeout=function(){J(new TypeError("Network request failed"))},te.onabort=function(){J(new S.DOMException("Aborted","AbortError"))},te.open(ie.method,ie.url,!0),ie.credentials==="include"?te.withCredentials=!0:ie.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&g.blob&&(te.responseType="blob"),ie.headers.forEach(function(ue,pe){te.setRequestHeader(pe,ue)}),ie.signal&&(ie.signal.addEventListener("abort",se),te.onreadystatechange=function(){te.readyState===4&&ie.signal.removeEventListener("abort",se)}),te.send(typeof ie._bodyInit=="undefined"?null:ie._bodyInit)})}return L.polyfill=!0,E.fetch||(E.fetch=L,E.Headers=P,E.Request=A,E.Response=I),S.Headers=P,S.Request=A,S.Response=I,S.fetch=L,S}({})})(b),delete b.fetch.polyfill,F=b.fetch,F.default=b.fetch,F.fetch=b.fetch,F.Headers=b.Headers,F.Request=b.Request,F.Response=b.Response,l.exports=F},7484:function(l){(function(F,b){l.exports=b()})(this,function(){"use strict";var F="millisecond",b="second",E="minute",D="hour",S="day",g="week",m="month",f="quarter",d="year",p="date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Q=function(H,O,I){var T=String(H);return!T||T.length>=O?H:""+Array(O+1-T.length).join(I)+H},C={s:Q,z:function(H){var O=-H.utcOffset(),I=Math.abs(O),T=Math.floor(I/60),L=I%60;return(O<=0?"+":"-")+Q(T,2,"0")+":"+Q(L,2,"0")},m:function H(O,I){if(O.date()<I.date())return-H(I,O);var T=12*(I.year()-O.year())+(I.month()-O.month()),L=O.clone().add(T,m),N=I-L<0,M=O.clone().add(T+(N?-1:1),m);return+(-(T+(I-L)/(N?L-M:M-L))||0)},a:function(H){return H<0?Math.ceil(H)||0:Math.floor(H)},p:function(H){return{M:m,y:d,w:g,d:S,D:p,h:D,m:E,s:b,ms:F,Q:f}[H]||String(H||"").toLowerCase().replace(/s$/,"")},u:function(H){return H===void 0}},k="en",_={};_[k]=P;var x=function(H){return H instanceof X},G=function(H,O,I){var T;if(!H)return k;if(typeof H=="string")_[H]&&(T=H),O&&(_[H]=O,T=H);else{var L=H.name;_[L]=H,T=L}return!I&&T&&(k=T),T||!I&&k},W=function(H,O){if(x(H))return H.clone();var I=typeof O=="object"?O:{};return I.date=H,I.args=arguments,new X(I)},j=C;j.l=G,j.i=x,j.w=function(H,O){return W(H,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var X=function(){function H(I){this.$L=G(I.locale,null,!0),this.parse(I)}var O=H.prototype;return O.parse=function(I){this.$d=function(T){var L=T.date,N=T.utc;if(L===null)return new Date(NaN);if(j.u(L))return new Date;if(L instanceof Date)return new Date(L);if(typeof L=="string"&&!/Z$/i.test(L)){var M=L.match(v);if(M){var B=M[2]-1||0,J=(M[7]||"0").substring(0,3);return N?new Date(Date.UTC(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,J)):new Date(M[1],B,M[3]||1,M[4]||0,M[5]||0,M[6]||0,J)}}return new Date(L)}(I),this.$x=I.x||{},this.init()},O.init=function(){var I=this.$d;this.$y=I.getFullYear(),this.$M=I.getMonth(),this.$D=I.getDate(),this.$W=I.getDay(),this.$H=I.getHours(),this.$m=I.getMinutes(),this.$s=I.getSeconds(),this.$ms=I.getMilliseconds()},O.$utils=function(){return j},O.isValid=function(){return this.$d.toString()!=="Invalid Date"},O.isSame=function(I,T){var L=W(I);return this.startOf(T)<=L&&L<=this.endOf(T)},O.isAfter=function(I,T){return W(I)<this.startOf(T)},O.isBefore=function(I,T){return this.endOf(T)<W(I)},O.$g=function(I,T,L){return j.u(I)?this[T]:this.set(L,I)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(I,T){var L=this,N=!!j.u(T)||T,M=j.p(I),B=function(ze,ye){var it=j.w(L.$u?Date.UTC(L.$y,ye,ze):new Date(L.$y,ye,ze),L);return N?it:it.endOf(S)},J=function(ze,ye){return j.w(L.toDate()[ze].apply(L.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(ye)),L)},ie=this.$W,te=this.$M,se=this.$D,ue="set"+(this.$u?"UTC":"");switch(M){case d:return N?B(1,0):B(31,11);case m:return N?B(1,te):B(0,te+1);case g:var pe=this.$locale().weekStart||0,dt=(ie<pe?ie+7:ie)-pe;return B(N?se-dt:se+(6-dt),te);case S:case p:return J(ue+"Hours",0);case D:return J(ue+"Minutes",1);case E:return J(ue+"Seconds",2);case b:return J(ue+"Milliseconds",3);default:return this.clone()}},O.endOf=function(I){return this.startOf(I,!1)},O.$set=function(I,T){var L,N=j.p(I),M="set"+(this.$u?"UTC":""),B=(L={},L[S]=M+"Date",L[p]=M+"Date",L[m]=M+"Month",L[d]=M+"FullYear",L[D]=M+"Hours",L[E]=M+"Minutes",L[b]=M+"Seconds",L[F]=M+"Milliseconds",L)[N],J=N===S?this.$D+(T-this.$W):T;if(N===m||N===d){var ie=this.clone().set(p,1);ie.$d[B](J),ie.init(),this.$d=ie.set(p,Math.min(this.$D,ie.daysInMonth())).$d}else B&&this.$d[B](J);return this.init(),this},O.set=function(I,T){return this.clone().$set(I,T)},O.get=function(I){return this[j.p(I)]()},O.add=function(I,T){var L,N=this;I=Number(I);var M=j.p(T),B=function(te){var se=W(N);return j.w(se.date(se.date()+Math.round(te*I)),N)};if(M===m)return this.set(m,this.$M+I);if(M===d)return this.set(d,this.$y+I);if(M===S)return B(1);if(M===g)return B(7);var J=(L={},L[E]=6e4,L[D]=36e5,L[b]=1e3,L)[M]||1,ie=this.$d.getTime()+I*J;return j.w(ie,this)},O.subtract=function(I,T){return this.add(-1*I,T)},O.format=function(I){var T=this;if(!this.isValid())return"Invalid Date";var L=I||"YYYY-MM-DDTHH:mm:ssZ",N=j.z(this),M=this.$locale(),B=this.$H,J=this.$m,ie=this.$M,te=M.weekdays,se=M.months,ue=function(ye,it,Le,mt){return ye&&(ye[it]||ye(T,L))||Le[it].substr(0,mt)},pe=function(ye){return j.s(B%12||12,ye,"0")},dt=M.meridiem||function(ye,it,Le){var mt=ye<12?"AM":"PM";return Le?mt.toLowerCase():mt},ze={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ie+1,MM:j.s(ie+1,2,"0"),MMM:ue(M.monthsShort,ie,se,3),MMMM:ue(se,ie),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:ue(M.weekdaysMin,this.$W,te,2),ddd:ue(M.weekdaysShort,this.$W,te,3),dddd:te[this.$W],H:String(B),HH:j.s(B,2,"0"),h:pe(1),hh:pe(2),a:dt(B,J,!0),A:dt(B,J,!1),m:String(J),mm:j.s(J,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:N};return L.replace(y,function(ye,it){return it||ze[ye]||N.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(I,T,L){var N,M=j.p(T),B=W(I),J=6e4*(B.utcOffset()-this.utcOffset()),ie=this-B,te=j.m(this,B);return te=(N={},N[d]=te/12,N[m]=te,N[f]=te/3,N[g]=(ie-J)/6048e5,N[S]=(ie-J)/864e5,N[D]=ie/36e5,N[E]=ie/6e4,N[b]=ie/1e3,N)[M]||ie,L?te:j.a(te)},O.daysInMonth=function(){return this.endOf(m).$D},O.$locale=function(){return _[this.$L]},O.locale=function(I,T){if(!I)return this.$L;var L=this.clone(),N=G(I,T,!0);return N&&(L.$L=N),L},O.clone=function(){return j.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},H}(),A=X.prototype;return W.prototype=A,[["$ms",F],["$s",b],["$m",E],["$H",D],["$W",S],["$M",m],["$y",d],["$D",p]].forEach(function(H){A[H[1]]=function(O){return this.$g(O,H[0],H[1])}}),W.extend=function(H,O){return H.$i||(H(O,X,W),H.$i=!0),W},W.locale=G,W.isDayjs=x,W.unix=function(H){return W(1e3*H)},W.en=_[k],W.Ls=_,W.p={},W})},4110:function(l){(function(F,b){l.exports=b()})(this,function(){"use strict";return function(F,b,E){F=F||{};var D=b.prototype,S={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function g(f,d,p,v){return D.fromToBase(f,d,p,v)}E.en.relativeTime=S,D.fromToBase=function(f,d,p,v,y){for(var P,Q,C,k=p.$locale().relativeTime||S,_=F.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=_.length,G=0;G<x;G+=1){var W=_[G];W.d&&(P=v?E(f).diff(p,W.d,!0):p.diff(f,W.d,!0));var j=(F.rounding||Math.round)(Math.abs(P));if(C=P>0,j<=W.r||!W.r){j<=1&&G>0&&(W=_[G-1]);var X=k[W.l];y&&(j=y(""+j)),Q=typeof X=="string"?X.replace("%d",j):X(j,d,W.l,C);break}}if(d)return Q;var A=C?k.future:k.past;return typeof A=="function"?A(Q):A.replace("%s",Q)},D.to=function(f,d){return g(f,d,this,!0)},D.from=function(f,d){return g(f,d,this)};var m=function(f){return f.$u?E.utc():E()};D.toNow=function(f){return this.to(m(this),f)},D.fromNow=function(f){return this.from(m(this),f)}}})},660:function(l){(function(F,b){l.exports=b()})(this,function(){"use strict";return function(F,b,E){E.updateLocale=function(D,S){var g=E.Ls[D];if(g)return(S?Object.keys(S):[]).forEach(function(m){g[m]=S[m]}),g}}})},5035:l=>{"use strict";l.exports=function(F,b){b||(b={}),typeof b=="function"&&(b={cmp:b});var E=typeof b.cycles=="boolean"?b.cycles:!1,D=b.cmp&&function(g){return function(m){return function(f,d){var p={key:f,value:m[f]},v={key:d,value:m[d]};return g(p,v)}}}(b.cmp),S=[];return function g(m){if(m&&m.toJSON&&typeof m.toJSON=="function"&&(m=m.toJSON()),m!==void 0){if(typeof m=="number")return isFinite(m)?""+m:"null";if(typeof m!="object")return JSON.stringify(m);var f,d;if(Array.isArray(m)){for(d="[",f=0;f<m.length;f++)f&&(d+=","),d+=g(m[f])||"null";return d+"]"}if(m===null)return"null";if(S.indexOf(m)!==-1){if(E)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var p=S.push(m)-1,v=Object.keys(m).sort(D&&D(m));for(d="",f=0;f<v.length;f++){var y=v[f],P=g(m[y]);!P||(d&&(d+=","),d+=JSON.stringify(y)+":"+P)}return S.splice(p,1),"{"+d+"}"}}(F)}},9967:l=>{var F={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:13059}};F.loc.source={body:`# /*---------------------------------------------------------------------------------------------\r
#  *  Copyright (c) Microsoft Corporation. All rights reserved.\r
#  *  Licensed under the MIT License. See License.txt in the project root for license information.\r
#  *--------------------------------------------------------------------------------------------*/\r
\r
fragment Merged on MergedEvent {\r
	id\r
	actor {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	createdAt\r
	mergeRef {\r
		name\r
	}\r
	commit {\r
		oid\r
		commitUrl\r
	}\r
	url\r
}\r
\r
fragment HeadRefDeleted on HeadRefDeletedEvent {\r
	id\r
	actor {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	createdAt\r
	headRefName\r
}\r
\r
fragment Ref on Ref {\r
	name\r
	repository {\r
		owner {\r
			login\r
		}\r
		url\r
	}\r
	target {\r
		oid\r
	}\r
}\r
\r
fragment Comment on IssueComment {\r
	id\r
	databaseId\r
	authorAssociation\r
	author {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	url\r
	body\r
	bodyHTML\r
	updatedAt\r
	createdAt\r
	viewerCanUpdate\r
	viewerCanReact\r
	viewerCanDelete\r
}\r
\r
fragment Commit on PullRequestCommit {\r
	id\r
	commit {\r
		author {\r
			user {\r
				login\r
				avatarUrl\r
				url\r
			}\r
		}\r
		committer {\r
			avatarUrl\r
			name\r
		}\r
		oid\r
		message\r
		authoredDate\r
	}\r
	url\r
}\r
\r
fragment AssignedEvent on AssignedEvent {\r
	actor {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	user {\r
		login\r
		avatarUrl\r
		url\r
	}\r
}\r
\r
fragment Review on PullRequestReview {\r
	id\r
	databaseId\r
	authorAssociation\r
	url\r
	author {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	state\r
	body\r
	bodyHTML\r
	submittedAt\r
	updatedAt\r
	createdAt\r
}\r
\r
fragment Reactable on Reactable {\r
	reactionGroups {\r
		content\r
		viewerHasReacted\r
		users {\r
			totalCount\r
		}\r
	}\r
}\r
\r
query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			timelineItems(last: $last) {\r
				nodes {\r
					__typename\r
					...Merged\r
					...Comment\r
					...Review\r
					...Commit\r
					...AssignedEvent\r
					...HeadRefDeleted\r
				}\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest: issue(number: $number) {\r
			timelineItems(last: $last) {\r
				nodes {\r
					__typename\r
					...Comment\r
					...AssignedEvent\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
fragment ReviewComment on PullRequestReviewComment {\r
	id\r
	databaseId\r
	url\r
	author {\r
		login\r
		avatarUrl\r
		url\r
	}\r
	path\r
	originalPosition\r
	body\r
	bodyHTML\r
	diffHunk\r
	position\r
	state\r
	pullRequestReview {\r
		databaseId\r
	}\r
	commit {\r
		oid\r
	}\r
	replyTo {\r
		databaseId\r
	}\r
	createdAt\r
	originalCommit {\r
		oid\r
	}\r
	reactionGroups {\r
		content\r
		viewerHasReacted\r
		users {\r
			totalCount\r
		}\r
	}\r
	viewerCanUpdate\r
	viewerCanDelete\r
}\r
\r
query GetPendingReviewId($pullRequestId: ID!, $author: String!) {\r
	node(id: $pullRequestId) {\r
		... on PullRequest {\r
			reviews(first: 1, author: $author, states: [PENDING]) {\r
				nodes {\r
					id\r
				}\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			reviewThreads(first: $first) {\r
				nodes {\r
					isResolved\r
					comments(first: 100) {\r
						nodes {\r
							...ReviewComment\r
						}\r
					}\r
				}\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query PullRequest($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			number\r
			url\r
			state\r
			body\r
			bodyHTML\r
			title\r
			author {\r
				login\r
				url\r
				avatarUrl\r
			}\r
			createdAt\r
			updatedAt\r
			headRef {\r
				...Ref\r
			}\r
			baseRef {\r
				...Ref\r
			}\r
			labels(first: 50) {\r
				nodes {\r
					name\r
				}\r
			}\r
			merged\r
			mergeable\r
			id\r
			databaseId\r
			isDraft\r
			milestone {\r
				title\r
				dueOn\r
				createdAt\r
				id\r
			}\r
			assignees(first: 10) {\r
				nodes {\r
					login\r
					name\r
					avatarUrl\r
					url\r
					email\r
				}\r
			}\r
			suggestedReviewers {\r
				isAuthor\r
				isCommenter\r
				reviewer {\r
					login\r
					avatarUrl\r
					name\r
					url\r
				}\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query Issue($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest: issue(number: $number) {\r
			number\r
			url\r
			state\r
			body\r
			bodyHTML\r
			title\r
			author {\r
				login\r
				url\r
				avatarUrl\r
			}\r
			createdAt\r
			updatedAt\r
			labels(first: 50) {\r
				nodes {\r
					name\r
					color\r
				}\r
			}\r
			id\r
			databaseId\r
		}\r
	}\r
}\r
\r
query IssueWithComments($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest: issue(number: $number) {\r
			number\r
			url\r
			state\r
			body\r
			bodyHTML\r
			title\r
			author {\r
				login\r
				url\r
				avatarUrl\r
			}\r
			createdAt\r
			updatedAt\r
			labels(first: 50) {\r
				nodes {\r
					name\r
					color\r
				}\r
			}\r
			id\r
			databaseId\r
			comments(first: 50) {\r
				nodes {\r
					author {\r
						login\r
						url\r
						avatarUrl\r
					}\r
					body\r
					databaseId\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
query GetUser($login: String!) {\r
	user(login: $login) {\r
		login\r
		avatarUrl(size: 50)\r
		bio\r
		name\r
		company\r
		location\r
		contributionsCollection {\r
			commitContributionsByRepository(maxRepositories: 50) {\r
				contributions(first: 1) {\r
					nodes {\r
						occurredAt\r
					}\r
				}\r
				repository {\r
					nameWithOwner\r
				}\r
			}\r
		}\r
		url\r
	}\r
}\r
\r
query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			mergeable\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query PullRequestState($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			title\r
			number\r
			state\r
		}\r
	}\r
}\r
\r
mutation AddComment($input: AddPullRequestReviewCommentInput!) {\r
	addPullRequestReviewComment(input: $input) {\r
		comment {\r
			...ReviewComment\r
		}\r
	}\r
}\r
\r
mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {\r
	updatePullRequestReviewComment(input: $input) {\r
		pullRequestReviewComment {\r
			...ReviewComment\r
		}\r
	}\r
}\r
\r
mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {\r
	markPullRequestReadyForReview(input: $input) {\r
		pullRequest {\r
			isDraft\r
		}\r
	}\r
}\r
\r
mutation StartReview($input: AddPullRequestReviewInput!) {\r
	addPullRequestReview(input: $input) {\r
		pullRequestReview {\r
			id\r
			comments(first: 1) {\r
				nodes {\r
					...ReviewComment\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {\r
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {\r
		pullRequestReview {\r
			comments(first: 100) {\r
				nodes {\r
					...ReviewComment\r
				}\r
			}\r
			...Review\r
		}\r
	}\r
}\r
\r
mutation DeleteReview($input: DeletePullRequestReviewInput!) {\r
	deletePullRequestReview(input: $input) {\r
		pullRequestReview {\r
			databaseId\r
			comments(first: 100) {\r
				nodes {\r
					...ReviewComment\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
mutation AddReaction($input: AddReactionInput!) {\r
	addReaction(input: $input) {\r
		reaction {\r
			content\r
		}\r
		subject {\r
			...Reactable\r
		}\r
	}\r
}\r
\r
mutation DeleteReaction($input: RemoveReactionInput!) {\r
	removeReaction(input: $input) {\r
		reaction {\r
			content\r
		}\r
		subject {\r
			...Reactable\r
		}\r
	}\r
}\r
\r
mutation UpdatePullRequest($input: UpdatePullRequestInput!) {\r
	updatePullRequest(input: $input) {\r
		pullRequest {\r
			body\r
			bodyHTML\r
			title\r
		}\r
	}\r
}\r
\r
mutation AddIssueComment($input: AddCommentInput!) {\r
	addComment(input: $input) {\r
		commentEdge {\r
			node {\r
				...Comment\r
			}\r
		}\r
	}\r
}\r
\r
mutation EditIssueComment($input: UpdateIssueCommentInput!) {\r
	updateIssueComment(input: $input) {\r
		issueComment {\r
			...Comment\r
		}\r
	}\r
}\r
\r
query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {\r
	repository(owner: $owner, name: $name) {\r
		mentionableUsers(first: $first, after: $after) {\r
			nodes {\r
				login\r
				avatarUrl\r
				name\r
				url\r
				email\r
			}\r
			pageInfo {\r
				hasNextPage\r
				endCursor\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {\r
	repository(owner: $owner, name: $name) {\r
		assignableUsers(first: $first, after: $after) {\r
			nodes {\r
				login\r
				avatarUrl\r
				name\r
				url\r
				email\r
			}\r
			pageInfo {\r
				hasNextPage\r
				endCursor\r
			}\r
		}\r
	}\r
	rateLimit {\r
		limit\r
		cost\r
		remaining\r
		resetAt\r
	}\r
}\r
\r
query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {\r
	repository(owner: $owner, name: $name) {\r
		issues(\r
			first: 100\r
			states: OPEN\r
			filterBy: { assignee: $assignee, milestone: null }\r
			orderBy: { direction: DESC, field: UPDATED_AT }\r
		) {\r
			edges {\r
				node {\r
					... on Issue {\r
						number\r
						url\r
						state\r
						body\r
						bodyHTML\r
						title\r
						assignees(first: 10) {\r
							nodes {\r
								login\r
								url\r
							}\r
						}\r
						author {\r
							login\r
							url\r
							avatarUrl(size: 50)\r
						}\r
						createdAt\r
						updatedAt\r
						labels(first: 50) {\r
							nodes {\r
								name\r
								color\r
							}\r
						}\r
						id\r
						databaseId\r
						milestone {\r
							title\r
							dueOn\r
						}\r
					}\r
				}\r
			}\r
			pageInfo {\r
				hasNextPage\r
				endCursor\r
			}\r
		}\r
	}\r
}\r
\r
query MaxIssue($owner: String!, $name: String!) {\r
	repository(owner: $owner, name: $name) {\r
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {\r
			edges {\r
				node {\r
					... on Issue {\r
						number\r
					}\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
query GetMilestones($owner: String!, $name: String!, $assignee: String!) {\r
	repository(owner: $owner, name: $name) {\r
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {\r
			nodes {\r
				dueOn\r
				title\r
				createdAt\r
				id\r
				issues(\r
					first: 100\r
					filterBy: { assignee: $assignee }\r
					orderBy: { direction: DESC, field: UPDATED_AT }\r
					states: OPEN\r
				) {\r
					edges {\r
						node {\r
							... on Issue {\r
								number\r
								url\r
								state\r
								body\r
								bodyHTML\r
								title\r
								assignees(first: 10) {\r
									nodes {\r
										login\r
										url\r
									}\r
								}\r
								author {\r
									login\r
									url\r
									avatarUrl(size: 50)\r
								}\r
								createdAt\r
								updatedAt\r
								labels(first: 50) {\r
									nodes {\r
										name\r
										color\r
									}\r
								}\r
								id\r
								databaseId\r
								milestone {\r
									title\r
									dueOn\r
								}\r
							}\r
						}\r
					}\r
				}\r
			}\r
			pageInfo {\r
				hasNextPage\r
				endCursor\r
			}\r
		}\r
	}\r
}\r
\r
query Issues($query: String!) {\r
	search(first: 100, type: ISSUE, query: $query) {\r
		issueCount\r
		pageInfo {\r
			hasNextPage\r
			endCursor\r
		}\r
		edges {\r
			node {\r
				... on Issue {\r
					number\r
					url\r
					state\r
					body\r
					bodyHTML\r
					title\r
					assignees(first: 10) {\r
						nodes {\r
							login\r
							url\r
						}\r
					}\r
					author {\r
						login\r
						url\r
						avatarUrl(size: 50)\r
					}\r
					createdAt\r
					updatedAt\r
					labels(first: 50) {\r
						nodes {\r
							name\r
							color\r
						}\r
					}\r
					id\r
					databaseId\r
					milestone {\r
						title\r
						dueOn\r
						id\r
						createdAt\r
					}\r
					repository {\r
						name\r
						owner {\r
							login\r
						}\r
						url\r
					}\r
				}\r
			}\r
		}\r
	}\r
}\r
\r
query GetViewerPermission($owner: String!, $name: String!) {\r
	repository(owner: $owner, name: $name) {\r
		viewerPermission\r
	}\r
}\r
\r
query GetRepositoryForkDetails($owner: String!, $name: String!) {\r
	repository(owner: $owner, name: $name) {\r
		isFork\r
		parent {\r
			name\r
			owner\r
		}\r
	}\r
}\r
\r
query GetChecks($owner: String!, $name: String!, $number: Int!) {\r
	repository(owner: $owner, name: $name) {\r
		pullRequest(number: $number) {\r
			commits(last: 1) {\r
				nodes {\r
					commit {\r
						statusCheckRollup {\r
							state\r
							contexts(first: 100) {\r
								nodes {\r
									... on StatusContext {\r
										id\r
										state\r
										targetUrl\r
										description\r
										context\r
										avatarUrl\r
									}\r
									... on CheckRun {\r
										id\r
										conclusion\r
										title\r
										detailsUrl\r
										name\r
										resourcePath\r
										checkSuite {\r
											app {\r
												logoUrl\r
												url\r
											}\r
										}\r
									}\r
								}\r
							}\r
						}\r
					}\r
				}\r
			}\r
		}\r
	}\r
}\r
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var b={};function E(f){return f.filter(function(d){if(d.kind!=="FragmentDefinition")return!0;var p=d.name.value;return b[p]?!1:(b[p]=!0,!0)})}function D(f,d){if(f.kind==="FragmentSpread")d.add(f.name.value);else if(f.kind==="VariableDefinition"){var p=f.type;p.kind==="NamedType"&&d.add(p.name.value)}f.selectionSet&&f.selectionSet.selections.forEach(function(v){D(v,d)}),f.variableDefinitions&&f.variableDefinitions.forEach(function(v){D(v,d)}),f.definitions&&f.definitions.forEach(function(v){D(v,d)})}var S={};(function(){F.definitions.forEach(function(d){if(d.name){var p=new Set;D(d,p),S[d.name.value]=p}})})();function g(f,d){for(var p=0;p<f.definitions.length;p++){var v=f.definitions[p];if(v.name&&v.name.value==d)return v}}function m(f,d){var p={kind:f.kind,definitions:[g(f,d)]};f.hasOwnProperty("loc")&&(p.loc=f.loc);var v=S[d]||new Set,y=new Set,P=new Set;for(v.forEach(function(C){P.add(C)});P.size>0;){var Q=P;P=new Set,Q.forEach(function(C){if(!y.has(C)){y.add(C);var k=S[C]||new Set;k.forEach(function(_){P.add(_)})}})}return y.forEach(function(C){var k=g(f,C);k&&p.definitions.push(k)}),p}l.exports=F,l.exports.TimelineEvents=m(F,"TimelineEvents"),l.exports.IssueTimelineEvents=m(F,"IssueTimelineEvents"),l.exports.GetPendingReviewId=m(F,"GetPendingReviewId"),l.exports.PullRequestComments=m(F,"PullRequestComments"),l.exports.PullRequest=m(F,"PullRequest"),l.exports.Issue=m(F,"Issue"),l.exports.IssueWithComments=m(F,"IssueWithComments"),l.exports.GetUser=m(F,"GetUser"),l.exports.PullRequestMergeability=m(F,"PullRequestMergeability"),l.exports.PullRequestState=m(F,"PullRequestState"),l.exports.AddComment=m(F,"AddComment"),l.exports.EditComment=m(F,"EditComment"),l.exports.ReadyForReview=m(F,"ReadyForReview"),l.exports.StartReview=m(F,"StartReview"),l.exports.SubmitReview=m(F,"SubmitReview"),l.exports.DeleteReview=m(F,"DeleteReview"),l.exports.AddReaction=m(F,"AddReaction"),l.exports.DeleteReaction=m(F,"DeleteReaction"),l.exports.UpdatePullRequest=m(F,"UpdatePullRequest"),l.exports.AddIssueComment=m(F,"AddIssueComment"),l.exports.EditIssueComment=m(F,"EditIssueComment"),l.exports.GetMentionableUsers=m(F,"GetMentionableUsers"),l.exports.GetAssignableUsers=m(F,"GetAssignableUsers"),l.exports.IssuesWithoutMilestone=m(F,"IssuesWithoutMilestone"),l.exports.MaxIssue=m(F,"MaxIssue"),l.exports.GetMilestones=m(F,"GetMilestones"),l.exports.Issues=m(F,"Issues"),l.exports.GetViewerPermission=m(F,"GetViewerPermission"),l.exports.GetRepositoryForkDetails=m(F,"GetRepositoryForkDetails"),l.exports.GetChecks=m(F,"GetChecks")},972:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=g;var E=S(b(7706)),D=S(b(8554));function S(m){return m&&m.__esModule?m:{default:m}}function g(m){var f=m.prototype.toJSON;typeof f=="function"||(0,E.default)(0),m.prototype.inspect=f,D.default&&(m.prototype[D.default]=f)}},8002:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=f;var E=D(b(8554));function D(C){return C&&C.__esModule?C:{default:C}}function S(C){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?S=function(_){return typeof _}:S=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},S(C)}var g=10,m=2;function f(C){return d(C,[])}function d(C,k){switch(S(C)){case"string":return JSON.stringify(C);case"function":return C.name?"[function ".concat(C.name,"]"):"[function]";case"object":return C===null?"null":p(C,k);default:return String(C)}}function p(C,k){if(k.indexOf(C)!==-1)return"[Circular]";var _=[].concat(k,[C]),x=P(C);if(x!==void 0){var G=x.call(C);if(G!==C)return typeof G=="string"?G:d(G,_)}else if(Array.isArray(C))return y(C,_);return v(C,_)}function v(C,k){var _=Object.keys(C);if(_.length===0)return"{}";if(k.length>m)return"["+Q(C)+"]";var x=_.map(function(G){var W=d(C[G],k);return G+": "+W});return"{ "+x.join(", ")+" }"}function y(C,k){if(C.length===0)return"[]";if(k.length>m)return"[Array]";for(var _=Math.min(g,C.length),x=C.length-_,G=[],W=0;W<_;++W)G.push(d(C[W],k));return x===1?G.push("... 1 more item"):x>1&&G.push("... ".concat(x," more items")),"["+G.join(", ")+"]"}function P(C){var k=C[String(E.default)];if(typeof k=="function")return k;if(typeof C.inspect=="function")return C.inspect}function Q(C){var k=Object.prototype.toString.call(C).replace(/^\[object /,"").replace(/]$/,"");if(k==="Object"&&typeof C.constructor=="function"){var _=C.constructor.name;if(typeof _=="string"&&_!=="")return _}return k}},7706:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=b;function b(E,D){var S=Boolean(E);if(!S)throw new Error(D!=null?D:"Unexpected invariant triggered.")}},8554:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var b=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,E=b;F.default=E},1807:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.isNode=m,F.Token=F.Location=void 0;var E=D(b(972));function D(f){return f&&f.__esModule?f:{default:f}}var S=function(){function f(p,v,y){this.start=p.start,this.end=v.end,this.startToken=p,this.endToken=v,this.source=y}var d=f.prototype;return d.toJSON=function(){return{start:this.start,end:this.end}},f}();F.Location=S,(0,E.default)(S);var g=function(){function f(p,v,y,P,Q,C,k){this.kind=p,this.start=v,this.end=y,this.line=P,this.column=Q,this.value=k,this.prev=C,this.next=null}var d=f.prototype;return d.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},f}();F.Token=g,(0,E.default)(g);function m(f){return f!=null&&typeof f.kind=="string"}},849:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.dedentBlockStringValue=b,F.getBlockStringIndentation=D,F.printBlockString=S;function b(g){var m=g.split(/\r\n|[\n\r]/g),f=D(g);if(f!==0)for(var d=1;d<m.length;d++)m[d]=m[d].slice(f);for(var p=0;p<m.length&&E(m[p]);)++p;for(var v=m.length;v>p&&E(m[v-1]);)--v;return m.slice(p,v).join(`
`)}function E(g){for(var m=0;m<g.length;++m)if(g[m]!==" "&&g[m]!=="	")return!1;return!0}function D(g){for(var m,f=!0,d=!0,p=0,v=null,y=0;y<g.length;++y)switch(g.charCodeAt(y)){case 13:g.charCodeAt(y+1)===10&&++y;case 10:f=!1,d=!0,p=0;break;case 9:case 32:++p;break;default:d&&!f&&(v===null||p<v)&&(v=p),d=!1}return(m=v)!==null&&m!==void 0?m:0}function S(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=g.indexOf(`
`)===-1,p=g[0]===" "||g[0]==="	",v=g[g.length-1]==='"',y=g[g.length-1]==="\\",P=!d||v||y||f,Q="";return P&&!(d&&p)&&(Q+=`
`+m),Q+=m?g.replace(/\n/g,`
`+m):g,P&&(Q+=`
`),'"""'+Q.replace(/"""/g,'\\"""')+'"""'}},3033:(l,F,b)=>{"use strict";var E;E={value:!0},F.S=g;var D=b(285),S=b(849);function g(k){return(0,D.visit)(k,{leave:f})}var m=80,f={Name:function(_){return _.value},Variable:function(_){return"$"+_.name},Document:function(_){return p(_.definitions,`

`)+`
`},OperationDefinition:function(_){var x=_.operation,G=_.name,W=y("(",p(_.variableDefinitions,", "),")"),j=p(_.directives," "),X=_.selectionSet;return!G&&!j&&!W&&x==="query"?X:p([x,p([G,W]),j,X]," ")},VariableDefinition:function(_){var x=_.variable,G=_.type,W=_.defaultValue,j=_.directives;return x+": "+G+y(" = ",W)+y(" ",p(j," "))},SelectionSet:function(_){var x=_.selections;return v(x)},Field:function(_){var x=_.alias,G=_.name,W=_.arguments,j=_.directives,X=_.selectionSet,A=y("",x,": ")+G,H=A+y("(",p(W,", "),")");return H.length>m&&(H=A+y(`(
`,P(p(W,`
`)),`
)`)),p([H,p(j," "),X]," ")},Argument:function(_){var x=_.name,G=_.value;return x+": "+G},FragmentSpread:function(_){var x=_.name,G=_.directives;return"..."+x+y(" ",p(G," "))},InlineFragment:function(_){var x=_.typeCondition,G=_.directives,W=_.selectionSet;return p(["...",y("on ",x),p(G," "),W]," ")},FragmentDefinition:function(_){var x=_.name,G=_.typeCondition,W=_.variableDefinitions,j=_.directives,X=_.selectionSet;return"fragment ".concat(x).concat(y("(",p(W,", "),")")," ")+"on ".concat(G," ").concat(y("",p(j," ")," "))+X},IntValue:function(_){var x=_.value;return x},FloatValue:function(_){var x=_.value;return x},StringValue:function(_,x){var G=_.value,W=_.block;return W?(0,S.printBlockString)(G,x==="description"?"":"  "):JSON.stringify(G)},BooleanValue:function(_){var x=_.value;return x?"true":"false"},NullValue:function(){return"null"},EnumValue:function(_){var x=_.value;return x},ListValue:function(_){var x=_.values;return"["+p(x,", ")+"]"},ObjectValue:function(_){var x=_.fields;return"{"+p(x,", ")+"}"},ObjectField:function(_){var x=_.name,G=_.value;return x+": "+G},Directive:function(_){var x=_.name,G=_.arguments;return"@"+x+y("(",p(G,", "),")")},NamedType:function(_){var x=_.name;return x},ListType:function(_){var x=_.type;return"["+x+"]"},NonNullType:function(_){var x=_.type;return x+"!"},SchemaDefinition:d(function(k){var _=k.directives,x=k.operationTypes;return p(["schema",p(_," "),v(x)]," ")}),OperationTypeDefinition:function(_){var x=_.operation,G=_.type;return x+": "+G},ScalarTypeDefinition:d(function(k){var _=k.name,x=k.directives;return p(["scalar",_,p(x," ")]," ")}),ObjectTypeDefinition:d(function(k){var _=k.name,x=k.interfaces,G=k.directives,W=k.fields;return p(["type",_,y("implements ",p(x," & ")),p(G," "),v(W)]," ")}),FieldDefinition:d(function(k){var _=k.name,x=k.arguments,G=k.type,W=k.directives;return _+(C(x)?y(`(
`,P(p(x,`
`)),`
)`):y("(",p(x,", "),")"))+": "+G+y(" ",p(W," "))}),InputValueDefinition:d(function(k){var _=k.name,x=k.type,G=k.defaultValue,W=k.directives;return p([_+": "+x,y("= ",G),p(W," ")]," ")}),InterfaceTypeDefinition:d(function(k){var _=k.name,x=k.interfaces,G=k.directives,W=k.fields;return p(["interface",_,y("implements ",p(x," & ")),p(G," "),v(W)]," ")}),UnionTypeDefinition:d(function(k){var _=k.name,x=k.directives,G=k.types;return p(["union",_,p(x," "),G&&G.length!==0?"= "+p(G," | "):""]," ")}),EnumTypeDefinition:d(function(k){var _=k.name,x=k.directives,G=k.values;return p(["enum",_,p(x," "),v(G)]," ")}),EnumValueDefinition:d(function(k){var _=k.name,x=k.directives;return p([_,p(x," ")]," ")}),InputObjectTypeDefinition:d(function(k){var _=k.name,x=k.directives,G=k.fields;return p(["input",_,p(x," "),v(G)]," ")}),DirectiveDefinition:d(function(k){var _=k.name,x=k.arguments,G=k.repeatable,W=k.locations;return"directive @"+_+(C(x)?y(`(
`,P(p(x,`
`)),`
)`):y("(",p(x,", "),")"))+(G?" repeatable":"")+" on "+p(W," | ")}),SchemaExtension:function(_){var x=_.directives,G=_.operationTypes;return p(["extend schema",p(x," "),v(G)]," ")},ScalarTypeExtension:function(_){var x=_.name,G=_.directives;return p(["extend scalar",x,p(G," ")]," ")},ObjectTypeExtension:function(_){var x=_.name,G=_.interfaces,W=_.directives,j=_.fields;return p(["extend type",x,y("implements ",p(G," & ")),p(W," "),v(j)]," ")},InterfaceTypeExtension:function(_){var x=_.name,G=_.interfaces,W=_.directives,j=_.fields;return p(["extend interface",x,y("implements ",p(G," & ")),p(W," "),v(j)]," ")},UnionTypeExtension:function(_){var x=_.name,G=_.directives,W=_.types;return p(["extend union",x,p(G," "),W&&W.length!==0?"= "+p(W," | "):""]," ")},EnumTypeExtension:function(_){var x=_.name,G=_.directives,W=_.values;return p(["extend enum",x,p(G," "),v(W)]," ")},InputObjectTypeExtension:function(_){var x=_.name,G=_.directives,W=_.fields;return p(["extend input",x,p(G," "),v(W)]," ")}};function d(k){return function(_){return p([_.description,k(_)],`
`)}}function p(k){var _,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(_=k==null?void 0:k.filter(function(G){return G}).join(x))!==null&&_!==void 0?_:""}function v(k){return y(`{
`,P(p(k,`
`)),`
}`)}function y(k,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return _!=null&&_!==""?k+_+x:""}function P(k){return y("  ",k.replace(/\n/g,`
  `))}function Q(k){return k.indexOf(`
`)!==-1}function C(k){return k!=null&&k.some(Q)}},285:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),F.visit=f,F.visitInParallel=d,F.getVisitFn=p,F.BREAK=F.QueryDocumentKeys=void 0;var E=S(b(8002)),D=b(1807);function S(v){return v&&v.__esModule?v:{default:v}}var g={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};F.QueryDocumentKeys=g;var m=Object.freeze({});F.BREAK=m;function f(v,y){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g,Q=void 0,C=Array.isArray(v),k=[v],_=-1,x=[],G=void 0,W=void 0,j=void 0,X=[],A=[],H=v;do{_++;var O=_===k.length,I=O&&x.length!==0;if(O){if(W=A.length===0?void 0:X[X.length-1],G=j,j=A.pop(),I){if(C)G=G.slice();else{for(var T={},L=0,N=Object.keys(G);L<N.length;L++){var M=N[L];T[M]=G[M]}G=T}for(var B=0,J=0;J<x.length;J++){var ie=x[J][0],te=x[J][1];C&&(ie-=B),C&&te===null?(G.splice(ie,1),B++):G[ie]=te}}_=Q.index,k=Q.keys,x=Q.edits,C=Q.inArray,Q=Q.prev}else{if(W=j?C?_:k[_]:void 0,G=j?j[W]:H,G==null)continue;j&&X.push(W)}var se=void 0;if(!Array.isArray(G)){if(!(0,D.isNode)(G))throw new Error("Invalid AST Node: ".concat((0,E.default)(G),"."));var ue=p(y,G.kind,O);if(ue){if(se=ue.call(y,G,W,j,X,A),se===m)break;if(se===!1){if(!O){X.pop();continue}}else if(se!==void 0&&(x.push([W,se]),!O))if((0,D.isNode)(se))G=se;else{X.pop();continue}}}if(se===void 0&&I&&x.push([W,G]),O)X.pop();else{var pe;Q={inArray:C,index:_,keys:k,edits:x,prev:Q},C=Array.isArray(G),k=C?G:(pe=P[G.kind])!==null&&pe!==void 0?pe:[],_=-1,x=[],j&&A.push(j),j=G}}while(Q!==void 0);return x.length!==0&&(H=x[x.length-1][1]),H}function d(v){var y=new Array(v.length);return{enter:function(Q){for(var C=0;C<v.length;C++)if(y[C]==null){var k=p(v[C],Q.kind,!1);if(k){var _=k.apply(v[C],arguments);if(_===!1)y[C]=Q;else if(_===m)y[C]=m;else if(_!==void 0)return _}}},leave:function(Q){for(var C=0;C<v.length;C++)if(y[C]==null){var k=p(v[C],Q.kind,!0);if(k){var _=k.apply(v[C],arguments);if(_===m)y[C]=m;else if(_!==void 0&&_!==!1)return _}}else y[C]===Q&&(y[C]=null)}}}function p(v,y,P){var Q=v[y];if(Q){if(!P&&typeof Q=="function")return Q;var C=P?Q.leave:Q.enter;if(typeof C=="function")return C}else{var k=P?v.leave:v.enter;if(k){if(typeof k=="function")return k;var _=k[y];if(typeof _=="function")return _}}}},9593:(l,F,b)=>{"use strict";const E=b(4411),D=Symbol("max"),S=Symbol("length"),g=Symbol("lengthCalculator"),m=Symbol("allowStale"),f=Symbol("maxAge"),d=Symbol("dispose"),p=Symbol("noDisposeOnSet"),v=Symbol("lruList"),y=Symbol("cache"),P=Symbol("updateAgeOnGet"),Q=()=>1;class C{constructor(A){if(typeof A=="number"&&(A={max:A}),A||(A={}),A.max&&(typeof A.max!="number"||A.max<0))throw new TypeError("max must be a non-negative number");const H=this[D]=A.max||Infinity,O=A.length||Q;if(this[g]=typeof O!="function"?Q:O,this[m]=A.stale||!1,A.maxAge&&typeof A.maxAge!="number")throw new TypeError("maxAge must be a number");this[f]=A.maxAge||0,this[d]=A.dispose,this[p]=A.noDisposeOnSet||!1,this[P]=A.updateAgeOnGet||!1,this.reset()}set max(A){if(typeof A!="number"||A<0)throw new TypeError("max must be a non-negative number");this[D]=A||Infinity,x(this)}get max(){return this[D]}set allowStale(A){this[m]=!!A}get allowStale(){return this[m]}set maxAge(A){if(typeof A!="number")throw new TypeError("maxAge must be a non-negative number");this[f]=A,x(this)}get maxAge(){return this[f]}set lengthCalculator(A){typeof A!="function"&&(A=Q),A!==this[g]&&(this[g]=A,this[S]=0,this[v].forEach(H=>{H.length=this[g](H.value,H.key),this[S]+=H.length})),x(this)}get lengthCalculator(){return this[g]}get length(){return this[S]}get itemCount(){return this[v].length}rforEach(A,H){H=H||this;for(let O=this[v].tail;O!==null;){const I=O.prev;j(this,A,O,H),O=I}}forEach(A,H){H=H||this;for(let O=this[v].head;O!==null;){const I=O.next;j(this,A,O,H),O=I}}keys(){return this[v].toArray().map(A=>A.key)}values(){return this[v].toArray().map(A=>A.value)}reset(){this[d]&&this[v]&&this[v].length&&this[v].forEach(A=>this[d](A.key,A.value)),this[y]=new Map,this[v]=new E,this[S]=0}dump(){return this[v].map(A=>_(this,A)?!1:{k:A.key,v:A.value,e:A.now+(A.maxAge||0)}).toArray().filter(A=>A)}dumpLru(){return this[v]}set(A,H,O){if(O=O||this[f],O&&typeof O!="number")throw new TypeError("maxAge must be a number");const I=O?Date.now():0,T=this[g](H,A);if(this[y].has(A)){if(T>this[D])return G(this,this[y].get(A)),!1;const M=this[y].get(A).value;return this[d]&&(this[p]||this[d](A,M.value)),M.now=I,M.maxAge=O,M.value=H,this[S]+=T-M.length,M.length=T,this.get(A),x(this),!0}const L=new W(A,H,T,I,O);return L.length>this[D]?(this[d]&&this[d](A,H),!1):(this[S]+=L.length,this[v].unshift(L),this[y].set(A,this[v].head),x(this),!0)}has(A){if(!this[y].has(A))return!1;const H=this[y].get(A).value;return!_(this,H)}get(A){return k(this,A,!0)}peek(A){return k(this,A,!1)}pop(){const A=this[v].tail;return A?(G(this,A),A.value):null}del(A){G(this,this[y].get(A))}load(A){this.reset();const H=Date.now();for(let O=A.length-1;O>=0;O--){const I=A[O],T=I.e||0;if(T===0)this.set(I.k,I.v);else{const L=T-H;L>0&&this.set(I.k,I.v,L)}}}prune(){this[y].forEach((A,H)=>k(this,H,!1))}}const k=(X,A,H)=>{const O=X[y].get(A);if(O){const I=O.value;if(_(X,I)){if(G(X,O),!X[m])return}else H&&(X[P]&&(O.value.now=Date.now()),X[v].unshiftNode(O));return I.value}},_=(X,A)=>{if(!A||!A.maxAge&&!X[f])return!1;const H=Date.now()-A.now;return A.maxAge?H>A.maxAge:X[f]&&H>X[f]},x=X=>{if(X[S]>X[D])for(let A=X[v].tail;X[S]>X[D]&&A!==null;){const H=A.prev;G(X,A),A=H}},G=(X,A)=>{if(A){const H=A.value;X[d]&&X[d](H.key,H.value),X[S]-=H.length,X[y].delete(H.key),X[v].removeNode(A)}};class W{constructor(A,H,O,I,T){this.key=A,this.value=H,this.length=O,this.now=I,this.maxAge=T||0}}const j=(X,A,H,O)=>{let I=H.value;_(X,I)&&(G(X,H),X[m]||(I=void 0)),I&&A.call(O,I.value,I.key,X)};l.exports=C},7468:(l,F,b)=>{const E=b(9930),{defaults:D}=b(8644),{inline:S}=b(9709),{findClosingBracket:g,escape:m}=b(621);l.exports=class Br{constructor(d,p){if(this.options=p||D,this.links=d,this.rules=S.normal,this.options.renderer=this.options.renderer||new E,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=S.pedantic:this.options.gfm&&(this.options.breaks?this.rules=S.breaks:this.rules=S.gfm)}static get rules(){return S}static output(d,p,v){return new Br(p,v).output(d)}output(d){let p="",v,y,P,Q,C,k;for(;d;){if(C=this.rules.escape.exec(d)){d=d.substring(C[0].length),p+=m(C[1]);continue}if(C=this.rules.tag.exec(d)){!this.inLink&&/^<a /i.test(C[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(C[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(C[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(C[0])&&(this.inRawBlock=!1),d=d.substring(C[0].length),p+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(C[0]):m(C[0]):C[0]);continue}if(C=this.rules.link.exec(d)){const _=g(C[2],"()");if(_>-1){const G=(C[0].indexOf("!")===0?5:4)+C[1].length+_;C[2]=C[2].substring(0,_),C[0]=C[0].substring(0,G).trim(),C[3]=""}d=d.substring(C[0].length),this.inLink=!0,P=C[2],this.options.pedantic?(v=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(P),v?(P=v[1],Q=v[3]):Q=""):Q=C[3]?C[3].slice(1,-1):"",P=P.trim().replace(/^<([\s\S]*)>$/,"$1"),p+=this.outputLink(C,{href:Br.escapes(P),title:Br.escapes(Q)}),this.inLink=!1;continue}if((C=this.rules.reflink.exec(d))||(C=this.rules.nolink.exec(d))){if(d=d.substring(C[0].length),v=(C[2]||C[1]).replace(/\s+/g," "),v=this.links[v.toLowerCase()],!v||!v.href){p+=C[0].charAt(0),d=C[0].substring(1)+d;continue}this.inLink=!0,p+=this.outputLink(C,v),this.inLink=!1;continue}if(C=this.rules.strong.exec(d)){d=d.substring(C[0].length),p+=this.renderer.strong(this.output(C[4]||C[3]||C[2]||C[1]));continue}if(C=this.rules.em.exec(d)){d=d.substring(C[0].length),p+=this.renderer.em(this.output(C[6]||C[5]||C[4]||C[3]||C[2]||C[1]));continue}if(C=this.rules.code.exec(d)){d=d.substring(C[0].length),p+=this.renderer.codespan(m(C[2].trim(),!0));continue}if(C=this.rules.br.exec(d)){d=d.substring(C[0].length),p+=this.renderer.br();continue}if(C=this.rules.del.exec(d)){d=d.substring(C[0].length),p+=this.renderer.del(this.output(C[1]));continue}if(C=this.rules.autolink.exec(d)){d=d.substring(C[0].length),C[2]==="@"?(y=m(this.mangle(C[1])),P="mailto:"+y):(y=m(C[1]),P=y),p+=this.renderer.link(P,null,y);continue}if(!this.inLink&&(C=this.rules.url.exec(d))){if(C[2]==="@")y=m(C[0]),P="mailto:"+y;else{do k=C[0],C[0]=this.rules._backpedal.exec(C[0])[0];while(k!==C[0]);y=m(C[0]),C[1]==="www."?P="http://"+y:P=y}d=d.substring(C[0].length),p+=this.renderer.link(P,null,y);continue}if(C=this.rules.text.exec(d)){d=d.substring(C[0].length),this.inRawBlock?p+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(C[0]):m(C[0]):C[0]):p+=this.renderer.text(m(this.smartypants(C[0])));continue}if(d)throw new Error("Infinite loop on byte: "+d.charCodeAt(0))}return p}static escapes(d){return d&&d.replace(Br.rules._escapes,"$1")}outputLink(d,p){const v=p.href,y=p.title?m(p.title):null;return d[0].charAt(0)!=="!"?this.renderer.link(v,y,this.output(d[1])):this.renderer.image(v,y,m(d[1]))}smartypants(d){return this.options.smartypants?d.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):d}mangle(d){if(!this.options.mangle)return d;const p=d.length;let v="",y=0,P;for(;y<p;y++)P=d.charCodeAt(y),Math.random()>.5&&(P="x"+P.toString(16)),v+="&#"+P+";";return v}}},1092:(l,F,b)=>{const{defaults:E}=b(8644),{block:D}=b(9709),{rtrim:S,splitCells:g,escape:m}=b(621);l.exports=class cl{constructor(d){this.tokens=[],this.tokens.links=Object.create(null),this.options=d||E,this.rules=D.normal,this.options.pedantic?this.rules=D.pedantic:this.options.gfm&&(this.rules=D.gfm)}static get rules(){return D}static lex(d,p){return new cl(p).lex(d)}lex(d){return d=d.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(d,!0)}token(d,p){d=d.replace(/^ +$/gm,"");let v,y,P,Q,C,k,_,x,G,W,j,X,A,H,O,I;for(;d;){if((P=this.rules.newline.exec(d))&&(d=d.substring(P[0].length),P[0].length>1&&this.tokens.push({type:"space"})),P=this.rules.code.exec(d)){const T=this.tokens[this.tokens.length-1];d=d.substring(P[0].length),T&&T.type==="paragraph"?T.text+=`
`+P[0].trimRight():(P=P[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?P:S(P,`
`)}));continue}if(P=this.rules.fences.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"code",lang:P[2]?P[2].trim():P[2],text:P[3]||""});continue}if(P=this.rules.heading.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"heading",depth:P[1].length,text:P[2]});continue}if((P=this.rules.nptable.exec(d))&&(k={type:"table",header:g(P[1].replace(/^ *| *\| *$/g,"")),align:P[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:P[3]?P[3].replace(/\n$/,"").split(`
`):[]},k.header.length===k.align.length)){for(d=d.substring(P[0].length),j=0;j<k.align.length;j++)/^ *-+: *$/.test(k.align[j])?k.align[j]="right":/^ *:-+: *$/.test(k.align[j])?k.align[j]="center":/^ *:-+ *$/.test(k.align[j])?k.align[j]="left":k.align[j]=null;for(j=0;j<k.cells.length;j++)k.cells[j]=g(k.cells[j],k.header.length);this.tokens.push(k);continue}if(P=this.rules.hr.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"hr"});continue}if(P=this.rules.blockquote.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"blockquote_start"}),P=P[0].replace(/^ *> ?/gm,""),this.token(P,p),this.tokens.push({type:"blockquote_end"});continue}if(P=this.rules.list.exec(d)){for(d=d.substring(P[0].length),Q=P[2],H=Q.length>1,_={type:"list_start",ordered:H,start:H?+Q:"",loose:!1},this.tokens.push(_),P=P[0].match(this.rules.item),x=[],v=!1,A=P.length,j=0;j<A;j++)k=P[j],W=k.length,k=k.replace(/^ *([*+-]|\d+\.) */,""),~k.indexOf(`
 `)&&(W-=k.length,k=this.options.pedantic?k.replace(/^ {1,4}/gm,""):k.replace(new RegExp("^ {1,"+W+"}","gm"),"")),j!==A-1&&(C=D.bullet.exec(P[j+1])[0],(Q.length>1?C.length===1:C.length>1||this.options.smartLists&&C!==Q)&&(d=P.slice(j+1).join(`
`)+d,j=A-1)),y=v||/\n\n(?!\s*$)/.test(k),j!==A-1&&(v=k.charAt(k.length-1)===`
`,y||(y=v)),y&&(_.loose=!0),O=/^\[[ xX]\] /.test(k),I=void 0,O&&(I=k[1]!==" ",k=k.replace(/^\[[ xX]\] +/,"")),G={type:"list_item_start",task:O,checked:I,loose:y},x.push(G),this.tokens.push(G),this.token(k,!1),this.tokens.push({type:"list_item_end"});if(_.loose)for(A=x.length,j=0;j<A;j++)x[j].loose=!0;this.tokens.push({type:"list_end"});continue}if(P=this.rules.html.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(P[1]==="pre"||P[1]==="script"||P[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(P[0]):m(P[0]):P[0]});continue}if(p&&(P=this.rules.def.exec(d))){d=d.substring(P[0].length),P[3]&&(P[3]=P[3].substring(1,P[3].length-1)),X=P[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[X]||(this.tokens.links[X]={href:P[2],title:P[3]});continue}if((P=this.rules.table.exec(d))&&(k={type:"table",header:g(P[1].replace(/^ *| *\| *$/g,"")),align:P[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:P[3]?P[3].replace(/\n$/,"").split(`
`):[]},k.header.length===k.align.length)){for(d=d.substring(P[0].length),j=0;j<k.align.length;j++)/^ *-+: *$/.test(k.align[j])?k.align[j]="right":/^ *:-+: *$/.test(k.align[j])?k.align[j]="center":/^ *:-+ *$/.test(k.align[j])?k.align[j]="left":k.align[j]=null;for(j=0;j<k.cells.length;j++)k.cells[j]=g(k.cells[j].replace(/^ *\| *| *\| *$/g,""),k.header.length);this.tokens.push(k);continue}if(P=this.rules.lheading.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"heading",depth:P[2].charAt(0)==="="?1:2,text:P[1]});continue}if(p&&(P=this.rules.paragraph.exec(d))){d=d.substring(P[0].length),this.tokens.push({type:"paragraph",text:P[1].charAt(P[1].length-1)===`
`?P[1].slice(0,-1):P[1]});continue}if(P=this.rules.text.exec(d)){d=d.substring(P[0].length),this.tokens.push({type:"text",text:P[0]});continue}if(d)throw new Error("Infinite loop on byte: "+d.charCodeAt(0))}return this.tokens}}},9170:(l,F,b)=>{const E=b(9930),D=b(1846),S=b(7468),g=b(1477),{defaults:m}=b(8644),{merge:f,unescape:d}=b(621);l.exports=class dl{constructor(v){this.tokens=[],this.token=null,this.options=v||m,this.options.renderer=this.options.renderer||new E,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new D}static parse(v,y){return new dl(y).parse(v)}parse(v){this.inline=new S(v.links,this.options),this.inlineText=new S(v.links,f({},this.options,{renderer:new g})),this.tokens=v.reverse();let y="";for(;this.next();)y+=this.tok();return y}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let v=this.token.text;for(;this.peek().type==="text";)v+=`
`+this.next().text;return this.inline.output(v)}tok(){let v="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,d(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let y="",P,Q,C,k;for(C="",P=0;P<this.token.header.length;P++)C+=this.renderer.tablecell(this.inline.output(this.token.header[P]),{header:!0,align:this.token.align[P]});for(y+=this.renderer.tablerow(C),P=0;P<this.token.cells.length;P++){for(Q=this.token.cells[P],C="",k=0;k<Q.length;k++)C+=this.renderer.tablecell(this.inline.output(Q[k]),{header:!1,align:this.token.align[k]});v+=this.renderer.tablerow(C)}return this.renderer.table(y,v)}case"blockquote_start":{for(v="";this.next().type!=="blockquote_end";)v+=this.tok();return this.renderer.blockquote(v)}case"list_start":{v="";const y=this.token.ordered,P=this.token.start;for(;this.next().type!=="list_end";)v+=this.tok();return this.renderer.list(v,y,P)}case"list_item_start":{v="";const y=this.token.loose,P=this.token.checked,Q=this.token.task;if(this.token.task)if(y)if(this.peek().type==="text"){const C=this.peek();C.text=this.renderer.checkbox(P)+" "+C.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(P)});else v+=this.renderer.checkbox(P);for(;this.next().type!=="list_item_end";)v+=!y&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(v,Q,P)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const y='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(y);else throw new Error(y)}}}}},9930:(l,F,b)=>{const{defaults:E}=b(8644),{cleanUrl:D,escape:S}=b(621);l.exports=class{constructor(m){this.options=m||E}code(m,f,d){const p=(f||"").match(/\S*/)[0];if(this.options.highlight){const v=this.options.highlight(m,p);v!=null&&v!==m&&(d=!0,m=v)}return p?'<pre><code class="'+this.options.langPrefix+S(p,!0)+'">'+(d?m:S(m,!0))+`</code></pre>
`:"<pre><code>"+(d?m:S(m,!0))+"</code></pre>"}blockquote(m){return`<blockquote>
`+m+`</blockquote>
`}html(m){return m}heading(m,f,d,p){return this.options.headerIds?"<h"+f+' id="'+this.options.headerPrefix+p.slug(d)+'">'+m+"</h"+f+`>
`:"<h"+f+">"+m+"</h"+f+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(m,f,d){const p=f?"ol":"ul",v=f&&d!==1?' start="'+d+'"':"";return"<"+p+v+`>
`+m+"</"+p+`>
`}listitem(m){return"<li>"+m+`</li>
`}checkbox(m){return"<input "+(m?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(m){return"<p>"+m+`</p>
`}table(m,f){return f&&(f="<tbody>"+f+"</tbody>"),`<table>
<thead>
`+m+`</thead>
`+f+`</table>
`}tablerow(m){return`<tr>
`+m+`</tr>
`}tablecell(m,f){const d=f.header?"th":"td";return(f.align?"<"+d+' align="'+f.align+'">':"<"+d+">")+m+"</"+d+`>
`}strong(m){return"<strong>"+m+"</strong>"}em(m){return"<em>"+m+"</em>"}codespan(m){return"<code>"+m+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(m){return"<del>"+m+"</del>"}link(m,f,d){if(m=D(this.options.sanitize,this.options.baseUrl,m),m===null)return d;let p='<a href="'+S(m)+'"';return f&&(p+=' title="'+f+'"'),p+=">"+d+"</a>",p}image(m,f,d){if(m=D(this.options.sanitize,this.options.baseUrl,m),m===null)return d;let p='<img src="'+m+'" alt="'+d+'"';return f&&(p+=' title="'+f+'"'),p+=this.options.xhtml?"/>":">",p}text(m){return m}}},1846:l=>{l.exports=class{constructor(){this.seen={}}slug(b){let E=b.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(E)){const D=E;do this.seen[D]++,E=D+"-"+this.seen[D];while(this.seen.hasOwnProperty(E))}return this.seen[E]=0,E}}},1477:l=>{l.exports=class{strong(b){return b}em(b){return b}codespan(b){return b}del(b){return b}html(b){return b}text(b){return b}link(b,E,D){return""+D}image(b,E,D){return""+D}br(){return""}}},8644:l=>{function F(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function b(E){l.exports.defaults=E}l.exports={defaults:F(),getDefaults:F,changeDefaults:b}},621:l=>{const F=/[&<>"']/,b=/[&<>"']/g,E=/[<>"']|&(?!#?\w+;)/,D=/[<>"']|&(?!#?\w+;)/g,S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},g=I=>S[I];function m(I,T){if(T){if(F.test(I))return I.replace(b,g)}else if(E.test(I))return I.replace(D,g);return I}const f=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function d(I){return I.replace(f,(T,L)=>(L=L.toLowerCase(),L==="colon"?":":L.charAt(0)==="#"?L.charAt(1)==="x"?String.fromCharCode(parseInt(L.substring(2),16)):String.fromCharCode(+L.substring(1)):""))}const p=/(^|[^\[])\^/g;function v(I,T){I=I.source||I,T=T||"";const L={replace:(N,M)=>(M=M.source||M,M=M.replace(p,"$1"),I=I.replace(N,M),L),getRegex:()=>new RegExp(I,T)};return L}const y=/[^\w:]/g,P=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Q(I,T,L){if(I){let N;try{N=decodeURIComponent(d(L)).replace(y,"").toLowerCase()}catch(M){return null}if(N.indexOf("javascript:")===0||N.indexOf("vbscript:")===0||N.indexOf("data:")===0)return null}T&&!P.test(L)&&(L=G(T,L));try{L=encodeURI(L).replace(/%25/g,"%")}catch(N){return null}return L}const C={},k=/^[^:]+:\/*[^/]*$/,_=/^([^:]+:)[\s\S]*$/,x=/^([^:]+:\/*[^/]*)[\s\S]*$/;function G(I,T){C[" "+I]||(k.test(I)?C[" "+I]=I+"/":C[" "+I]=A(I,"/",!0)),I=C[" "+I];const L=I.indexOf(":")===-1;return T.substring(0,2)==="//"?L?T:I.replace(_,"$1")+T:T.charAt(0)==="/"?L?T:I.replace(x,"$1")+T:I+T}const W={exec:function(){}};function j(I){let T=1,L,N;for(;T<arguments.length;T++){L=arguments[T];for(N in L)Object.prototype.hasOwnProperty.call(L,N)&&(I[N]=L[N])}return I}function X(I,T){const L=I.replace(/\|/g,(B,J,ie)=>{let te=!1,se=J;for(;--se>=0&&ie[se]==="\\";)te=!te;return te?"|":" |"}),N=L.split(/ \|/);let M=0;if(N.length>T)N.splice(T);else for(;N.length<T;)N.push("");for(;M<N.length;M++)N[M]=N[M].trim().replace(/\\\|/g,"|");return N}function A(I,T,L){const N=I.length;if(N===0)return"";let M=0;for(;M<N;){const B=I.charAt(N-M-1);if(B===T&&!L)M++;else if(B!==T&&L)M++;else break}return I.substr(0,N-M)}function H(I,T){if(I.indexOf(T[1])===-1)return-1;const L=I.length;let N=0,M=0;for(;M<L;M++)if(I[M]==="\\")M++;else if(I[M]===T[0])N++;else if(I[M]===T[1]&&(N--,N<0))return M;return-1}function O(I){I&&I.sanitize&&!I.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}l.exports={escape:m,unescape:d,edit:v,cleanUrl:Q,resolveUrl:G,noopTest:W,merge:j,splitCells:X,rtrim:A,findClosingBracket:H,checkSanitizeDeprecation:O}},7228:(l,F,b)=>{const E=b(1092),D=b(9170),S=b(9930),g=b(1477),m=b(7468),f=b(1846),{merge:d,checkSanitizeDeprecation:p,escape:v}=b(621),{getDefaults:y,changeDefaults:P,defaults:Q}=b(8644);function C(k,_,x){if(typeof k=="undefined"||k===null)throw new Error("marked(): input parameter is undefined or null");if(typeof k!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(k)+", string expected");if(x||typeof _=="function"){x||(x=_,_=null),_=d({},C.defaults,_||{}),p(_);const G=_.highlight;let W,j,X=0;try{W=E.lex(k,_)}catch(H){return x(H)}j=W.length;const A=function(H){if(H)return _.highlight=G,x(H);let O;try{O=D.parse(W,_)}catch(I){H=I}return _.highlight=G,H?x(H):x(null,O)};if(!G||G.length<3||(delete _.highlight,!j))return A();for(;X<W.length;X++)(function(H){return H.type!=="code"?--j||A():G(H.text,H.lang,function(O,I){if(O)return A(O);if(I==null||I===H.text)return--j||A();H.text=I,H.escaped=!0,--j||A()})})(W[X]);return}try{return _=d({},C.defaults,_||{}),p(_),D.parse(E.lex(k,_),_)}catch(G){if(G.message+=`
Please report this to https://github.com/markedjs/marked.`,(_||C.defaults).silent)return"<p>An error occurred:</p><pre>"+v(G.message+"",!0)+"</pre>";throw G}}C.options=C.setOptions=function(k){return d(C.defaults,k),P(C.defaults),C},C.getDefaults=y,C.defaults=Q,C.Parser=D,C.parser=D.parse,C.Renderer=S,C.TextRenderer=g,C.Lexer=E,C.lexer=E.lex,C.InlineLexer=m,C.inlineLexer=m.output,C.Slugger=f,C.parse=C,l.exports=C},9709:(l,F,b)=>{const{noopTest:E,edit:D,merge:S}=b(621),g={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:E,table:E,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};g._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,g._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,g.def=D(g.def).replace("label",g._label).replace("title",g._title).getRegex(),g.bullet=/(?:[*+-]|\d{1,9}\.)/,g.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,g.item=D(g.item,"gm").replace(/bull/g,g.bullet).getRegex(),g.list=D(g.list).replace(/bull/g,g.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+g.def.source+")").getRegex(),g._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",g._comment=/<!--(?!-?>)[\s\S]*?-->/,g.html=D(g.html,"i").replace("comment",g._comment).replace("tag",g._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),g.paragraph=D(g._paragraph).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.blockquote=D(g.blockquote).replace("paragraph",g.paragraph).getRegex(),g.normal=S({},g),g.gfm=S({},g.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),g.gfm.nptable=D(g.gfm.nptable).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.gfm.table=D(g.gfm.table).replace("hr",g.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",g._tag).getRegex(),g.pedantic=S({},g.normal,{html:D(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",g._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:E,paragraph:D(g.normal._paragraph).replace("hr",g.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",g.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const m={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:E,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:E,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};m._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,m.em=D(m.em).replace(/punctuation/g,m._punctuation).getRegex(),m._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,m._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,m._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,m.autolink=D(m.autolink).replace("scheme",m._scheme).replace("email",m._email).getRegex(),m._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,m.tag=D(m.tag).replace("comment",g._comment).replace("attribute",m._attribute).getRegex(),m._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,m._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,m._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,m.link=D(m.link).replace("label",m._label).replace("href",m._href).replace("title",m._title).getRegex(),m.reflink=D(m.reflink).replace("label",m._label).getRegex(),m.normal=S({},m),m.pedantic=S({},m.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:D(/^!?\[(label)\]\((.*?)\)/).replace("label",m._label).getRegex(),reflink:D(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",m._label).getRegex()}),m.gfm=S({},m.normal,{escape:D(m.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),m.gfm.url=D(m.gfm.url,"i").replace("email",m.gfm._extended_email).getRegex(),m.breaks=S({},m.gfm,{br:D(m.br).replace("{2,}","*").getRegex(),text:D(m.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),l.exports={block:g,inline:m}},778:(l,F,b)=>{var E=b(2479);l.exports=E(D),l.exports.strict=E(S),D.proto=D(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return D(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return S(this)},configurable:!0})});function D(g){var m=function(){return m.called?m.value:(m.called=!0,m.value=g.apply(this,arguments))};return m.called=!1,m}function S(g){var m=function(){if(m.called)throw new Error(m.onceError);return m.called=!0,m.value=g.apply(this,arguments)},f=g.name||"Function wrapped with `once`";return m.onceError=f+" shouldn't be called more than once",m.called=!1,m}},6470:l=>{"use strict";function F(S){if(typeof S!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(S))}function b(S,g){for(var m="",f=0,d=-1,p=0,v,y=0;y<=S.length;++y){if(y<S.length)v=S.charCodeAt(y);else{if(v===47)break;v=47}if(v===47){if(!(d===y-1||p===1))if(d!==y-1&&p===2){if(m.length<2||f!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var P=m.lastIndexOf("/");if(P!==m.length-1){P===-1?(m="",f=0):(m=m.slice(0,P),f=m.length-1-m.lastIndexOf("/")),d=y,p=0;continue}}else if(m.length===2||m.length===1){m="",f=0,d=y,p=0;continue}}g&&(m.length>0?m+="/..":m="..",f=2)}else m.length>0?m+="/"+S.slice(d+1,y):m=S.slice(d+1,y),f=y-d-1;d=y,p=0}else v===46&&p!==-1?++p:p=-1}return m}function E(S,g){var m=g.dir||g.root,f=g.base||(g.name||"")+(g.ext||"");return m?m===g.root?m+f:m+S+f:f}var D={resolve:function(){for(var g="",m=!1,f,d=arguments.length-1;d>=-1&&!m;d--){var p;d>=0?p=arguments[d]:(f===void 0&&(f=process.cwd()),p=f),F(p),p.length!==0&&(g=p+"/"+g,m=p.charCodeAt(0)===47)}return g=b(g,!m),m?g.length>0?"/"+g:"/":g.length>0?g:"."},normalize:function(g){if(F(g),g.length===0)return".";var m=g.charCodeAt(0)===47,f=g.charCodeAt(g.length-1)===47;return g=b(g,!m),g.length===0&&!m&&(g="."),g.length>0&&f&&(g+="/"),m?"/"+g:g},isAbsolute:function(g){return F(g),g.length>0&&g.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var g,m=0;m<arguments.length;++m){var f=arguments[m];F(f),f.length>0&&(g===void 0?g=f:g+="/"+f)}return g===void 0?".":D.normalize(g)},relative:function(g,m){if(F(g),F(m),g===m||(g=D.resolve(g),m=D.resolve(m),g===m))return"";for(var f=1;f<g.length&&g.charCodeAt(f)===47;++f);for(var d=g.length,p=d-f,v=1;v<m.length&&m.charCodeAt(v)===47;++v);for(var y=m.length,P=y-v,Q=p<P?p:P,C=-1,k=0;k<=Q;++k){if(k===Q){if(P>Q){if(m.charCodeAt(v+k)===47)return m.slice(v+k+1);if(k===0)return m.slice(v+k)}else p>Q&&(g.charCodeAt(f+k)===47?C=k:k===0&&(C=0));break}var _=g.charCodeAt(f+k),x=m.charCodeAt(v+k);if(_!==x)break;_===47&&(C=k)}var G="";for(k=f+C+1;k<=d;++k)(k===d||g.charCodeAt(k)===47)&&(G.length===0?G+="..":G+="/..");return G.length>0?G+m.slice(v+C):(v+=C,m.charCodeAt(v)===47&&++v,m.slice(v))},_makeLong:function(g){return g},dirname:function(g){if(F(g),g.length===0)return".";for(var m=g.charCodeAt(0),f=m===47,d=-1,p=!0,v=g.length-1;v>=1;--v)if(m=g.charCodeAt(v),m===47){if(!p){d=v;break}}else p=!1;return d===-1?f?"/":".":f&&d===1?"//":g.slice(0,d)},basename:function(g,m){if(m!==void 0&&typeof m!="string")throw new TypeError('"ext" argument must be a string');F(g);var f=0,d=-1,p=!0,v;if(m!==void 0&&m.length>0&&m.length<=g.length){if(m.length===g.length&&m===g)return"";var y=m.length-1,P=-1;for(v=g.length-1;v>=0;--v){var Q=g.charCodeAt(v);if(Q===47){if(!p){f=v+1;break}}else P===-1&&(p=!1,P=v+1),y>=0&&(Q===m.charCodeAt(y)?--y==-1&&(d=v):(y=-1,d=P))}return f===d?d=P:d===-1&&(d=g.length),g.slice(f,d)}else{for(v=g.length-1;v>=0;--v)if(g.charCodeAt(v)===47){if(!p){f=v+1;break}}else d===-1&&(p=!1,d=v+1);return d===-1?"":g.slice(f,d)}},extname:function(g){F(g);for(var m=-1,f=0,d=-1,p=!0,v=0,y=g.length-1;y>=0;--y){var P=g.charCodeAt(y);if(P===47){if(!p){f=y+1;break}continue}d===-1&&(p=!1,d=y+1),P===46?m===-1?m=y:v!==1&&(v=1):m!==-1&&(v=-1)}return m===-1||d===-1||v===0||v===1&&m===d-1&&m===f+1?"":g.slice(m,d)},format:function(g){if(g===null||typeof g!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof g);return E("/",g)},parse:function(g){F(g);var m={root:"",dir:"",base:"",ext:"",name:""};if(g.length===0)return m;var f=g.charCodeAt(0),d=f===47,p;d?(m.root="/",p=1):p=0;for(var v=-1,y=0,P=-1,Q=!0,C=g.length-1,k=0;C>=p;--C){if(f=g.charCodeAt(C),f===47){if(!Q){y=C+1;break}continue}P===-1&&(Q=!1,P=C+1),f===46?v===-1?v=C:k!==1&&(k=1):v!==-1&&(k=-1)}return v===-1||P===-1||k===0||k===1&&v===P-1&&v===y+1?P!==-1&&(y===0&&d?m.base=m.name=g.slice(1,P):m.base=m.name=g.slice(y,P)):(y===0&&d?(m.name=g.slice(1,v),m.base=g.slice(1,P)):(m.name=g.slice(y,v),m.base=g.slice(y,P)),m.ext=g.slice(v,P)),y>0?m.dir=g.slice(0,y-1):d&&(m.dir="/"),m},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D,l.exports=D},7121:(l,F,b)=>{"use strict";b.d(F,{Z:()=>g});function E(m){var f,d=m.Symbol;return typeof d=="function"?d.observable?f=d.observable:(f=d("observable"),d.observable=f):f="@@observable",f}l=b.hmd(l);var D;typeof self!="undefined"?D=self:typeof window!="undefined"?D=window:typeof b.g!="undefined"?D=b.g:D=l;var S=E(D);const g=S},4802:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var E=b(6363);F.ExperimentationService=E.ExperimentationService},6363:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(4067),D=b(4234),S=b(5975);class g extends S.ExperimentationServiceAutoPolling{constructor(f){super(f.telemetry,f.filterProviders||[],f.refetchInterval!=null?f.refetchInterval:0,f.featuresTelemetryPropertyName,f.assignmentContextTelemetryPropertyName,f.telemetryEventName,f.storageKey,f.keyValueStorage);this.options=f,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new E.TasApiFeatureProvider(new D.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}F.ExperimentationService=g,g.REFRESH_RATE_IN_MINUTES=30},5975:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(3663),D=b(3334);class S extends E.ExperimentationServiceBase{constructor(m,f,d,p,v,y,P,Q){super(m,p,v,y,P,Q);if(this.telemetry=m,this.filterProviders=f,this.refreshRateMs=d,this.featuresTelemetryPropertyName=p,this.assignmentContextTelemetryPropertyName=v,this.telemetryEventName=y,this.storageKey=P,this.storage=Q,d<1e3&&d!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");d>0&&(this.pollingService=new D.PollingService(d),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(m=!1){if(this.pollingService){this.pollingService.StopPolling();let f=await super.getFeaturesAsync(m);return this.pollingService.StartPolling(),f}else return await super.getFeaturesAsync(m)}}F.ExperimentationServiceAutoPolling=S},3663:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(7002);class D{constructor(g,m,f,d,p,v){this.telemetry=g,this.featuresTelemetryPropertyName=m,this.assignmentContextTelemetryPropertyName=f,this.telemetryEventName=d,this.storageKey=p,this.storage=v,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(v=new E.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(g){this._features=g,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(g=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async f=>await f.getFeatures()));let m=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(m,g),this.features}updateFeatures(g,m=!1){let f={features:[],assignmentContext:"",configs:[]};for(let d of g){for(let p of d.features)f.features.includes(p)||f.features.push(p);for(let p of d.configs){const v=f.configs.find(y=>y.Id===p.Id);v?v.Parameters=Object.assign(Object.assign({},v.Parameters),p.Parameters):f.configs.push(p)}f.assignmentContext+=d.assignmentContext}(m||!this.featuresConsumed)&&(this.features=f),this.storage&&this.storage.setValue(this.storageKey,f)}async loadCachedFeatureData(){let g;this.storage&&(g=await this.storage.getValue(this.storageKey),g!==void 0&&g.configs===void 0&&(g.configs=[])),this.features.features.length===0&&(this.features=g||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(g){return this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isCachedFlightEnabled(g){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(g),this.features.features.includes(g)}async isFlightEnabledAsync(g){const m=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(g),m.features.includes(g)}getTreatmentVariable(g,m){var f;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${g}.${m}`),(f=this.features.configs.find(p=>p.Id===g))===null||f===void 0?void 0:f.Parameters[m]}async getTreatmentVariableAsync(g,m){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(g,m)}PostEventToTelemetry(g){this.cachedTelemetryEvents.includes(g)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",g]])),this.cachedTelemetryEvents.push(g))}invokeInit(){this.init()}addFeatureProvider(...g){if(!(g==null||this.featureProviders==null))for(let m of g)this.featureProviders.push(m)}}F.ExperimentationServiceBase=D},69:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class b{constructor(D){this.telemetry=D,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let D=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,D}}F.BaseFeatureProvider=b},4e3:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(69);class D extends E.BaseFeatureProvider{constructor(g,m){super(g);this.telemetry=g,this.filterProviders=m,this.cachedTelemetryEvents=[]}getFilters(){let g=new Map;for(let m of this.filterProviders){let f=m.getFilters();for(let d of f.keys()){let p=f.get(d);g.set(d,p)}}return g}PostEventToTelemetry(g){if(this.cachedTelemetryEvents.includes(g))return;const m=JSON.stringify(g);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",m]])),this.cachedTelemetryEvents.push(g)}}F.FilteredFeatureProvider=D},4067:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(4e3);class D extends E.FilteredFeatureProvider{constructor(g,m,f){super(m,f);this.httpClient=g,this.telemetry=m,this.filterProviders=f}async fetch(){let g=this.getFilters(),m={};for(let y of g.keys()){const P=g.get(y);m[y]=P}let f=await this.httpClient.get({headers:m});g.keys.length>0&&this.PostEventToTelemetry(m);let d=f.data,p=d.Configs,v=[];for(let y of p)if(!!y.Parameters)for(let P of Object.keys(y.Parameters)){const Q=P+(y.Parameters[P]?"":"cf");v.includes(Q)||v.push(Q)}return{features:v,assignmentContext:d.AssignmentContext,configs:p}}}F.TasApiFeatureProvider=D},4234:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(9669);class D{constructor(g){this.endpoint=g}get(g){return E.default.get(this.endpoint,Object.assign(Object.assign({},g),{proxy:!1}))}}F.AxiosHttpClient=D},7002:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class b{constructor(){this.storage=new Map}async getValue(D,S){return this.storage.has(D)?await Promise.resolve(this.storage.get(D)):await Promise.resolve(S||void 0)}setValue(D,S){this.storage.set(D,S)}}F.MemoryKeyValueStorage=b},3334:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class b{constructor(D){this.fetchInterval=D}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(D){this.onTick=D}StartPolling(D=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(D&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}F.PollingService=b},9035:(l,F,b)=>{"use strict";var E;E={value:!0};var D=b(5654);F.X7=D.getExperimentationService,E=D.getExperimentationServiceAsync;var S=b(2560);F.aU=S.TargetPopulation},5708:(l,F)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});class b{constructor(D){this.mementoGlobalStorage=D}async getValue(D,S){return await this.mementoGlobalStorage.get(D)||S}setValue(D,S){this.mementoGlobalStorage.update(D,S)}}F.MementoKeyValueStorage=b},2560:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(7549);class D{constructor(f,d,p){this.extensionName=f,this.extensionVersion=d,this.targetPopulation=p}static trimVersionSuffix(f){const d=/\-[a-zA-Z0-9]+$/;return f.split(d)[0]}getFilterValue(f){switch(f){case S.ApplicationVersion:return D.trimVersionSuffix(E.version);case S.Build:return E.env.appName;case S.ClientId:return E.env.machineId;case S.ExtensionName:return this.extensionName;case S.ExtensionVersion:return D.trimVersionSuffix(this.extensionVersion);case S.Language:return E.env.language;case S.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let f=new Map,d=Object.values(S);for(let p of d)f.set(p,this.getFilterValue(p));return f}}F.VSCodeFilterProvider=D;var S;(function(m){m.Market="X-MSEdge-Market",m.CorpNet="X-FD-Corpnet",m.ApplicationVersion="X-VSCode-AppVersion",m.Build="X-VSCode-Build",m.ClientId="X-MSEdge-ClientId",m.ExtensionName="X-VSCode-ExtensionName",m.ExtensionVersion="X-VSCode-ExtensionVersion",m.Language="X-VSCode-Language",m.TargetPopulation="X-VSCode-TargetPopulation"})(S=F.Filters||(F.Filters={}));var g;(function(m){m.Team="team",m.Internal="internal",m.Insiders="insider",m.Public="public"})(g=F.TargetPopulation||(F.TargetPopulation={}))},5654:(l,F,b)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});const E=b(2560),D=b(4802),S=b(5708),g="https://default.exp-tas.com/vscode/ab",m="query-expfeature",f="VSCode.ABExp.Features",d="abexp.assignmentcontext",p="VSCode.ABExp.FeatureData",v=1e3*60*30;function y(Q,C,k,_,x,...G){if(!x)throw new Error("Memento storage was not provided.");const j=[new E.VSCodeFilterProvider(Q,C,k),...G],X=new S.MementoKeyValueStorage(x);return new D.ExperimentationService({filterProviders:j,telemetry:_,storageKey:p,keyValueStorage:X,featuresTelemetryPropertyName:f,assignmentContextTelemetryPropertyName:d,telemetryEventName:m,endpoint:g,refetchInterval:v})}F.getExperimentationService=y;async function P(Q,C,k,_,x,...G){const W=y(Q,C,k,_,x,...G);return await W.initializePromise,W}F.getExperimentationServiceAsync=P},2479:l=>{l.exports=F;function F(b,E){if(b&&E)return F(b)(E);if(typeof b!="function")throw new TypeError("need wrapper function");return Object.keys(b).forEach(function(S){D[S]=b[S]}),D;function D(){for(var S=new Array(arguments.length),g=0;g<S.length;g++)S[g]=arguments[g];var m=b.apply(this,S),f=S[S.length-1];return typeof m=="function"&&m!==f&&Object.keys(f).forEach(function(d){m[d]=f[d]}),m}}},9602:l=>{"use strict";l.exports=function(F){F.prototype[Symbol.iterator]=function*(){for(let b=this.head;b;b=b.next)yield b.value}}},4411:(l,F,b)=>{"use strict";l.exports=E,E.Node=m,E.create=E;function E(f){var d=this;if(d instanceof E||(d=new E),d.tail=null,d.head=null,d.length=0,f&&typeof f.forEach=="function")f.forEach(function(y){d.push(y)});else if(arguments.length>0)for(var p=0,v=arguments.length;p<v;p++)d.push(arguments[p]);return d}E.prototype.removeNode=function(f){if(f.list!==this)throw new Error("removing node which does not belong to this list");var d=f.next,p=f.prev;return d&&(d.prev=p),p&&(p.next=d),f===this.head&&(this.head=d),f===this.tail&&(this.tail=p),f.list.length--,f.next=null,f.prev=null,f.list=null,d},E.prototype.unshiftNode=function(f){if(f!==this.head){f.list&&f.list.removeNode(f);var d=this.head;f.list=this,f.next=d,d&&(d.prev=f),this.head=f,this.tail||(this.tail=f),this.length++}},E.prototype.pushNode=function(f){if(f!==this.tail){f.list&&f.list.removeNode(f);var d=this.tail;f.list=this,f.prev=d,d&&(d.next=f),this.tail=f,this.head||(this.head=f),this.length++}},E.prototype.push=function(){for(var f=0,d=arguments.length;f<d;f++)S(this,arguments[f]);return this.length},E.prototype.unshift=function(){for(var f=0,d=arguments.length;f<d;f++)g(this,arguments[f]);return this.length},E.prototype.pop=function(){if(!!this.tail){var f=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,f}},E.prototype.shift=function(){if(!!this.head){var f=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,f}},E.prototype.forEach=function(f,d){d=d||this;for(var p=this.head,v=0;p!==null;v++)f.call(d,p.value,v,this),p=p.next},E.prototype.forEachReverse=function(f,d){d=d||this;for(var p=this.tail,v=this.length-1;p!==null;v--)f.call(d,p.value,v,this),p=p.prev},E.prototype.get=function(f){for(var d=0,p=this.head;p!==null&&d<f;d++)p=p.next;if(d===f&&p!==null)return p.value},E.prototype.getReverse=function(f){for(var d=0,p=this.tail;p!==null&&d<f;d++)p=p.prev;if(d===f&&p!==null)return p.value},E.prototype.map=function(f,d){d=d||this;for(var p=new E,v=this.head;v!==null;)p.push(f.call(d,v.value,this)),v=v.next;return p},E.prototype.mapReverse=function(f,d){d=d||this;for(var p=new E,v=this.tail;v!==null;)p.push(f.call(d,v.value,this)),v=v.prev;return p},E.prototype.reduce=function(f,d){var p,v=this.head;if(arguments.length>1)p=d;else if(this.head)v=this.head.next,p=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=0;v!==null;y++)p=f(p,v.value,y),v=v.next;return p},E.prototype.reduceReverse=function(f,d){var p,v=this.tail;if(arguments.length>1)p=d;else if(this.tail)v=this.tail.prev,p=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var y=this.length-1;v!==null;y--)p=f(p,v.value,y),v=v.prev;return p},E.prototype.toArray=function(){for(var f=new Array(this.length),d=0,p=this.head;p!==null;d++)f[d]=p.value,p=p.next;return f},E.prototype.toArrayReverse=function(){for(var f=new Array(this.length),d=0,p=this.tail;p!==null;d++)f[d]=p.value,p=p.prev;return f},E.prototype.slice=function(f,d){d=d||this.length,d<0&&(d+=this.length),f=f||0,f<0&&(f+=this.length);var p=new E;if(d<f||d<0)return p;f<0&&(f=0),d>this.length&&(d=this.length);for(var v=0,y=this.head;y!==null&&v<f;v++)y=y.next;for(;y!==null&&v<d;v++,y=y.next)p.push(y.value);return p},E.prototype.sliceReverse=function(f,d){d=d||this.length,d<0&&(d+=this.length),f=f||0,f<0&&(f+=this.length);var p=new E;if(d<f||d<0)return p;f<0&&(f=0),d>this.length&&(d=this.length);for(var v=this.length,y=this.tail;y!==null&&v>d;v--)y=y.prev;for(;y!==null&&v>f;v--,y=y.prev)p.push(y.value);return p},E.prototype.splice=function(f,d,...p){f>this.length&&(f=this.length-1),f<0&&(f=this.length+f);for(var v=0,y=this.head;y!==null&&v<f;v++)y=y.next;for(var P=[],v=0;y&&v<d;v++)P.push(y.value),y=this.removeNode(y);y===null&&(y=this.tail),y!==this.head&&y!==this.tail&&(y=y.prev);for(var v=0;v<p.length;v++)y=D(this,y,p[v]);return P},E.prototype.reverse=function(){for(var f=this.head,d=this.tail,p=f;p!==null;p=p.prev){var v=p.prev;p.prev=p.next,p.next=v}return this.head=d,this.tail=f,this};function D(f,d,p){var v=d===f.head?new m(p,null,d,f):new m(p,d,d.next,f);return v.next===null&&(f.tail=v),v.prev===null&&(f.head=v),f.length++,v}function S(f,d){f.tail=new m(d,f.tail,null,f),f.head||(f.head=f.tail),f.length++}function g(f,d){f.head=new m(d,null,f.head,f),f.tail||(f.tail=f.head),f.length++}function m(f,d,p,v){if(!(this instanceof m))return new m(f,d,p,v);this.list=v,this.value=f,d?(d.next=this,this.prev=d):this.prev=null,p?(p.prev=this,this.next=p):this.next=null}try{b(9602)(E)}catch(f){}},9329:(l,F,b)=>{l.exports=b(516).Observable},516:(l,F)=>{"use strict";var b;b={value:!0},F.Observable=void 0;function E(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function D(O,I){for(var T=0;T<I.length;T++){var L=I[T];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(O,L.key,L)}}function S(O,I,T){return I&&D(O.prototype,I),T&&D(O,T),O}var g=function(){return typeof Symbol=="function"},m=function(O){return g()&&Boolean(Symbol[O])},f=function(O){return m(O)?Symbol[O]:"@@"+O};g()&&!m("observable")&&(Symbol.observable=Symbol("observable"));var d=f("iterator"),p=f("observable"),v=f("species");function y(O,I){var T=O[I];if(T!=null){if(typeof T!="function")throw new TypeError(T+" is not a function");return T}}function P(O){var I=O.constructor;return I!==void 0&&(I=I[v],I===null&&(I=void 0)),I!==void 0?I:H}function Q(O){return O instanceof H}function C(O){C.log?C.log(O):setTimeout(function(){throw O})}function k(O){Promise.resolve().then(function(){try{O()}catch(I){C(I)}})}function _(O){var I=O._cleanup;if(I!==void 0&&(O._cleanup=void 0,!!I))try{if(typeof I=="function")I();else{var T=y(I,"unsubscribe");T&&T.call(I)}}catch(L){C(L)}}function x(O){O._observer=void 0,O._queue=void 0,O._state="closed"}function G(O){var I=O._queue;if(!!I){O._queue=void 0,O._state="ready";for(var T=0;T<I.length&&(W(O,I[T].type,I[T].value),O._state!=="closed");++T);}}function W(O,I,T){O._state="running";var L=O._observer;try{var N=y(L,I);switch(I){case"next":N&&N.call(L,T);break;case"error":if(x(O),N)N.call(L,T);else throw T;break;case"complete":x(O),N&&N.call(L);break}}catch(M){C(M)}O._state==="closed"?_(O):O._state==="running"&&(O._state="ready")}function j(O,I,T){if(O._state!=="closed"){if(O._state==="buffering"){O._queue.push({type:I,value:T});return}if(O._state!=="ready"){O._state="buffering",O._queue=[{type:I,value:T}],k(function(){return G(O)});return}W(O,I,T)}}var X=function(){function O(I,T){E(this,O),this._cleanup=void 0,this._observer=I,this._queue=void 0,this._state="initializing";var L=new A(this);try{this._cleanup=T.call(void 0,L)}catch(N){L.error(N)}this._state==="initializing"&&(this._state="ready")}return S(O,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(x(this),_(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),O}(),A=function(){function O(I){E(this,O),this._subscription=I}return S(O,[{key:"next",value:function(T){j(this._subscription,"next",T)}},{key:"error",value:function(T){j(this._subscription,"error",T)}},{key:"complete",value:function(){j(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),O}(),H=function(){function O(I){if(E(this,O),!(this instanceof O))throw new TypeError("Observable cannot be called as a function");if(typeof I!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=I}return S(O,[{key:"subscribe",value:function(T){return(typeof T!="object"||T===null)&&(T={next:T,error:arguments[1],complete:arguments[2]}),new X(T,this._subscriber)}},{key:"forEach",value:function(T){var L=this;return new Promise(function(N,M){if(typeof T!="function"){M(new TypeError(T+" is not a function"));return}function B(){J.unsubscribe(),N()}var J=L.subscribe({next:function(ie){try{T(ie,B)}catch(te){M(te),J.unsubscribe()}},error:M,complete:N})})}},{key:"map",value:function(T){var L=this;if(typeof T!="function")throw new TypeError(T+" is not a function");var N=P(this);return new N(function(M){return L.subscribe({next:function(B){try{B=T(B)}catch(J){return M.error(J)}M.next(B)},error:function(B){M.error(B)},complete:function(){M.complete()}})})}},{key:"filter",value:function(T){var L=this;if(typeof T!="function")throw new TypeError(T+" is not a function");var N=P(this);return new N(function(M){return L.subscribe({next:function(B){try{if(!T(B))return}catch(J){return M.error(J)}M.next(B)},error:function(B){M.error(B)},complete:function(){M.complete()}})})}},{key:"reduce",value:function(T){var L=this;if(typeof T!="function")throw new TypeError(T+" is not a function");var N=P(this),M=arguments.length>1,B=!1,J=arguments[1],ie=J;return new N(function(te){return L.subscribe({next:function(se){var ue=!B;if(B=!0,!ue||M)try{ie=T(ie,se)}catch(pe){return te.error(pe)}else ie=se},error:function(se){te.error(se)},complete:function(){if(!B&&!M)return te.error(new TypeError("Cannot reduce an empty sequence"));te.next(ie),te.complete()}})})}},{key:"concat",value:function(){for(var T=this,L=arguments.length,N=new Array(L),M=0;M<L;M++)N[M]=arguments[M];var B=P(this);return new B(function(J){var ie,te=0;function se(ue){ie=ue.subscribe({next:function(pe){J.next(pe)},error:function(pe){J.error(pe)},complete:function(){te===N.length?(ie=void 0,J.complete()):se(B.from(N[te++]))}})}return se(T),function(){ie&&(ie.unsubscribe(),ie=void 0)}})}},{key:"flatMap",value:function(T){var L=this;if(typeof T!="function")throw new TypeError(T+" is not a function");var N=P(this);return new N(function(M){var B=[],J=L.subscribe({next:function(te){if(T)try{te=T(te)}catch(ue){return M.error(ue)}var se=N.from(te).subscribe({next:function(ue){M.next(ue)},error:function(ue){M.error(ue)},complete:function(){var ue=B.indexOf(se);ue>=0&&B.splice(ue,1),ie()}});B.push(se)},error:function(te){M.error(te)},complete:function(){ie()}});function ie(){J.closed&&B.length===0&&M.complete()}return function(){B.forEach(function(te){return te.unsubscribe()}),J.unsubscribe()}})}},{key:p,value:function(){return this}}],[{key:"from",value:function(T){var L=typeof this=="function"?this:O;if(T==null)throw new TypeError(T+" is not an object");var N=y(T,p);if(N){var M=N.call(T);if(Object(M)!==M)throw new TypeError(M+" is not an object");return Q(M)&&M.constructor===L?M:new L(function(B){return M.subscribe(B)})}if(m("iterator")&&(N=y(T,d),N))return new L(function(B){k(function(){if(!B.closed){var J=!0,ie=!1,te=void 0;try{for(var se=N.call(T)[Symbol.iterator](),ue;!(J=(ue=se.next()).done);J=!0){var pe=ue.value;if(B.next(pe),B.closed)return}}catch(dt){ie=!0,te=dt}finally{try{!J&&se.return!=null&&se.return()}finally{if(ie)throw te}}B.complete()}})});if(Array.isArray(T))return new L(function(B){k(function(){if(!B.closed){for(var J=0;J<T.length;++J)if(B.next(T[J]),B.closed)return;B.complete()}})});throw new TypeError(T+" is not observable")}},{key:"of",value:function(){for(var T=arguments.length,L=new Array(T),N=0;N<T;N++)L[N]=arguments[N];var M=typeof this=="function"?this:O;return new M(function(B){k(function(){if(!B.closed){for(var J=0;J<L.length;++J)if(B.next(L[J]),B.closed)return;B.complete()}})})}},{key:v,get:function(){return this}}]),O}();F.Observable=H,g()&&Object.defineProperty(H,Symbol("extensions"),{value:{symbol:p,hostReportError:C},configurable:!0})},3730:(l,F)=>{"use strict";var b;b={value:!0};let E=function(){function D(S,g,m){}return D.prototype.updateUserOptIn=function(S){},D.prototype.createAppInsightsClient=function(S){},D.prototype.getCommonProperties=function(){},D.prototype.sendTelemetryEvent=function(S,g,m){},D.prototype.dispose=function(){},D.TELEMETRY_CONFIG_ID="telemetry",D.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",D}();F.Z=E},7549:l=>{"use strict";l.exports=require("vscode")},1336:()=>{}},Kn={};function oe(l){var F=Kn[l];if(F!==void 0)return F.exports;var b=Kn[l]={id:l,loaded:!1,exports:{}};return ml[l].call(b.exports,b,b.exports,oe),b.loaded=!0,b.exports}(()=>{oe.n=l=>{var F=l&&l.__esModule?()=>l.default:()=>l;return oe.d(F,{a:F}),F}})(),(()=>{oe.d=(l,F)=>{for(var b in F)oe.o(F,b)&&!oe.o(l,b)&&Object.defineProperty(l,b,{enumerable:!0,get:F[b]})}})(),(()=>{oe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(l){if(typeof window=="object")return window}}()})(),(()=>{oe.hmd=l=>(l=Object.create(l),l.children||(l.children=[]),Object.defineProperty(l,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+l.id)}}),l)})(),(()=>{oe.o=(l,F)=>Object.prototype.hasOwnProperty.call(l,F)})(),(()=>{oe.r=l=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})}})();var Ei={};(()=>{"use strict";oe.r(Ei),oe.d(Ei,{activate:()=>Dp,deactivate:()=>Ip});var l=oe(7549),F=oe(3730),b=oe(6470),E=oe(7484),D=oe.n(E),S=oe(4110),g=oe.n(S),m=oe(660),f=oe.n(m),d=Object.defineProperty,p=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?d(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);D().extend(g(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),D().extend(f()),D().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function v(t,e){const r=Object.create(null);return t.filter(i=>{const n=e(i);return r[n]?!1:(r[n]=!0,!0)})}function y(t){return t.forEach(e=>e.dispose()),[]}function P(t){return{dispose:t}}function Q(t){return P(()=>y(t))}function C(...t){return(e,r=null,i)=>{const n=Q(t.map(s=>s(a=>e.call(r,a))));return i&&i.push(n),n}}function k(t,e){return(r,i=null,n)=>t(s=>e(s)&&r.call(i,s),null,n)}function _(t){return(e,r=null,i)=>{const n=t(s=>(n.dispose(),e.call(r,s)),null,i);return n}}function x(t){return/^[a-zA-Z]:\\/.test(t)}function G(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),x(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function W(t,e){return t.reduce((r,i)=>{const n=e(i);return r[n]=[...r[n]||[],i],r},Object.create(null))}function j(t){return!!t.errors}function X(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function A(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&X(t))r=t.errors.map(i=>`Value "${i.value}" cannot be set for field ${i.field} (code: ${i.code})`).join(", ");else if(j(t)&&t.errors)return t.errors.map(i=>typeof i=="string"?i:i.message).join(", ");return r&&(e=`${e}: ${r}`),e}const H=(t,e)=>e(t);async function O(t,e=H){let r;return new Promise((i,n)=>r=t(s=>{try{Promise.resolve(e(s,i,n)).catch(n)}catch(a){n(a)}})).then(i=>(r.dispose(),i),i=>{throw r.dispose(),i})}function I(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var T;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(T||(T={}));function L(t,e){return t<e?-1:t>e?1:0}function N(t,e,r=0,i=t.length,n=0,s=e.length){for(;r<i&&n<s;r++,n++){const u=t.charCodeAt(r),c=e.charCodeAt(n);if(u<c)return-1;if(u>c)return 1}const a=i-r,o=s-n;return a<o?-1:a>o?1:0}function M(t,e){return B(t,e,0,t.length,0,e.length)}function B(t,e,r=0,i=t.length,n=0,s=e.length){for(;r<i&&n<s;r++,n++){let u=t.charCodeAt(r),c=e.charCodeAt(n);if(u===c)continue;const h=u-c;if(!(h===32&&ie(c))&&!(h===-32&&ie(u)))return J(u)&&J(c)?h:N(t.toLowerCase(),e.toLowerCase(),r,i,n,s)}const a=i-r,o=s-n;return a<o?-1:a>o?1:0}function J(t){return t>=97&&t<=122}function ie(t){return t>=65&&t<=90}class te{constructor(){p(this,"_value",""),p(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return r-i}value(){return this._value[this._pos]}}class se{constructor(e=!0){this._caseSensitive=e,p(this,"_value"),p(this,"_from"),p(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?N(e,this._value,0,e.length,this._from,this._to):B(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class ue{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,p(this,"_value"),p(this,"_from"),p(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?N(e,this._value,0,e.length,this._from,this._to):B(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var pe;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(pe||(pe={}));class dt{constructor(e){this._ignorePathCasing=e,p(this,"_pathIterator"),p(this,"_value"),p(this,"_states",[]),p(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new ue(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return M(e,this._value.scheme);if(this._states[this._stateIdx]===2)return M(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return L(e,this._value.query);if(this._states[this._stateIdx]===5)return L(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class ze{constructor(){p(this,"segment"),p(this,"value"),p(this,"key"),p(this,"left"),p(this,"mid"),p(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class ye{constructor(e){p(this,"_iter"),p(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new ye(new dt(e))}static forPaths(){return new ye(new ue)}static forStrings(){return new ye(new te)}static forConfigKeys(){return new ye(new se)}clear(){this._root=void 0}set(e,r){const i=this._iter.reset(e);let n;for(this._root||(this._root=new ze,this._root.segment=i.value()),n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new ze,n.left.segment=i.value()),n=n.left;else if(a<0)n.right||(n.right=new ze,n.right.segment=i.value()),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new ze,n.mid.segment=i.value()),n=n.mid;else break}const s=n.value;return n.value=r,n.key=e,s}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let i=this._root;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else break}return i}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const i=this._iter.reset(e),n=[];let s=this._root;for(;s;){const a=i.cmp(s.segment);if(a>0)n.push([1,s]),s=s.left;else if(a<0)n.push([-1,s]),s=s.right;else if(i.hasNext())i.next(),n.push([0,s]),s=s.mid;else{for(r?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;n.length>0&&s.isEmpty();){let[o,u]=n.pop();switch(o){case 1:u.left=void 0;break;case 0:u.mid=void 0;break;case-1:u.right=void 0;break}s=u}break}}}findSubstr(e){const r=this._iter.reset(e);let i=this._root,n;for(;i;){const s=r.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(r.hasNext())r.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){const r=this._iter.reset(e);let i=this._root;for(;i;){const n=r.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(r.hasNext())r.next(),i=i.mid;else return i.mid?this._entries(i.mid):void 0}}forEach(e){for(const[r,i]of this)e(i,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var it=Object.defineProperty,Le=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),mt;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(mt||(mt={}));var Et;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(Et||(Et={}));const Yn=class{constructor(){Le(this,"_providers",new Map),Le(this,"_onDidOpenRepository",new l.EventEmitter),Le(this,"onDidOpenRepository",this._onDidOpenRepository.event),Le(this,"_onDidCloseRepository",new l.EventEmitter),Le(this,"onDidCloseRepository",this._onDidCloseRepository.event),Le(this,"_onDidChangeState",new l.EventEmitter),Le(this,"onDidChangeState",this._onDidChangeState.event),Le(this,"_onDidPublish",new l.EventEmitter),Le(this,"onDidPublish",this._onDidPublish.event),Le(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}registerGitProvider(t){const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>this._onDidOpenRepository.fire(r))),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(i=>this._onDidCloseRepository.fire(i)),this._providers.delete(e)}}}getGitProvider(t){const e=ye.forUris();return this._providers.forEach(r=>{const i=r.repositories;if(i&&i.length>0)for(const n of i)e.set(n.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return Yn._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let Jn=Yn;Le(Jn,"_handlePool",0);var hl=Object.defineProperty,Ci=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Zn;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(Zn||(Zn={}));const pl="githubPullRequests",fl="logLevel";class gl{constructor(){Ci(this,"_outputChannel"),Ci(this,"_logLevel"),Ci(this,"_disposable"),this._outputChannel=l.window.createOutputChannel("GitHub Pull Request"),this._disposable=l.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const n=`${new Date().getTime()/1e3}s`,s=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${n}] ${s}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(l.workspace.getConfiguration(pl).get(fl)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const $=new gl,Si=new Map;function Xn(t,e){Si.set(t,e)}function es(t){Si.delete(t)}function Yt(t){for(const e of Si.values())if(e.hasCommentThread(t))return e;$.appendLine(`Unable to find handler for comment thread ${t.threadId}`)}function Ke(t){return JSON.parse(t.query)}function we(t){try{return JSON.parse(t.query)}catch(e){}}function vl(t){try{return JSON.parse(t.query)}catch(e){}}const wl=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],ts=l.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function Ti(t,e){try{const{commit:r,baseCommit:i,headCommit:n,isBase:s}=JSON.parse(t.query),a=t.scheme==="review"?r:s?i:n,{size:o,object:u}=await e.getObjectDetails(a,t.fsPath),{mimetype:c}=await e.detectObjectType(u);if(c==="text/plain")return;if(wl.indexOf(c)>-1){const h=await e.buffer(a,t.fsPath);return l.Uri.parse(`data:${c};label:${b.basename(t.fsPath)};description:${a};size:${o};base64,${h.toString("base64")}`)}}catch(r){return}}function Ct(t,e,r,i,n,s,a){const o={path:e||t.path,ref:r,commit:i,base:s.base,isOutdated:n,rootPath:a.path};let u=t.path;return s.replaceFileExtension&&(u=`${u}.git`),t.with({scheme:"review",path:u,query:JSON.stringify(o)})}function rs(t,e,r,i){const n={prNumber:e,fileName:r,status:i};return t.with({query:JSON.stringify(n)})}function is(t){try{return JSON.parse(t.query)}catch(e){}}function Jt(t,e,r,i,n,s,a){const o={baseCommit:r,headCommit:i,isBase:s,fileName:n,prNumber:e.number,status:a,remoteName:e.githubRepository.remote.remoteName},u=t.path;return t.with({scheme:"pr",path:u,query:JSON.stringify(o)})}class bl extends l.EventEmitter{handleUri(e){this.fire(e)}}const yl=new bl,qt="GitHub.vscode-pull-request-github",Pi="git",ns="ghpr",ss="initialize",as="statechange",Ut="github:focusedReview";var ne;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(ne||(ne={}));class os{constructor(e,r,i,n,s,a,o,u){this.baseCommit=e,this.status=r,this.fileName=i,this.previousFileName=n,this.patch=s,this.diffHunks=a,this.isPartial=o,this.blobUrl=u}}class ls{constructor(e,r,i,n,s){this.baseCommit=e,this.blobUrl=r,this.status=i,this.fileName=n,this.previousFileName=s}}var kl=Object.defineProperty,_l=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),_e;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(_e||(_e={}));class us{constructor(e,r,i,n,s,a=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=i,this.positionInHunk=n,this._raw=s,this.endwithLineBreak=a}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function Rl(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class El{constructor(e,r,i,n,s){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=i,this.newLength=n,this.positionInHunk=s,_l(this,"diffLines",[])}}const cs=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function Cl(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*Sl(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let n=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&n--,e++),yield t.substr(r,n)}}function*Zt(t){const e=Sl(t);let r=e.next(),i,n=-1,s=-1,a=-1;for(;!r.done;){const o=r.value;if(cs.test(o)){i&&(yield i,i=void 0),n===-1&&(n=0);const u=cs.exec(o),c=s=Number(u[1]),h=Number(u[3])||1,w=a=Number(u[5]),R=Number(u[7])||1;i=new El(c,h,w,R,n),i.diffLines.push(new us(3,-1,-1,n,o))}else if(i){const u=Rl(o);if(u===3)i.diffLines&&i.diffLines.length&&(i.diffLines[i.diffLines.length-1].endwithLineBreak=!1);else{i.diffLines.push(new us(u,u!==1?s:-1,u!==2?a:-1,n,o));const c=1+Cl(o);switch(u){case 0:s+=c,a+=c;break;case 2:s+=c;break;case 1:a+=c;break}}}n!==-1&&++n,r=e.next()}i&&(yield i)}function Ni(t){const e=Zt(t);let r=e.next();const i=[],n=[];for(;!r.done;){const s=r.value;i.push(s);for(let a=0;a<s.diffLines.length;a++){const o=s.diffLines[a];if(!(o.type===2||o.type===3))if(o.type===1)n.push(o.text);else{const u=o.text;n.push(u)}}r=e.next()}return i}function Tl(t,e){const r=t.split(/\r?\n/),i=Zt(e);let n=i.next();const s=[],a=[];let o=0;for(;!n.done;){const u=n.value;s.push(u);const c=u.oldLineNumber;for(let h=o+1;h<c;h++)a.push(r[h-1]);o=c+u.oldLength-1;for(let h=0;h<u.diffLines.length;h++){const w=u.diffLines[h];if(!(w.type===2||w.type===3))if(w.type===1)a.push(w.text);else{const R=w.text;a.push(R)}}n=i.next()}if(o<r.length)for(let u=o+1;u<=r.length;u++)a.push(r[u-1]);return a.join(`
`)}function Di(t){switch(t){case"removed":return ne.DELETE;case"added":return ne.ADD;case"renamed":return ne.RENAME;case"modified":return ne.MODIFY;default:return ne.UNKNOWN}}async function Fi(t,e,r){const i=[];for(let n=0;n<t.length;n++){const s=t[n],a=Di(s.status);if(!s.patch){i.push(new ls(r,s.blob_url,a,s.filename,s.previous_filename));continue}let o=!1;switch(a){case ne.DELETE:case ne.MODIFY:try{await e.getObjectDetails(r,s.filename),o=!0}catch(h){}break;case ne.RENAME:try{await e.getObjectDetails(r,s.previous_filename),o=!0}catch(h){}break}const u=Ni(s.patch),c=!o&&a!==ne.ADD;i.push(new os(r,a,s.filename,s.previous_filename,s.patch,u,c,s.blob_url))}return i}const Pl=t=>{};var Nl=Object.defineProperty,kr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),ds;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(ds||(ds={}));class St{constructor(e){if(kr(this,"type",4),kr(this,"host",""),kr(this,"owner",""),kr(this,"repositoryName",""),kr(this,"url"),!this.parseSshProtocol(e))try{this.url=l.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){$.appendLine(`Failed to parse '${e}'`),l.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=Pl(e);if(!r)return!1;const{Hostname:i,HostName:n,path:s}=r;return this.host=n||i,this.owner=this.getOwnerName(s)||"",this.repositoryName=this.getRepositoryName(s)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const i=r.lastIndexOf("/"),n=r.substr(i+1);if(!(n===""||n==="/"))return n.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const i=r.split("/");if(i.length>1)return i[i.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return l.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const i=e.normalizeUri();return i?r.toString().toLocaleLowerCase()===i.toString().toLocaleLowerCase():!1}}var Dl=Object.defineProperty,Fl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ms{constructor(e,r,i,n){this.ref=e,this.label=r,this.sha=i,Fl(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new St(n)}}var Se;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(Se||(Se={}));function Ii(t){return t.event===4}function Il(t){return t.event===0}function Al(t){return t.event===3}function Mp(t){return t.event===9}function xp(t){return t.event===7}function Op(t){return t.event===8}function Ml(t){return!!t.conclusion}var Ne;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(Ne||(Ne={}));var ht;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(ht||(ht={}));var Re;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(Re||(Re={}));var Tt;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})(Tt||(Tt={}));var xl=Object.defineProperty,Ol=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const hs=class{static initialize(t){hs.icons={reactions:{THUMBS_UP:t.asAbsolutePath(b.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(b.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(b.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(b.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(b.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(b.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(b.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(b.join("resources","icons","reactions","rocket.png"))}}}};let nt=hs;Ol(nt,"icons");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ai=function(t,e){return Ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ai(t,e)};function pt(t,e){Ai(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Y=function(){return Y=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Y.apply(this,arguments)};function ps(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function qp(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Up(t,e){return function(r,i){e(r,i,t)}}function Lp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Pt(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{c(i.next(h))}catch(w){a(w)}}function u(h){try{c(i.throw(h))}catch(w){a(w)}}function c(h){h.done?s(h.value):n(h.value).then(o,u)}c((i=i.apply(t,e||[])).next())})}function Nt(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return u([c,h])}}function u(c){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=c[0]&2?n.return:c[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,c[1])).done)return s;switch(n=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,n=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(h){c=[6,h],n=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function $p(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Gp(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function fs(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ql(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(o){a={error:o}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Hp(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ql(arguments[e]));return t}function Mi(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)i[n]=s[a];return i}function jr(t){return this instanceof jr?(this.v=t,this):new jr(t)}function Vp(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(R){i[R]&&(n[R]=function(q){return new Promise(function(V,U){s.push([R,q,V,U])>1||o(R,q)})})}function o(R,q){try{u(i[R](q))}catch(V){w(s[0][3],V)}}function u(R){R.value instanceof jr?Promise.resolve(R.value.v).then(c,h):w(s[0][2],R)}function c(R){o("next",R)}function h(R){o("throw",R)}function w(R,q){R(q),s.shift(),s.length&&o(s[0][0],s[0][1])}}function Bp(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:jr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function jp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof fs=="function"?fs(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(o,u){a=t[s](a),n(o,u,a.done,a.value)})}}function n(s,a,o,u){Promise.resolve(u).then(function(c){s({value:c,done:o})},a)}}function Qp(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Wp(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function zp(t){return t&&t.__esModule?t:{default:t}}function Kp(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Yp(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var ft=oe(285),xi="Invariant Violation",gs=Object.setPrototypeOf,Ul=gs===void 0?function(t,e){return t.__proto__=e,t}:gs,De=function(t){pt(e,t);function e(r){r===void 0&&(r=xi);var i=t.call(this,typeof r=="number"?xi+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return i.framesToPop=1,i.name=xi,Ul(i,e.prototype),i}return e}(Error);function ce(t,e){if(!t)throw new De(e)}function vs(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=vs("warn"),t.error=vs("error")})(ce||(ce={}));var ws={env:{}};if(typeof process=="object")ws=process;else try{Function("stub","process = stub")(ws)}catch(t){}var Jp=null;const Zp=null;var Ll=oe(5035),$l=oe.n(Ll),bs=Object.prototype,ys=bs.toString,Gl=bs.hasOwnProperty,Oi=new Map;function Ye(t,e){try{return qi(t,e)}finally{Oi.clear()}}function qi(t,e){if(t===e)return!0;var r=ys.call(t),i=ys.call(e);if(r!==i)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(ks(t,e))return!0;var n=Object.keys(t),s=Object.keys(e),a=n.length;if(a!==s.length)return!1;for(var o=0;o<a;++o)if(!Gl.call(e,n[o]))return!1;for(var o=0;o<a;++o){var u=n[o];if(!qi(t[u],e[u]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(ks(t,e))return!0;for(var c=t.entries(),h=r==="[object Map]";;){var w=c.next();if(w.done)break;var R=w.value,q=R[0],V=R[1];if(!e.has(q)||h&&!qi(V,e.get(q)))return!1}return!0}}return!1}function ks(t,e){var r=Oi.get(t);if(r){if(r.has(e))return!0}else Oi.set(t,r=new Set);return r.add(e),!1}const Xp=null;function ef(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function tf(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function Hl(t){return t.kind==="StringValue"}function Vl(t){return t.kind==="BooleanValue"}function Bl(t){return t.kind==="IntValue"}function jl(t){return t.kind==="FloatValue"}function Ql(t){return t.kind==="Variable"}function Wl(t){return t.kind==="ObjectValue"}function zl(t){return t.kind==="ListValue"}function Kl(t){return t.kind==="EnumValue"}function Yl(t){return t.kind==="NullValue"}function Xt(t,e,r,i){if(Bl(r)||jl(r))t[e.value]=Number(r.value);else if(Vl(r)||Hl(r))t[e.value]=r.value;else if(Wl(r)){var n={};r.fields.map(function(a){return Xt(n,a.name,a.value,i)}),t[e.value]=n}else if(Ql(r)){var s=(i||{})[r.name.value];t[e.value]=s}else if(zl(r))t[e.value]=r.values.map(function(a){var o={};return Xt(o,e,a,i),o[e.value]});else if(Kl(r))t[e.value]=r.value;else if(Yl(r))t[e.value]=null;else throw new De(17)}function Jl(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(n){r[n.name.value]={},n.arguments&&n.arguments.forEach(function(s){var a=s.name,o=s.value;return Xt(r[n.name.value],a,o,e)})}));var i=null;return t.arguments&&t.arguments.length&&(i={},t.arguments.forEach(function(n){var s=n.name,a=n.value;return Xt(i,s,a,e)})),_s(t.name.value,i,r)}var Zl=["connection","include","skip","client","rest","export"];function _s(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var i=r.connection.filter?r.connection.filter:[];i.sort();var n=e,s={};return i.forEach(function(u){s[u]=n[u]}),r.connection.key+"("+JSON.stringify(s)+")"}else return r.connection.key;var a=t;if(e){var o=$l()(e);a+="("+o+")"}return r&&Object.keys(r).forEach(function(u){Zl.indexOf(u)===-1&&(r[u]&&Object.keys(r[u]).length?a+="@"+u+"("+JSON.stringify(r[u])+")":a+="@"+u)}),a}function Ui(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(i){var n=i.name,s=i.value;return Xt(r,n,s,e)}),r}return null}function _r(t){return t.alias?t.alias.value:t.name.value}function Dt(t){return t.kind==="Field"}function Qr(t){return t.kind==="InlineFragment"}function Wr(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function zr(t,e){return e===void 0&&(e=!1),Y({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Xl(t){return t!=null&&typeof t=="object"&&t.type==="json"}function eu(t){throw new InvariantError(18)}function Rs(t,e){switch(e===void 0&&(e=eu),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(a){return Rs(a,e)});case"ObjectValue":{for(var r={},i=0,n=t.fields;i<n.length;i++){var s=n[i];r[s.name.value]=Rs(s.value,e)}return r}default:return t.value}}function tu(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(i){r[i.name.value]=Ui(i,e)}),r}return null}function Li(t,e){return e===void 0&&(e={}),su(t.directives).every(function(r){var i=r.directive,n=r.ifArgument,s=!1;return n.value.kind==="Variable"?(s=e[n.value.name.value],ce(s!==void 0,13)):s=n.value.value,i.name.value==="skip"?!s:s})}function ru(t){var e=[];return(0,ft.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function Kr(t,e){return ru(e).some(function(r){return t.indexOf(r)>-1})}function iu(t){return t&&Kr(["client"],t)&&Kr(["export"],t)}function nu(t){var e=t.name.value;return e==="skip"||e==="include"}function su(t){return t?t.filter(nu).map(function(e){var r=e.arguments,i=e.name.value;ce(r&&r.length===1,14);var n=r[0];ce(n.name&&n.name.value==="if",15);var s=n.value;return ce(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),16),{directive:e,ifArgument:n}}):[]}function Es(t,e){var r=e,i=[];t.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw new De(11);s.kind==="FragmentDefinition"&&i.push(s)}),typeof r=="undefined"&&(ce(i.length===1,12),r=i[0].name.value);var n=Y(Y({},t),{definitions:Mi([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return n}function $i(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(i){typeof i=="undefined"||i===null||Object.keys(i).forEach(function(n){t[n]=i[n]})}),t}function rf(t){Lt(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function Lt(t){ce(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new De(3);return r});return ce(e.length<=1,4),t}function er(t){return Lt(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function nf(t){var e=er(t);return invariant(e,5),e}function Gi(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Yr(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function au(t){var e=er(t);return ce(e&&e.operation==="query",6),e}function ou(t){ce(t.kind==="Document",7),ce(t.definitions.length<=1,8);var e=t.definitions[0];return ce(e.kind==="FragmentDefinition",9),e}function Hi(t){Lt(t);for(var e,r=0,i=t.definitions;r<i.length;r++){var n=i[r];if(n.kind==="OperationDefinition"){var s=n.operation;if(s==="query"||s==="mutation"||s==="subscription")return n}n.kind==="FragmentDefinition"&&!e&&(e=n)}if(e)return e;throw new De(10)}function Jr(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Vi(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var i=r.defaultValue;return i}).map(function(r){var i=r.variable,n=r.defaultValue,s={};return Xt(s,i.name,n),s});return $i.apply(void 0,Mi([{}],e))}return{}}function sf(t){var e=new Set;if(t.variableDefinitions)for(var r=0,i=t.variableDefinitions;r<i.length;r++){var n=i[r];e.add(n.variable.name.value)}return e}function Cs(t,e,r){var i=0;return t.forEach(function(n,s){e.call(this,n,s,t)&&(t[i++]=n)},r),t.length=i,t}var lu={kind:"Field",name:{kind:"Name",value:"__typename"}};function Ss(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&Ss(e[r.name.value],e)})}function Zr(t){return Ss(er(t)||ou(t),Jr(Yr(t)))?null:t}function Bi(t){return function(r){return t.some(function(i){return i.name&&i.name===r.name.value||i.test&&i.test(r)})}}function Ts(t,e){var r=Object.create(null),i=[],n=Object.create(null),s=[],a=Zr((0,ft.visit)(e,{Variable:{enter:function(o,u,c){c.kind!=="VariableDefinition"&&(r[o.name.value]=!0)}},Field:{enter:function(o){if(t&&o.directives){var u=t.some(function(c){return c.remove});if(u&&o.directives&&o.directives.some(Bi(t)))return o.arguments&&o.arguments.forEach(function(c){c.value.kind==="Variable"&&i.push({name:c.value.name.value})}),o.selectionSet&&Ds(o.selectionSet).forEach(function(c){s.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(o){n[o.name.value]=!0}},Directive:{enter:function(o){if(Bi(t)(o))return null}}}));return a&&Cs(i,function(o){return!r[o.name]}).length&&(a=hu(i,a)),a&&Cs(s,function(o){return!n[o.name]}).length&&(a=pu(s,a)),a}function uu(t){return(0,ft.visit)(Lt(t),{SelectionSet:{enter:function(e,r,i){if(!(i&&i.kind==="OperationDefinition")){var n=e.selections;if(!!n){var s=n.some(function(o){return Dt(o)&&(o.name.value==="__typename"||o.name.value.lastIndexOf("__",0)===0)});if(!s){var a=i;if(!(Dt(a)&&a.directives&&a.directives.some(function(o){return o.name.value==="export"})))return Y(Y({},e),{selections:Mi(n,[lu])})}}}}}})}var cu={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function du(t){return Ts([cu],Lt(t))}function Ps(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(i){return Ns(t,i,r)})}function Ns(t,e,r){return r===void 0&&(r=!0),Dt(e)?e.directives?e.directives.some(Bi(t))||r&&Ps(t,e.selectionSet,r):!1:!0}function af(t,e){Lt(e);var r;return Zr(visit(e,{SelectionSet:{enter:function(i,n,s,a){var o=a.join("-");if(!r||o===r||!o.startsWith(r))if(i.selections){var u=i.selections.filter(function(c){return Ns(t,c)});return Ps(t,i,!1)&&(r=o),__assign(__assign({},i),{selections:u})}else return null}}}))}function mu(t){return function(r){return t.some(function(i){return r.value&&r.value.kind==="Variable"&&r.value.name&&(i.name===r.value.name.value||i.test&&i.test(r))})}}function hu(t,e){var r=mu(t);return Zr((0,ft.visit)(e,{OperationDefinition:{enter:function(i){return Y(Y({},i),{variableDefinitions:i.variableDefinitions.filter(function(n){return!t.some(function(s){return s.name===n.variable.name.value})})})}},Field:{enter:function(i){var n=t.some(function(a){return a.remove});if(n){var s=0;if(i.arguments.forEach(function(a){r(a)&&(s+=1)}),s===1)return null}}},Argument:{enter:function(i){if(r(i))return null}}}))}function pu(t,e){function r(i){if(t.some(function(n){return n.name===i.name.value}))return null}return Zr((0,ft.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function Ds(t){var e=[];return t.selections.forEach(function(r){(Dt(r)||Qr(r))&&r.selectionSet?Ds(r.selectionSet).forEach(function(i){return e.push(i)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function fu(t){var e=Hi(t),r=e.operation;if(r==="query")return t;var i=(0,ft.visit)(t,{OperationDefinition:{enter:function(n){return Y(Y({},n),{operation:"query"})}}});return i}function gu(t){Lt(t);var e=Ts([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,ft.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var i=r.selectionSet.selections.every(function(n){return Dt(n)&&n.name.value==="__typename"});if(i)return null}}}})),e}var ji=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),vu=Object.prototype.toString;function wu(t){return Qi(t,new Map)}function Qi(t,e){switch(vu.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(n,s){r[s]=Qi(n,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var i=Object.create(Object.getPrototypeOf(t));return e.set(t,i),Object.keys(t).forEach(function(n){i[n]=Qi(t[n],e)}),i}default:return t}}function bu(){return typeof process!="undefined"?"production":"development"}function Wi(t){return bu()===t}function Fs(){return Wi("production")===!0}function yu(){return Wi("development")===!0}function zi(){return Wi("test")===!0}function Ki(t){try{return t()}catch(e){console.error&&console.error(e)}}function $t(t){return t.errors&&t.errors.length}function Is(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Is(t[e])}),t}function of(t){if(yu()||zi()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Is(t)}return t}var ku=Object.prototype.hasOwnProperty;function As(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yi(t)}function Yi(t){var e=t[0]||{},r=t.length;if(r>1){var i=[];e=Ji(e,i);for(var n=1;n<r;++n)e=xs(e,t[n],i)}return e}function Ms(t){return t!==null&&typeof t=="object"}function xs(t,e,r){return Ms(e)&&Ms(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=Ji(t,r)),Object.keys(e).forEach(function(i){var n=e[i];if(ku.call(t,i)){var s=t[i];n!==s&&(t[i]=xs(Ji(s,r),n,r))}else t[i]=n}),t):e}function Ji(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=Y({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Os=Object.create({});function lf(t,e){e===void 0&&(e="warn"),!Fs()&&!Os[t]&&(zi()||(Os[t]=!0),e==="error"?console.error(t):console.warn(t))}function uf(t){return JSON.parse(JSON.stringify(t))}var _u=oe(9329),Ru=oe.n(_u),Eu=Ru();const $e=Eu;function Cu(t){for(var e=["query","operationName","variables","extensions","context"],r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];if(e.indexOf(n)<0)throw new De(2)}return t}var cf=function(t){pt(e,t);function e(r,i){var n=t.call(this,r)||this;return n.link=i,n}return e}(Error);function Xr(t){return t.request.length<=1}function df(t){var e=!1;return new Promise(function(r,i){t.subscribe({next:function(n){e||(e=!0,r(n))},error:i})})}var mf=null;function hf(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function qs(t){return new $e(function(e){e.error(t)})}function Su(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?Gi(e.query):""),e}function Tu(t,e){var r=Y({},t),i=function(s){typeof s=="function"?r=Y({},r,s(r)):r=Y({},r,s)},n=function(){return Y({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:i}),Object.defineProperty(e,"getContext",{enumerable:!1,value:n}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return Pu(e)}}),e}function Pu(t){var e=t.query,r=t.variables,i=t.operationName;return JSON.stringify([i,e,r])}function Us(t,e){return e?e(t):$e.of()}function Rr(t){return typeof t=="function"?new Je(t):t}function Ls(){return new Je(function(){return $e.of()})}function Nu(t){return t.length===0?Ls():t.map(Rr).reduce(function(e,r){return e.concat(r)})}function $s(t,e,r){var i=Rr(e),n=Rr(r||new Je(Us));return Xr(i)&&Xr(n)?new Je(function(s){return t(s)?i.request(s)||$e.of():n.request(s)||$e.of()}):new Je(function(s,a){return t(s)?i.request(s,a)||$e.of():n.request(s,a)||$e.of()})}var Du=function(t,e){var r=Rr(t);if(Xr(r))return r;var i=Rr(e);return Xr(i)?new Je(function(n){return r.request(n,function(s){return i.request(s)||$e.of()})||$e.of()}):new Je(function(n,s){return r.request(n,function(a){return i.request(a,s)||$e.of()})||$e.of()})},Je=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,i){return this.concat($s(e,r,i||new t(Us)))},t.prototype.concat=function(e){return Du(this,e)},t.prototype.request=function(e,r){throw new De(1)},t.empty=Ls,t.from=Nu,t.split=$s,t.execute=ei,t}();function ei(t,e){return t.request(Tu(e.context,Su(Cu(e))))||$e.of()}var Fu=oe(7121),be;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(be||(be={}));function Gs(t){return t<7}var Er=function(t){pt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[Fu.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}($e);function tr(t){return Array.isArray(t)&&t.length>0}function Iu(t){return t.hasOwnProperty("graphQLErrors")}var Au=function(t){var e="";return tr(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var i=r?r.message:"Error message not found.";e+="GraphQL error: "+i+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Ft=function(t){pt(e,t);function e(r){var i=r.graphQLErrors,n=r.networkError,s=r.errorMessage,a=r.extraInfo,o=t.call(this,s)||this;return o.graphQLErrors=i||[],o.networkError=n||null,s?o.message=s:o.message=Au(o),o.extraInfo=a,o.__proto__=e.prototype,o}return e}(Error),Gt;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(Gt||(Gt={}));var Mu=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&tr(t.graphQLErrors))},xu=function(t){pt(e,t);function e(r){var i=r.queryManager,n=r.options,s=r.shouldSubscribe,a=s===void 0?!0:s,o=t.call(this,function(c){return o.onSubscribe(c)})||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=n,o.variables=n.variables||{},o.queryId=i.generateQueryId(),o.shouldSubscribe=a;var u=er(n.query);return o.queryName=u&&u.name&&u.name.value,o.queryManager=i,o}return e.prototype.result=function(){var r=this;return new Promise(function(i,n){var s={next:function(o){i(o),r.observers.delete(s),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){a.unsubscribe()},0)},error:n},a=r.subscribe(s)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:be.error}}var i=this.queryManager.getCurrentQueryResult(this),n=i.data,s=i.partial,a=this.queryManager.queryStore.get(this.queryId),o,u=this.options.fetchPolicy,c=u==="network-only"||u==="no-cache";if(a){var h=a.networkStatus;if(Mu(a,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:h,error:new Ft({graphQLErrors:a.graphQLErrors,networkError:a.networkError})};a.variables&&(this.options.variables=Y(Y({},this.options.variables),a.variables),this.variables=this.options.variables),o={data:n,loading:Gs(h),networkStatus:h},a.graphQLErrors&&this.options.errorPolicy==="all"&&(o.errors=a.graphQLErrors)}else{var w=c||s&&u!=="cache-only";o={data:n,loading:w,networkStatus:w?be.loading:be.ready}}return s||this.updateLastResult(Y(Y({},o),{stale:!1})),Y(Y({},o),{partial:s})},e.prototype.isDifferentFromLastResult=function(r){var i=this.lastResultSnapshot;return!(i&&r&&i.networkStatus===r.networkStatus&&i.stale===r.stale&&Ye(i.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var i=this.options.fetchPolicy;return i==="cache-only"?Promise.reject(new De(1)):(i!=="no-cache"&&i!=="cache-and-network"&&(i="network-only"),Ye(this.variables,r)||(this.variables=Y(Y({},this.variables),r)),Ye(this.options.variables,this.variables)||(this.options.variables=Y(Y({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,Y(Y({},this.options),{fetchPolicy:i}),Gt.refetch))},e.prototype.fetchMore=function(r){var i=this;ce(r.updateQuery,2);var n=Y(Y({},r.query?r:Y(Y(Y({},this.options),r),{variables:Y(Y({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),s=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(s,n,Gt.normal,this.queryId).then(function(a){return i.updateQuery(function(o){return r.updateQuery(o,{fetchMoreResult:a.data,variables:n.variables})}),i.queryManager.stopQuery(s),a},function(a){throw i.queryManager.stopQuery(s),a})},e.prototype.subscribeToMore=function(r){var i=this,n=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(s){var a=r.updateQuery;a&&i.updateQuery(function(o,u){var c=u.variables;return a(o,{subscriptionData:s,variables:c})})},error:function(s){if(r.onError){r.onError(s);return}}});return this.subscriptions.add(n),function(){i.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(r){var i=this.options.fetchPolicy;this.options=Y(Y({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var n=r.fetchPolicy;return this.setVariables(this.options.variables,i!==n&&(i==="cache-only"||i==="standby"||n==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,i,n){return i===void 0&&(i=!1),n===void 0&&(n=!0),this.isTornDown=!1,r=r||this.variables,!i&&Ye(r,this.variables)?this.observers.size&&n?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var i=this.queryManager,n=i.getQueryWithPreviousResult(this.queryId),s=n.previousResult,a=n.variables,o=n.document,u=Ki(function(){return r(s,{variables:a})});u&&(i.dataStore.markUpdateQueryResult(o,a,u),i.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){Hs(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var i=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:wu(r),i},e.prototype.onSubscribe=function(r){var i=this;try{var n=r._subscription._observer;n&&!n.error&&(n.error=Ou)}catch(a){}var s=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),s&&this.setUpQuery(),function(){i.observers.delete(r)&&!i.observers.size&&i.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,i=this,n=i.queryManager,s=i.queryId;this.shouldSubscribe&&n.addObservableQuery(s,this),this.options.pollInterval&&(Hs(this),n.startPollingQuery(this.options,s));var a=function(o){r.updateLastResult(Y(Y({},r.lastResult),{errors:o.graphQLErrors,networkStatus:be.error,loading:!1})),Zi(r.observers,"error",r.lastError=o)};n.observeQuery(s,this.options,{next:function(o){if(r.lastError||r.isDifferentFromLastResult(o)){var u=r.updateLastResult(o),c=r.options,h=c.query,w=c.variables,R=c.fetchPolicy;n.transform(h).hasClientExports?n.getLocalState().addExportedVariables(h,w).then(function(q){var V=r.variables;r.variables=r.options.variables=q,!o.loading&&u&&R!=="cache-only"&&n.transform(h).serverQuery&&!Ye(V,q)?r.refetch():Zi(r.observers,"next",o)}):Zi(r.observers,"next",o)}},error:a}).catch(a)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(i){return i.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(Er);function Ou(t){}function Zi(t,e,r){var i=[];t.forEach(function(n){return n[e]&&i.push(n)}),i.forEach(function(n){return n[e](r)})}function Hs(t){var e=t.options.fetchPolicy;ce(e!=="cache-first"&&e!=="cache-only",3)}var qu=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,i){this.store[e]={mutation:r,variables:i||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var i=this.store[e];i&&(i.loading=!1,i.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),Uu=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];ce(!r||r.document===e.document||Ye(r.document,e.document),19);var i=!1,n=null;e.storePreviousVariables&&r&&r.networkStatus!==be.loading&&(Ye(r.variables,e.variables)||(i=!0,n=r.variables));var s;i?s=be.setVariables:e.isPoll?s=be.poll:e.isRefetch?s=be.refetch:s=be.loading;var a=[];r&&r.graphQLErrors&&(a=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:n,networkError:null,graphQLErrors:a,networkStatus:s,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=be.fetchMore)},t.prototype.markQueryResult=function(e,r,i){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=tr(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=be.ready,typeof i=="string"&&this.store[i]&&(this.store[i].networkStatus=be.ready))},t.prototype.markQueryError=function(e,r,i){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=be.error,typeof i=="string"&&this.markQueryResultClient(i,!0))},t.prototype.markQueryResultClient=function(e,r){var i=this.store&&this.store[e];i&&(i.networkError=null,i.previousVariables=null,r&&(i.networkStatus=be.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(i){e.indexOf(i)<0?r.stopQuery(i):r.store[i].networkStatus=be.loading})},t}();function Lu(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Vs=function(){function t(e){var r=e.cache,i=e.client,n=e.resolvers,s=e.fragmentMatcher;this.cache=r,i&&(this.client=i),n&&this.addResolvers(n),s&&this.setFragmentMatcher(s)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(i){r.resolvers=As(r.resolvers,i)}):this.resolvers=As(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,i=e.remoteResult,n=e.context,s=e.variables,a=e.onlyRunForcedResolvers,o=a===void 0?!1:a;return Pt(this,void 0,void 0,function(){return Nt(this,function(u){return r?[2,this.resolveDocument(r,i.data,n,s,this.fragmentMatcher,o).then(function(c){return Y(Y({},i),{data:c.result})})]:[2,i]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Kr(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?gu(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,i=Y(Y({},e),{cache:r,getCacheKey:function(n){if(r.config)return r.config.dataIdFromObject(n);ce(!1,6)}});return i},t.prototype.addExportedVariables=function(e,r,i){return r===void 0&&(r={}),i===void 0&&(i={}),Pt(this,void 0,void 0,function(){return Nt(this,function(n){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(i),r).then(function(s){return Y(Y({},r),s.exportedVariables)})]:[2,Y({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,ft.visit)(e,{Directive:{enter:function(i){if(i.name.value==="client"&&i.arguments&&(r=i.arguments.some(function(n){return n.name.value==="always"&&n.value.kind==="BooleanValue"&&n.value.value===!0}),r))return ft.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:fu(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,i,n,s,a){return i===void 0&&(i={}),n===void 0&&(n={}),s===void 0&&(s=function(){return!0}),a===void 0&&(a=!1),Pt(this,void 0,void 0,function(){var o,u,c,h,w,R,q,V,U;return Nt(this,function(z){return o=Hi(e),u=Yr(e),c=Jr(u),h=o.operation,w=h?Lu(h):"Query",R=this,q=R.cache,V=R.client,U={fragmentMap:c,context:Y(Y({},i),{cache:q,client:V}),variables:n,fragmentMatcher:s,defaultOperationType:w,exportedVariables:{},onlyRunForcedResolvers:a},[2,this.resolveSelectionSet(o.selectionSet,r,U).then(function(K){return{result:K,exportedVariables:U.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,i){return Pt(this,void 0,void 0,function(){var n,s,a,o,u,c=this;return Nt(this,function(h){return n=i.fragmentMap,s=i.context,a=i.variables,o=[r],u=function(w){return Pt(c,void 0,void 0,function(){var R,q;return Nt(this,function(V){return Li(w,a)?Dt(w)?[2,this.resolveField(w,r,i).then(function(U){var z;typeof U!="undefined"&&o.push((z={},z[_r(w)]=U,z))})]:(Qr(w)?R=w:(R=n[w.name.value],ce(R,7)),R&&R.typeCondition&&(q=R.typeCondition.name.value,i.fragmentMatcher(r,q,s))?[2,this.resolveSelectionSet(R.selectionSet,r,i).then(function(U){o.push(U)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(u)).then(function(){return Yi(o)})]})})},t.prototype.resolveField=function(e,r,i){return Pt(this,void 0,void 0,function(){var n,s,a,o,u,c,h,w,R,q=this;return Nt(this,function(V){return n=i.variables,s=e.name.value,a=_r(e),o=s!==a,u=r[a]||r[s],c=Promise.resolve(u),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(h=r.__typename||i.defaultOperationType,w=this.resolvers&&this.resolvers[h],w&&(R=w[o?s:a],R&&(c=Promise.resolve(R(r,Ui(e,n),i.context,{field:e,fragmentMap:i.fragmentMap}))))),[2,c.then(function(U){if(U===void 0&&(U=u),e.directives&&e.directives.forEach(function(z){z.name.value==="export"&&z.arguments&&z.arguments.forEach(function(K){K.name.value==="as"&&K.value.kind==="StringValue"&&(i.exportedVariables[K.value.value]=U)})}),!e.selectionSet||U==null)return U;if(Array.isArray(U))return q.resolveSubSelectedArray(e,U,i);if(e.selectionSet)return q.resolveSelectionSet(e.selectionSet,U,i)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,i){var n=this;return Promise.all(r.map(function(s){if(s===null)return null;if(Array.isArray(s))return n.resolveSubSelectedArray(e,s,i);if(e.selectionSet)return n.resolveSelectionSet(e.selectionSet,s,i)}))},t}();function Bs(t){var e=new Set,r=null;return new Er(function(i){return e.add(i),r=r||t.subscribe({next:function(n){e.forEach(function(s){return s.next&&s.next(n)})},error:function(n){e.forEach(function(s){return s.error&&s.error(n)})},complete:function(){e.forEach(function(n){return n.complete&&n.complete()})}}),function(){e.delete(i)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function $u(t,e){return new Er(function(r){var i=r.next,n=r.error,s=r.complete,a=0,o=!1,u={next:function(h){++a,new Promise(function(w){w(e(h))}).then(function(w){--a,i&&i.call(r,w),o&&u.complete()},function(w){--a,n&&n.call(r,w)})},error:function(h){n&&n.call(r,h)},complete:function(){o=!0,a||s&&s.call(r)}},c=t.subscribe(u);return function(){return c.unsubscribe()}})}var Gu=Object.prototype.hasOwnProperty,Hu=function(){function t(e){var r=e.link,i=e.queryDeduplication,n=i===void 0?!1:i,s=e.store,a=e.onBroadcast,o=a===void 0?function(){}:a,u=e.ssrMode,c=u===void 0?!1:u,h=e.clientAwareness,w=h===void 0?{}:h,R=e.localState,q=e.assumeImmutableResults;this.mutationStore=new qu,this.queryStore=new Uu,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(ji?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=n,this.dataStore=s,this.onBroadcast=o,this.clientAwareness=w,this.localState=R||new Vs({cache:s.getCache()}),this.ssrMode=c,this.assumeImmutableResults=!!q}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,i){e.stopQueryNoBroadcast(i)}),this.fetchQueryRejectFns.forEach(function(r){r(new De(8))})},t.prototype.mutate=function(e){var r=e.mutation,i=e.variables,n=e.optimisticResponse,s=e.updateQueries,a=e.refetchQueries,o=a===void 0?[]:a,u=e.awaitRefetchQueries,c=u===void 0?!1:u,h=e.update,w=e.errorPolicy,R=w===void 0?"none":w,q=e.fetchPolicy,V=e.context,U=V===void 0?{}:V;return Pt(this,void 0,void 0,function(){var z,K,Z,re=this;return Nt(this,function(ee){switch(ee.label){case 0:return ce(r,9),ce(!q||q==="no-cache",10),z=this.generateQueryId(),r=this.transform(r).document,this.setQuery(z,function(){return{document:r}}),i=this.getVariables(r,i),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,i,U)]:[3,2];case 1:i=ee.sent(),ee.label=2;case 2:return K=function(){var le={};return s&&re.queries.forEach(function(ve,he){var ke=ve.observableQuery;if(ke){var de=ke.queryName;de&&Gu.call(s,de)&&(le[he]={updater:s[de],query:re.queryStore.get(he)})}}),le},this.mutationStore.initMutation(z,r,i),this.dataStore.markMutationInit({mutationId:z,document:r,variables:i,updateQueries:K(),update:h,optimisticResponse:n}),this.broadcastQueries(),Z=this,[2,new Promise(function(le,ve){var he,ke;Z.getObservableFromLink(r,Y(Y({},U),{optimisticResponse:n}),i,!1).subscribe({next:function(de){if($t(de)&&R==="none"){ke=new Ft({graphQLErrors:de.errors});return}Z.mutationStore.markMutationResult(z),q!=="no-cache"&&Z.dataStore.markMutationResult({mutationId:z,result:de,document:r,variables:i,updateQueries:K(),update:h}),he=de},error:function(de){Z.mutationStore.markMutationError(z,de),Z.dataStore.markMutationComplete({mutationId:z,optimisticResponse:n}),Z.broadcastQueries(),Z.setQuery(z,function(){return{document:null}}),ve(new Ft({networkError:de}))},complete:function(){if(ke&&Z.mutationStore.markMutationError(z,ke),Z.dataStore.markMutationComplete({mutationId:z,optimisticResponse:n}),Z.broadcastQueries(),ke){ve(ke);return}typeof o=="function"&&(o=o(he));var de=[];tr(o)&&o.forEach(function(Ot){if(typeof Ot=="string")Z.queries.forEach(function(rt){var Ue=rt.observableQuery;Ue&&Ue.queryName===Ot&&de.push(Ue.refetch())});else{var Vr={query:Ot.query,variables:Ot.variables,fetchPolicy:"network-only"};Ot.context&&(Vr.context=Ot.context),de.push(Z.query(Vr))}}),Promise.all(c?de:[]).then(function(){Z.setQuery(z,function(){return{document:null}}),R==="ignore"&&he&&$t(he)&&delete he.errors,le(he)})}})})]}})})},t.prototype.fetchQuery=function(e,r,i,n){return Pt(this,void 0,void 0,function(){var s,a,o,u,c,h,w,R,q,V,U,z,K,Z,re,ee,le,ve,he=this;return Nt(this,function(ke){switch(ke.label){case 0:return s=r.metadata,a=s===void 0?null:s,o=r.fetchPolicy,u=o===void 0?"cache-first":o,c=r.context,h=c===void 0?{}:c,w=this.transform(r.query).document,R=this.getVariables(w,r.variables),this.transform(w).hasClientExports?[4,this.localState.addExportedVariables(w,R,h)]:[3,2];case 1:R=ke.sent(),ke.label=2;case 2:if(r=Y(Y({},r),{variables:R}),V=u==="network-only"||u==="no-cache",U=V,V||(z=this.dataStore.getCache().diff({query:w,variables:R,returnPartialData:!0,optimistic:!1}),K=z.complete,Z=z.result,U=!K||u==="cache-and-network",q=Z),re=U&&u!=="cache-only"&&u!=="standby",Kr(["live"],w)&&(re=!0),ee=this.idCounter++,le=u!=="no-cache"?this.updateQueryWatch(e,w,r):void 0,this.setQuery(e,function(){return{document:w,lastRequestId:ee,invalidated:!0,cancel:le}}),this.invalidate(n),this.queryStore.initQuery({queryId:e,document:w,storePreviousVariables:re,variables:R,isPoll:i===Gt.poll,isRefetch:i===Gt.refetch,metadata:a,fetchMoreForQueryId:n}),this.broadcastQueries(),re){if(ve=this.fetchRequest({requestId:ee,queryId:e,document:w,options:r,fetchMoreForQueryId:n}).catch(function(de){throw Iu(de)?de:(ee>=he.getQuery(e).lastRequestId&&(he.queryStore.markQueryError(e,de,n),he.invalidate(e),he.invalidate(n),he.broadcastQueries()),new Ft({networkError:de}))}),u!=="cache-and-network")return[2,ve];ve.catch(function(){})}return this.queryStore.markQueryResultClient(e,!re),this.invalidate(e),this.invalidate(n),this.transform(w).hasForcedResolvers?[2,this.localState.runResolvers({document:w,remoteResult:{data:q},context:h,variables:R,onlyRunForcedResolvers:!0}).then(function(de){return he.markQueryResult(e,de,r,n),he.broadcastQueries(),de})]:(this.broadcastQueries(),[2,{data:q}])}})})},t.prototype.markQueryResult=function(e,r,i,n){var s=i.fetchPolicy,a=i.variables,o=i.errorPolicy;s==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,a,n,o==="ignore"||o==="all")},t.prototype.queryListenerForObserver=function(e,r,i){var n=this;function s(a,o){if(i[a])try{i[a](o)}catch(u){}}return function(a,o){if(n.invalidate(e,!1),!!a){var u=n.getQuery(e),c=u.observableQuery,h=u.document,w=c?c.options.fetchPolicy:r.fetchPolicy;if(w!=="standby"){var R=Gs(a.networkStatus),q=c&&c.getLastResult(),V=!!(q&&q.networkStatus!==a.networkStatus),U=r.returnPartialData||!o&&a.previousVariables||V&&r.notifyOnNetworkStatusChange||w==="cache-only"||w==="cache-and-network";if(!(R&&!U)){var z=tr(a.graphQLErrors),K=c&&c.options.errorPolicy||r.errorPolicy||"none";if(K==="none"&&z||a.networkError)return s("error",new Ft({graphQLErrors:a.graphQLErrors,networkError:a.networkError}));try{var Z=void 0,re=void 0;if(o)w!=="no-cache"&&w!=="network-only"&&n.setQuery(e,function(){return{newData:null}}),Z=o.result,re=!o.complete;else{var ee=c&&c.getLastError(),le=K!=="none"&&(ee&&ee.graphQLErrors)!==a.graphQLErrors;if(q&&q.data&&!le)Z=q.data,re=!1;else{var ve=n.dataStore.getCache().diff({query:h,variables:a.previousVariables||a.variables,returnPartialData:!0,optimistic:!0});Z=ve.result,re=!ve.complete}}var he=re&&!(r.returnPartialData||w==="cache-only"),ke={data:he?q&&q.data:Z,loading:R,networkStatus:a.networkStatus,stale:he};K==="all"&&z&&(ke.errors=a.graphQLErrors),s("next",ke)}catch(de){s("error",new Ft({networkError:de}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var i=this.dataStore.getCache(),n=i.transformDocument(e),s=du(i.transformForLink(n)),a=this.localState.clientQuery(n),o=this.localState.serverQuery(s),u={document:n,hasClientExports:iu(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:o,defaultVars:Vi(er(n))},c=function(h){h&&!r.has(h)&&r.set(h,u)};c(e),c(n),c(a),c(o)}return r.get(e)},t.prototype.getVariables=function(e,r){return Y(Y({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),ce(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var i=Y({},e);return new xu({queryManager:this,options:i,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return ce(e.query,12),ce(e.query.kind==="Document",13),ce(!e.returnPartialData,14),ce(!e.pollInterval,15),new Promise(function(i,n){var s=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+s.queryId,n),s.result().then(i,n).then(function(){return r.fetchQueryRejectFns.delete("query:"+s.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(i){var n=i.listeners;return n.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,i){var n=this,s=this.getQuery(e).cancel;s&&s();var a=function(){var o=null,u=n.getQuery(e).observableQuery;if(u){var c=u.getLastResult();c&&(o=c.data)}return o};return this.dataStore.getCache().watch({query:r,variables:i.variables,optimistic:!0,previousResult:a,callback:function(o){n.setQuery(e,function(){return{invalidated:!0,newData:o}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new De(16))});var e=[];return this.queries.forEach(function(r,i){var n=r.observableQuery;n&&e.push(i)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var i=[];return this.queries.forEach(function(n,s){var a=n.observableQuery;if(a){var o=a.options.fetchPolicy;a.resetLastResults(),o!=="cache-only"&&(e||o!=="standby")&&i.push(a.refetch()),r.setQuery(s,function(){return{newData:null}}),r.invalidate(s)}}),this.broadcastQueries(),Promise.all(i)},t.prototype.observeQuery=function(e,r,i){return this.addQueryListener(e,this.queryListenerForObserver(e,r,i)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,i){return this.addQueryListener(e,i),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,i=e.query,n=e.fetchPolicy,s=e.variables;i=this.transform(i).document,s=this.getVariables(i,s);var a=function(u){return r.getObservableFromLink(i,{},u,!1).map(function(c){if((!n||n!=="no-cache")&&(r.dataStore.markSubscriptionResult(c,i,u),r.broadcastQueries()),$t(c))throw new Ft({graphQLErrors:c.errors});return c})};if(this.transform(i).hasClientExports){var o=this.localState.addExportedVariables(i,s).then(a);return new Er(function(u){var c=null;return o.then(function(h){return c=h.subscribe(u)},u.error),function(){return c&&c.unsubscribe()}})}return a(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var i=e.options,n=i.variables,s=i.query,a=i.fetchPolicy,o=i.returnPartialData,u=e.getLastResult(),c=this.getQuery(e.queryId).newData;if(c&&c.complete)return{data:c.result,partial:!1};if(a==="no-cache"||a==="network-only")return{data:void 0,partial:!1};var h=this.dataStore.getCache().diff({query:s,variables:n,previousResult:u?u.data:void 0,returnPartialData:!0,optimistic:r}),w=h.result,R=h.complete;return{data:R||o?w:void 0,partial:!R}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var i=this.getQuery(e).observableQuery;ce(i,17),r=i}else r=e;var n=r.options,s=n.variables,a=n.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:s,document:a}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,i){r.invalidated&&r.listeners.forEach(function(n){n&&n(e.queryStore.get(i),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,i,n){var s=this;n===void 0&&(n=this.queryDeduplication);var a,o=this.transform(e).serverQuery;if(o){var u=this,c=u.inFlightLinkObservables,h=u.link,w={query:o,variables:i,operationName:Gi(o)||void 0,context:this.prepareContext(Y(Y({},r),{forceFetch:!n}))};if(r=w.context,n){var R=c.get(o)||new Map;c.set(o,R);var q=JSON.stringify(i);if(a=R.get(q),!a){R.set(q,a=Bs(ei(h,w)));var V=function(){R.delete(q),R.size||c.delete(o),U.unsubscribe()},U=a.subscribe({next:V,error:V,complete:V})}}else a=Bs(ei(h,w))}else a=Er.of({data:{}}),r=this.prepareContext(r);var z=this.transform(e).clientQuery;return z&&(a=$u(a,function(K){return s.localState.runResolvers({document:z,remoteResult:K,context:r,variables:i})})),a},t.prototype.fetchRequest=function(e){var r=this,i=e.requestId,n=e.queryId,s=e.document,a=e.options,o=e.fetchMoreForQueryId,u=a.variables,c=a.errorPolicy,h=c===void 0?"none":c,w=a.fetchPolicy,R,q;return new Promise(function(V,U){var z=r.getObservableFromLink(s,a.context,u),K="fetchRequest:"+n;r.fetchQueryRejectFns.set(K,U);var Z=function(){r.fetchQueryRejectFns.delete(K),r.setQuery(n,function(ee){var le=ee.subscriptions;le.delete(re)})},re=z.map(function(ee){if(i>=r.getQuery(n).lastRequestId&&(r.markQueryResult(n,ee,a,o),r.queryStore.markQueryResult(n,ee,o),r.invalidate(n),r.invalidate(o),r.broadcastQueries()),h==="none"&&tr(ee.errors))return U(new Ft({graphQLErrors:ee.errors}));if(h==="all"&&(q=ee.errors),o||w==="no-cache")R=ee.data;else{var le=r.dataStore.getCache().diff({variables:u,query:s,optimistic:!1,returnPartialData:!0}),ve=le.result,he=le.complete;(he||a.returnPartialData)&&(R=ve)}}).subscribe({error:function(ee){Z(),U(ee)},complete:function(){Z(),V({data:R,errors:q,loading:!1,networkStatus:be.ready,stale:!1})}});r.setQuery(n,function(ee){var le=ee.subscriptions;le.add(re)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var i=this.getQuery(e),n=Y(Y({},i),r(i));this.queries.set(e,n)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return Y(Y({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==be.ready&&r.networkStatus!==be.error},t.prototype.startPollingQuery=function(e,r,i){var n=this,s=e.pollInterval;if(ce(s,18),!this.ssrMode){var a=this.pollingInfoByQueryId.get(r);a||this.pollingInfoByQueryId.set(r,a={}),a.interval=s,a.options=Y(Y({},e),{fetchPolicy:"network-only"});var o=function(){var c=n.pollingInfoByQueryId.get(r);c&&(n.checkInFlight(r)?u():n.fetchQuery(r,c.options,Gt.poll).then(u,u))},u=function(){var c=n.pollingInfoByQueryId.get(r);c&&(clearTimeout(c.timeout),c.timeout=setTimeout(o,c.interval))};i&&this.addQueryListener(r,i),u()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Vu=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,i,n,s){s===void 0&&(s=!1);var a=!$t(e);s&&$t(e)&&e.data&&(a=!0),!n&&a&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:i})},t.prototype.markSubscriptionResult=function(e,r,i){$t(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:i})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var i;typeof e.optimisticResponse=="function"?i=e.optimisticResponse(e.variables):i=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(n){var s=r.cache;r.cache=n;try{r.markMutationResult({mutationId:e.mutationId,result:{data:i},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=s}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!$t(e.result)){var i=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],n=e.updateQueries;n&&Object.keys(n).forEach(function(s){var a=n[s],o=a.query,u=a.updater,c=r.cache.diff({query:o.document,variables:o.variables,returnPartialData:!0,optimistic:!1}),h=c.result,w=c.complete;if(w){var R=Ki(function(){return u(h,{mutationResult:e.result,queryName:Gi(o.document)||void 0,queryVariables:o.variables})});R&&i.push({result:R,dataId:"ROOT_QUERY",query:o.document,variables:o.variables})}}),this.cache.performTransaction(function(s){i.forEach(function(o){return s.write(o)});var a=e.update;a&&Ki(function(){return a(s,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,i=e.optimisticResponse;i&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,i){this.cache.write({result:i,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),Bu="2.6.10",ju=!1,Qu=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var i=e.cache,n=e.ssrMode,s=n===void 0?!1:n,a=e.ssrForceFetchDelay,o=a===void 0?0:a,u=e.connectToDevTools,c=e.queryDeduplication,h=c===void 0?!0:c,w=e.defaultOptions,R=e.assumeImmutableResults,q=R===void 0?!1:R,V=e.resolvers,U=e.typeDefs,z=e.fragmentMatcher,K=e.name,Z=e.version,re=e.link;if(!re&&V&&(re=Je.empty()),!re||!i)throw new De(4);this.link=re,this.cache=i,this.store=new Vu(i),this.disableNetworkFetches=s||o>0,this.queryDeduplication=h,this.defaultOptions=w||{},this.typeDefs=U,o&&setTimeout(function(){return r.disableNetworkFetches=!1},o),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var ee=!1;(typeof u=="undefined"?ee:u&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=Bu,this.localState=new Vs({cache:i,client:this,resolvers:V,fragmentMatcher:z}),this.queryManager=new Hu({link:this.link,store:this.store,queryDeduplication:h,ssrMode:s,clientAwareness:{name:K,version:Z},localState:this.localState,assumeImmutableResults:q,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Y(Y({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=Y(Y({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=Y(Y({},this.defaultOptions.query),e)),ce(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=Y(Y({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Y(Y({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return ei(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(i){return i!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(i){return i!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const pf=null;var Wu=Object.defineProperty,js=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Wu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ti extends Error{constructor(e){super(e);this.message=e,js(this,"name"),js(this,"stack")}}class ri{constructor(e,r,i){this.remoteName=e,this.url=r,this.gitProtocol=i}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function Qs(t,e,r){if(!e)return null;const i=new St(e);return r&&i.update({type:r.type}),i.host?new ri(t,e,i):null}function Cr(t){return t.state.remotes.map(e=>Qs(e.name,e.fetchUrl||e.pushUrl)).filter(e=>!!e)}var zu=Object.defineProperty,Ws=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ku{constructor(e){this.commentsController=e,Ws(this,"_prCommentControllers",{}),Ws(this,"_prDocumentCommentThreadMap",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const i=e.uri,n=we(i);return!n||!this._prCommentControllers[n.prNumber]?void 0:this._prCommentControllers[n.prNumber].provideCommentingRanges.bind(this._prCommentControllers[n.prNumber])(e,r)}async toggleReaction(e,r){const i=e.parent.uri,n=we(i);return!n||!this._prCommentControllers[n.prNumber]||!this._prCommentControllers[n.prNumber].toggleReaction?void 0:this._prCommentControllers[n.prNumber].toggleReaction.bind(this._prCommentControllers[n.prNumber])(e,r)}registerCommentController(e,r){return this._prCommentControllers[e]=r,this._prDocumentCommentThreadMap[e]||(this._prDocumentCommentThreadMap[e]={}),{commentThreadCache:this._prDocumentCommentThreadMap[e],dispose:()=>{delete this._prCommentControllers[e]}}}clearCommentThreadCache(e){if(this._prDocumentCommentThreadMap[e]){for(const r in this._prDocumentCommentThreadMap[e])this._prDocumentCommentThreadMap[e][r].forEach(i=>i.dispose());this._prDocumentCommentThreadMap[e]={}}}dispose(){this._prCommentControllers={},this._prDocumentCommentThreadMap={}}}var Yu=oe(9967),Ju=oe.n(Yu),Zu=Object.defineProperty,Ze=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const zs=20,rr="GraphQL";var He;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(He||(He={}));const ae=class{constructor(t,e,r){this.remote=t,this._credentialStore=e,this._telemetry=r,Ze(this,"_initialized",!1),Ze(this,"_hub"),Ze(this,"_metadata"),Ze(this,"_toDispose",[]),Ze(this,"commentsController"),Ze(this,"commentsHandler"),Ze(this,"_pullRequestModels",new Map),Ze(this,"isGitHubDotCom"),Ze(this,"query",async i=>{const n=this.hub&&this.hub.graphql;if(!n)return $.debug(`Not available for query: ${i}`,rr),{data:null,loading:!1,networkStatus:be.error,stale:!1};$.debug(`Request: ${JSON.stringify(i,null,2)}`,rr);const s=await n.query(i);return $.debug(`Response: ${JSON.stringify(s,null,2)}`,rr),s}),Ze(this,"mutate",async i=>{const n=this.hub&&this.hub.graphql;if(!n)return $.debug(`Not available for query: ${i}`,rr),{data:null,loading:!1,networkStatus:be.error,stale:!1};$.debug(`Request: ${JSON.stringify(i,null,2)}`,rr);const s=await n.mutate(i);return $.debug(`Response: ${JSON.stringify(s,null,2)}`,rr),s}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new ti("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=l.comments.createCommentController(`browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new Ku(this.commentsController),this._toDispose.push(this.commentsController),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return Ju()}async getMetadata(){if($.debug("Fetch metadata - enter",ae.ID),this._metadata)return $.debug(`Fetch metadata ${this._metadata.owner.login}/${this._metadata.name} - done`,ae.ID),this._metadata;const{octokit:t,remote:e}=await this.ensure(),r=await t.repos.get({owner:e.owner,repo:e.repositoryName});return $.debug(`Fetch metadata ${e.owner}/${e.repositoryName} - done`,ae.ID),this._metadata={...r.data,currentUser:t.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=Qs(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){$.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated()?this._hub=this._credentialStore.getHub():this._hub=await this._credentialStore.showSignInNotification(),this}async getDefaultBranch(){try{$.debug("Fetch default branch - enter",ae.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return $.debug("Fetch default branch - done",ae.ID),r.default_branch}catch(t){$.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,i,n;try{$.debug("Fetch repo permissions and available merge methods - enter",ae.ID);const{octokit:s,remote:a}=await this.ensure(),{data:o}=await s.repos.get({owner:a.owner,repo:a.repositoryName});return $.debug("Fetch repo permissions and available merge methods - done",ae.ID),{hasWritePermission:(e=(t=o.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=o.allow_merge_commit)!=null?r:!1,squash:(i=o.allow_squash_merge)!=null?i:!1,rebase:(n=o.allow_rebase_merge)!=null?n:!1}}}catch(s){$.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${s}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{$.debug("Fetch all pull requests - enter",ae.ID);const{octokit:e,remote:r}=await this.ensure(),i=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:zs,page:t||1}),n=!!i.headers.link&&i.headers.link.indexOf('rel="next"')>-1;if(!i.data)return $.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${i.status}`),{items:[],hasMorePages:!1};const s=i.data.map(a=>a.head.repo?this.createOrUpdatePullRequestModel(Ht(a,this)):($.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(a=>a!==null);return $.debug("Fetch all pull requests - done",ae.ID),{items:s,hasMorePages:n}}catch(e){if($.appendLine(`Fetching all pull requests failed: ${e}`,ae.ID),e.code===404)l.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{$.debug("Fetch pull requests for branch - enter",ae.ID);const{octokit:e,remote:r}=await this.ensure(),n=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(s=>this.createOrUpdatePullRequestModel(Ht(s,this))).filter(s=>s!==null);return $.debug("Fetch pull requests for branch - done",ae.ID),n}catch(e){if($.appendLine(`Fetching pull requests for branch failed: ${e}`,ae.ID),e.code===404)l.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new ri(e.repositoryName,e.repositoryUrl,new St(e.repositoryUrl));t=new ae(r,this._credentialStore,this._telemetry)}return t}async getIssuesForUserByMilestone(t){try{$.debug("Fetch all issues - enter",ae.ID);const{query:e,remote:r,schema:i}=await this.ensure(),{data:n}=await e({query:i.GetMilestones,variables:{owner:r.owner,name:r.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});$.debug("Fetch all issues - done",ae.ID);const s=[];let a=this;return n&&n.repository.milestones&&n.repository.milestones.nodes&&n.repository.milestones.nodes.forEach(o=>{const u=tn(o);if(u){const c=[];o.issues.edges.forEach(h=>{const w=nn(h.node,this);a=this.getRepoForIssue(a,w),c.push(new Fe(a,a.remote,w))}),s.push({milestone:u,issues:c})}}),{items:s,hasMorePages:n.repository.milestones.pageInfo.hasNextPage}}catch(e){$.appendLine(`GithubRepository> Unable to fetch issues: ${e}`);return}}async getIssuesWithoutMilestone(t){try{$.debug("Fetch issues without milestone- enter",ae.ID);const{query:e,remote:r,schema:i}=await this.ensure(),{data:n}=await e({query:i.IssuesWithoutMilestone,variables:{owner:r.owner,name:r.repositoryName,assignee:this._credentialStore.getCurrentUser().login}});$.debug("Fetch issues without milestone - done",ae.ID);const s=[];let a=this;return n&&n.repository.issues.edges&&n.repository.issues.edges.forEach(o=>{if(o.node.id){const u=nn(o.node,this);a=this.getRepoForIssue(a,u),s.push(new Fe(a,a.remote,u))}}),{items:s,hasMorePages:n.repository.issues.pageInfo.hasNextPage}}catch(e){$.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${e}`);return}}async getIssues(t,e){try{$.debug("Fetch issues with query - enter",ae.ID);const{query:r,schema:i}=await this.ensure(),{data:n}=await r({query:i.Issues,variables:{query:`${e} type:issue`}});$.debug("Fetch issues with query - done",ae.ID);const s=[];let a=this;return n&&n.search.edges&&n.search.edges.forEach(o=>{if(o.node.id){const u=nn(o.node,this);a=this.getRepoForIssue(a,u),s.push(new Fe(a,a.remote,u))}}),{items:s,hasMorePages:n.search.pageInfo.hasNextPage}}catch(r){$.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{$.debug("Fetch max issue - enter",ae.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:i}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return $.debug("Fetch max issue - done",ae.ID),i&&i.repository.issues.edges.length===1?i.repository.issues.edges[0].node.number:void 0}catch(t){$.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{$.debug("Fetch viewer permission - enter",ae.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:i}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return $.debug("Fetch viewer permission - done",ae.ID),lc(i)}catch(t){return $.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),He.Unknown}}async fork(){try{$.debug("Fork repository",ae.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){$.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{$.debug("Fetch viewer permission - enter",ae.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:i}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return $.debug("Fetch viewer permission - done",ae.ID),i.repository}catch(t){$.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{$.debug(`Fetch pull request category ${t} - enter`,ae.ID);const{octokit:r,remote:i}=await this.ensure(),n=await r.users.getAuthenticated({}),s=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:a,headers:o}=await r.search.issuesAndPullRequests({q:uc(s.data.full_name,n.data.login,t),per_page:zs,page:e||1}),u=[];a.items.forEach(R=>{u.push(new Promise(async(q,V)=>{const U=await r.pulls.get({owner:i.owner,repo:i.repositoryName,pull_number:R.number});q(U)}))});const c=!!o.link&&o.link.indexOf('rel="next"')>-1,w=(await Promise.all(u)).map(R=>R.data.head.repo?this.createOrUpdatePullRequestModel(Ht(R.data,this)):($.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(R=>R!==null);return $.debug(`Fetch pull request category ${t} - done`,ae.ID),{items:w,hasMorePages:c}}catch(r){if($.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)l.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new vt(this._telemetry,this,this.remote,t),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(Ht(r,this))}async getPullRequest(t){try{$.debug(`Fetch pull request ${t} - enter`,ae.ID);const{query:e,remote:r,schema:i}=await this.ensure(),{data:n}=await e({query:i.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return $.debug(`Fetch pull request ${t} - done`,ae.ID),this.createOrUpdatePullRequestModel(ta(n,this))}catch(e){$.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{$.debug(`Fetch issue ${t} - enter`,ae.ID);const{query:r,remote:i,schema:n}=await this.ensure(),{data:s}=await r({query:e?n.IssueWithComments:n.Issue,variables:{owner:i.owner,name:i.repositoryName,number:t}});return $.debug(`Fetch issue ${t} - done`,ae.ID),new Fe(this,i,ta(s,this))}catch(r){$.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();$.debug(`List branches for ${t}/${e} - enter`,ae.ID);try{const i=await r.paginate("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100});return $.debug(`List branches for ${t}/${e} - done`,ae.ID),i.map(n=>n.name)}catch(i){throw $.debug(`List branches for ${t}/${e} failed`,ae.ID),i}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){$.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){$.debug("Fetch mentionable users - enter",ae.ID);const{query:t,remote:e,schema:r}=await this.ensure();let i=null,n=!1;const s=[];do try{const a=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:i}});s.push(...a.data.repository.mentionableUsers.nodes.map(o=>({login:o.login,avatarUrl:o.avatarUrl,name:o.name,url:o.url,email:o.email}))),n=a.data.repository.mentionableUsers.pageInfo.hasNextPage,i=a.data.repository.mentionableUsers.pageInfo.endCursor}catch(a){return $.debug(`Unable to fetch mentionable users: ${a}`,ae.ID),s}while(n);return s}async getAssignableUsers(){$.debug("Fetch assignable users - enter",ae.ID);const{query:t,remote:e,schema:r}=await this.ensure();let i=null,n=!1;const s=[];do try{const a=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:i}});s.push(...a.data.repository.assignableUsers.nodes.map(o=>({login:o.login,avatarUrl:o.avatarUrl,name:o.name,url:o.url,email:o.email}))),n=a.data.repository.assignableUsers.pageInfo.hasNextPage,i=a.data.repository.assignableUsers.pageInfo.endCursor}catch(a){return $.debug(`Unable to fetch assignable users: ${a}`,ae.ID),a.graphQLErrors&&a.graphQLErrors.length>0&&a.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&l.window.showWarningMessage(`GitHub user features will not work. ${a.graphQLErrors[0].message}`),s}while(n);return s}async compareCommits(t,e){const{remote:r,octokit:i}=await this.ensure(),{data:n}=await i.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return n}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let ir=ae;Ze(ir,"ID","GitHubRepository");var Xu=Object.defineProperty,Ee=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ii=class{constructor(t,e,r,i,n){Ee(this,"commentId"),Ee(this,"id"),Ee(this,"parent"),Ee(this,"body"),Ee(this,"originalBody"),Ee(this,"mode"),Ee(this,"author"),Ee(this,"label"),Ee(this,"commentReactions"),Ee(this,"contextValue"),this.parent=t,this.body=new l.MarkdownString(e),this.mode=l.CommentMode.Preview,this.author={name:i.login,iconPath:i.avatarUrl?l.Uri.parse(`${i.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=n?n._rawComment.body:void 0,this.commentReactions=n?n.reactions:void 0,this.id=ii.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof ii&&t.id===this.id&&(t.mode=l.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof ii&&t.id===this.id&&(t.mode=l.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let xe=ii;Ee(xe,"idPool",0);class me{constructor(e,r){Ee(this,"commentId"),Ee(this,"parent"),Ee(this,"body"),Ee(this,"mode"),Ee(this,"author"),Ee(this,"label"),Ee(this,"reactions"),Ee(this,"_rawComment"),Ee(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new l.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?l.Uri.parse(e.user.avatarUrl):void 0},Ys(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const i=[];e.canEdit&&i.push("canEdit"),e.canDelete&&i.push("canDelete"),this.contextValue=i.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof me&&e.commentId===this.commentId&&(e.mode=l.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof me&&e.commentId===this.commentId&&(e.mode=l.CommentMode.Preview,e.body=e._rawComment.body),e))}}function nr(t,e){var r;const i=e.createCommentThread(t.uri,t.range,[]);i.threadId=t.threadId,i.comments=t.comments.map(a=>new me(a,i));const n=!!((r=t.comments[0])==null?void 0:r.isResolved);i.isResolved=n,st(i);const s=t.uri.scheme!=="pr"&&t.uri.scheme!=="review";return i.collapsibleState=s||n?l.CommentThreadCollapsibleState.Collapsed:l.CommentThreadCollapsibleState.Expanded,i}function st(t){if(t.comments.length){const e=v(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function Ks(t){return si().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(i=>i.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function Ys(t,e){t.reactions=Ks(e)}function Xi(t,e){e||(t.comments=t.comments.map(r=>(r instanceof me&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function It(t,e){return{login:t.login,url:t.html_url,avatarUrl:e.isGitHubDotCom?t.avatar_url:void 0}}function Js(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function Ht(t,e){const{number:r,body:i,title:n,html_url:s,user:a,state:o,assignees:u,created_at:c,updated_at:h,head:w,base:R,labels:q,node_id:V,id:U,draft:z}=t;return{id:U,graphNodeId:V,number:r,body:i,title:n,url:s,user:It(a,e),state:o,merged:t.merged||!1,assignees:u?u.map(Z=>It(Z,e)):void 0,createdAt:c,updatedAt:h,head:Js(w),base:Js(R),mergeable:t.mergeable?Tt.Mergeable:Tt.NotMergeable,labels:q.map(Z=>({name:"",color:"",...Z})),isDraft:z,suggestedReviewers:[]}}function ec(t,e){const{number:r,body:i,title:n,html_url:s,user:a,state:o,assignees:u,created_at:c,updated_at:h,labels:w,node_id:R,id:q}=t;return{id:q,graphNodeId:R,number:r,body:i,title:n,url:s,user:It(a,e),state:o,assignees:u?u.map(U=>It(U,e)):void 0,createdAt:c,updatedAt:h,labels:w.map(U=>typeof U=="string"?{name:U,color:""}:{name:"",color:"",...U}),suggestedReviewers:[]}}function tc(t,e){return{event:Se.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:It(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function Zs(t){const e=[],r=Zt(t.diffHunk);let i=r.next();for(;!i.done;){const n=i.value;e.push(n),i=r.next()}return e}function Xs(t,e){const r={url:t.url,id:t.id,pullRequestReviewId:t.pull_request_review_id,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:It(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=Zs(r);return r.diffHunks=i,r}function rc(t){switch(t){case"PullRequestCommit":return Se.Committed;case"LabeledEvent":return Se.Labeled;case"MilestonedEvent":return Se.Milestoned;case"AssignedEvent":return Se.Assigned;case"HeadRefDeletedEvent":return Se.HeadRefDeleted;case"IssueComment":return Se.Commented;case"PullRequestReview":return Se.Reviewed;case"MergedEvent":return Se.Merged;default:return Se.Other}}function sr(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:en(t.reactionGroups),isResolved:e},i=Zs(r);return r.diffHunks=i,r}function ea(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function en(t){const e=si().reduce((i,n)=>(i[n.title]=n,i),{});return t.filter(i=>i.users.totalCount>0).map(i=>({label:e[i.content].label,count:i.users.totalCount,icon:e[i.content].icon,viewerHasReacted:i.viewerHasReacted}))}function ni(t){if(t)return{label:`${t.repository.owner.login}:${t.name}`,ref:t.name,sha:t.target.oid,repo:{cloneUrl:t.repository.url}}}function gt(t,e){return t?{login:t.login,url:t.url,avatarUrl:e.isGitHubDotCom?t.avatarUrl:void 0}:{login:"",url:""}}function tn(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function rn(t){switch(t){case"UNKNOWN":return Tt.Unknown;case"MERGEABLE":return Tt.Mergeable;case"CONFLICTING":return Tt.NotMergeable}}function ta(t,e){var r,i;const n=t.repository.pullRequest;return{id:n.databaseId,graphNodeId:n.id,url:n.url,number:n.number,state:n.state,body:n.body,bodyHTML:n.bodyHTML,title:n.title,createdAt:n.createdAt,updatedAt:n.updatedAt,head:ni(n.headRef),base:ni(n.baseRef),user:gt(n.author,e),merged:n.merged,mergeable:rn(n.mergeable),labels:n.labels.nodes,isDraft:n.isDraft,suggestedReviewers:ra(n.suggestedReviewers),comments:ic((r=n.comments)==null?void 0:r.nodes,e),milestone:tn(n.milestone),assignees:(i=n.assignees)==null?void 0:i.nodes}}function ic(t,e){if(!t)return;const r=[];for(const i of t)r.push({author:gt(i.author,e),body:i.body,databaseId:i.databaseId});return r}function nn(t,e){var r,i,n;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:t.assignees.nodes,user:gt(t.author,e),labels:t.labels.nodes,repositoryName:(r=t.repository)==null?void 0:r.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(n=t.repository)==null?void 0:n.url}}function ff(t,e){const r=t;return{id:r.databaseId,graphNodeId:r.id,url:r.url,number:r.number,state:r.state,body:r.body,bodyHTML:r.bodyHTML,title:r.title,createdAt:r.createdAt,updatedAt:r.updatedAt,head:ni(r.headRef),base:ni(r.baseRef),user:gt(r.author,e),merged:r.merged,mergeable:rn(r.mergeable),labels:r.labels.nodes,isDraft:r.isDraft,suggestedReviewers:ra(r.suggestedReviewers),milestone:tn(r.milestone)}}function ra(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(ia):[]}function ia(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function nc(t,e){return{event:Se.Reviewed,comments:t.comments.nodes.map(r=>sr(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:gt(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function na(t,e){const r=[];return t.forEach(i=>{const n=rc(i.__typename);switch(n){case Se.Commented:const s=i;r.push({htmlUrl:s.url,body:s.body,bodyHTML:s.bodyHTML,user:gt(s.author,e),event:n,canEdit:s.viewerCanUpdate,canDelete:s.viewerCanDelete,id:s.databaseId,graphNodeId:s.id,createdAt:s.createdAt});return;case Se.Reviewed:const a=i;r.push({event:n,comments:[],submittedAt:a.submittedAt,body:a.body,bodyHTML:a.bodyHTML,htmlUrl:a.url,user:gt(a.author,e),authorAssociation:a.authorAssociation,state:a.state,id:a.databaseId});return;case Se.Committed:const o=i;r.push({id:o.databaseId,event:n,sha:o.commit.oid,author:o.commit.author.user?gt(o.commit.author.user,e):{login:o.commit.committer.name},htmlUrl:o.url,message:o.commit.message,authoredDate:new Date(o.commit.authoredDate)});return;case Se.Merged:const u=i;r.push({id:u.databaseId,event:n,user:gt(u.actor,e),createdAt:u.createdAt,mergeRef:u.mergeRef.name,sha:u.commit.oid,commitUrl:u.commit.commitUrl,url:u.url,graphNodeId:u.id});return;case Se.Assigned:const c=i;r.push({id:c.databaseId,event:n,user:c.user,actor:c.actor});return;case Se.HeadRefDeleted:const h=i;r.push({id:h.id,event:n,actor:h.actor,createdAt:h.createdAt,headRef:h.headRefName});return;default:break}}),r}function sc(t){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:ac(t.user.contributionsCollection)}}function ac(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(i=>{e.push({createdAt:new Date(i.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function si(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:nt.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:nt.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:nt.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:nt.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:nt.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:nt.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:nt.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:nt.icons.reactions.EYES}]}function oc(t){const e=[];return t.forEach(r=>{var i,n;Il(r)&&e.push({login:r.author.login,name:r.author.name||""}),Ii(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login}),Al(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login})}),e}function lc(t){return t&&t.repository.viewerPermission&&Object.values(He).includes(t.repository.viewerPermission)?t.repository.viewerPermission:He.Unknown}function sa(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function aa(t,e,r){const i=e.filter(Ii).filter(a=>a.state!=="PENDING");let n=[];const s=new Map;s.set(r.login,!0);for(let a=i.length-1;a>=0;a--){const o=i[a].user;s.get(o.login)||(s.set(o.login,!0),n.push({reviewer:o,state:i[a].state}))}return t.forEach(a=>{if(!s.get(a.login))n.push({reviewer:a,state:"REQUESTED"});else{const o=n.find(u=>u.reviewer.login===a.login);o.state="REQUESTED"}}),n=n.sort((a,o)=>a.state==="REQUESTED"&&o.state!=="REQUESTED"?1:o.state==="REQUESTED"&&a.state!=="REQUESTED"||a.reviewer.login.toLowerCase()<o.reviewer.login.toLowerCase()?-1:1),n}function uc(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function sn(){return l.env.remoteName==="codespaces"&&l.env.uiKind===l.UIKind.Web}var cc=Object.defineProperty,Oe=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ai=class{constructor(t,e,r,i=!1){Oe(this,"id"),Oe(this,"graphNodeId"),Oe(this,"number"),Oe(this,"title"),Oe(this,"html_url"),Oe(this,"state",Re.Open),Oe(this,"author"),Oe(this,"assignees"),Oe(this,"createdAt"),Oe(this,"updatedAt"),Oe(this,"milestone"),Oe(this,"githubRepository"),Oe(this,"remote"),Oe(this,"item"),Oe(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=r,i||this.update(r)}get isOpen(){return this.state===Re.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=l.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(i){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=Re.Open:this.state=Re.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:i}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return i.updatePullRequest.pullRequest}catch(e){throw new Error(A(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){$.debug(`Fetch issue comments of PR #${this.number} - enter`,ai.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return $.debug(`Fetch issue comments of PR #${this.number} - done`,ai.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:i}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return ea(i.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:i}=await this.githubRepository.ensure(),{data:n}=await r({mutation:i.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return ea(n.updateIssueComment.issueComment)}catch(r){throw new Error(A(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(A(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){$.debug(`Fetch timeline events of issue #${this.number} - enter`,ai.ID);const t=this.githubRepository,{query:e,remote:r,schema:i}=await t.ensure();try{const{data:n}=await e({query:i.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),s=n.repository.pullRequest.timelineItems.nodes;return na(s,t)}catch(n){return console.log(n),[]}}async addCommentReaction(t,e){const r=si().reduce((a,o)=>(a[o.label]=o.title,a),{}),{mutate:i,schema:n}=await this.githubRepository.ensure(),{data:s}=await i({mutation:n.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});return s}async deleteCommentReaction(t,e){const r=si().reduce((a,o)=>(a[o.label]=o.title,a),{}),{mutate:i,schema:n}=await this.githubRepository.ensure(),{data:s}=await i({mutation:n.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});return s}};let Fe=ai;Oe(Fe,"ID","IssueModel");var dc=Object.defineProperty,Qe=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Xe=class extends Fe{constructor(t,e,r,i,n){super(e,r,i,!0);Qe(this,"isDraft"),Qe(this,"localBranchName"),Qe(this,"mergeBase"),Qe(this,"suggestedReviewers"),Qe(this,"_hasPendingReview",!1),Qe(this,"_onDidChangePendingReviewState",new l.EventEmitter),Qe(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),Qe(this,"isActive"),Qe(this,"_telemetry"),Qe(this,"head"),Qe(this,"base"),this._telemetry=t,this.isActive=!!n,this.update(i)}get isMerged(){return this.state===Re.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=Re.Open:this.state=this.item.merged?Re.Merged:Re.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.head&&(this.head=new ms(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.base&&(this.base=new ms(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,l.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&l.commands.executeCommand("vscode.open",l.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(ht.Approve,t):this.createReview(ht.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(ht.RequestChanges,t):this.createReview(ht.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),Ht(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:i}=await this.githubRepository.ensure(),{data:n}=await r.pulls.createReview({owner:i.owner,repo:i.repositoryName,pull_number:this.number,event:t,body:e});return tc(n,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:i,schema:n}=await this.githubRepository.ensure();if(r){const{data:s}=await i({mutation:n.SubmitReview,variables:{id:r,event:t||ht.Comment,body:e}});return this.hasPendingReview=!1,await this.updateDraftModeContext(),nc(s.submitPullRequestReview.pullRequestReview,this.githubRepository)}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),i=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:i}}})}catch(n){$.appendLine(n)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:i}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return i.node.reviews.nodes[0].id}catch(i){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:i}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:n,databaseId:s}=i.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),{deletedReviewId:s,deletedReviewComments:n.nodes.map(a=>sr(a,!1))}}async startReview(t,e){var r;const{mutate:i,schema:n}=await this.githubRepository.ensure(),{data:s}=await i({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,comments:t,commitOID:e||((r=this.head)==null?void 0:r.sha)}}});if(!s)throw new Error("Failed to start review");return this.hasPendingReview=!0,await this.updateDraftModeContext(),sr(s.addPullRequestReview.pullRequestReview.comments.nodes[0],!1)}async createReviewComment(t,e,r,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const n=await this.getPendingReviewId();if(n)return this.addCommentToPendingReview(n,t,{path:e,position:r},i);const s=this.githubRepository,{octokit:a,remote:o}=await s.ensure();try{const u=await a.pulls.createReviewComment({owner:o.owner,repo:o.repositoryName,pull_number:this.number,body:t,commit_id:i||this.head.sha,path:e,position:r});return this.addCommentPermissions(Xs(u.data,s))}catch(u){throw A(u)}}async createReviewCommentReply(t,e){const r=await this.getPendingReviewId();if(r)return this.addCommentToPendingReview(r,t,{inReplyTo:e.graphNodeId});const{octokit:i,remote:n}=await this.githubRepository.ensure();try{const s=await i.pulls.createReplyForReviewComment({owner:n.owner,repo:n.repositoryName,pull_number:this.number,body:t,comment_id:Number(e.id)});return this.addCommentPermissions(Xs(s.data,this.githubRepository))}catch(s){throw A(s)}}async addCommentToPendingReview(t,e,r,i){var n;const{mutate:s,schema:a}=await this.githubRepository.ensure(),{data:o}=await s({mutation:a.AddComment,variables:{input:{pullRequestReviewId:t,body:e,...r,commitOID:i||((n=this.head)==null?void 0:n.sha)}}}),{comment:u}=o.addPullRequestReviewComment;return sr(u,!1)}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await l.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}addCommentPermissions(t){const e=this.githubRepository.isCurrentUser(t.user.login),r=t.position!==null;return t.canEdit=e&&r,t.canDelete=e&&r,t}async editReviewComment(t,e){const{mutate:r,schema:i}=await this.githubRepository.ensure(),{data:n}=await r({mutation:i.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});return sr(n.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved)}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(A(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(n=>It(n,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:i}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return i.repository.pullRequest.reviewThreads.nodes.map(s=>s.comments.nodes.map(a=>sr(a,s.isResolved),t)).reduce((s,a)=>s.concat(a),[]).sort((s,a)=>s.createdAt>a.createdAt?1:-1)}catch(i){return $.appendLine(`Failed to get pull request review comments: ${i}`),[]}}async getCommits(){try{$.debug(`Fetch commits of PR #${this.number} - enter`,Xe.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return $.debug(`Fetch commits of PR #${this.number} - done`,Xe.ID),r.data}catch(t){return l.window.showErrorMessage(`Fetching commits failed: ${A(t)}`),[]}}async getCommitChangedFiles(t){try{$.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,Xe.ID);const{octokit:e,remote:r}=await this.githubRepository.ensure(),i=await e.repos.getCommit({owner:r.owner,repo:r.repositoryName,ref:t.sha});return $.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,Xe.ID),i.data.files.filter(n=>!!n.patch)}catch(e){return l.window.showErrorMessage(`Fetching commit file changes failed: ${A(e)}`),[]}}async getFile(t,e){var r;const{octokit:i,remote:n}=await this.githubRepository.ensure(),s=await i.repos.getContent({owner:n.owner,repo:n.repositoryName,path:t,ref:e});if(Array.isArray(s.data))throw new Error(`Unexpected array response when getting file ${t}`);const a=(r=s.data.content)!=null?r:"";return Buffer.from(a,s.data.encoding).toString()}async getTimelineEvents(){$.debug(`Fetch timeline events of PR #${this.number} - enter`,Xe.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:i}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),n=i.repository.pullRequest.timelineItems.nodes,s=na(n,this.githubRepository);return await this.addReviewTimelineEventComments(s),s}catch(i){return console.log(i),[]}}async addReviewTimelineEventComments(t){const e=t.filter(Ii),r=await this.getReviewComments(),i=e.reduce((u,c)=>(u[c.id]=c,c.comments=[],u),{}),n=r.reduce((u,c)=>(u[c.id]=c,u),{}),s=[];let a=r.length;for(;a-- >0;){const u=r[a];if(!u.inReplyToId){s.unshift(u);continue}const c=n[u.inReplyToId];c.childComments=c.childComments||[],c.childComments=[u,...u.childComments||[],...c.childComments]}s.forEach(u=>{const c=i[u.pullRequestReviewId];c&&(c.comments=c.comments.concat(u).concat(u.childComments||[]))});const o=e.filter(u=>u.state.toLowerCase()==="pending")[0];o&&(o.comments=r.filter(u=>u.isDraft))}async getStatusChecks(){const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),n=(await t({query:r.GetChecks,variables:{owner:e.owner,name:e.repositoryName,number:this.number}})).data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return n?{state:n.state.toLowerCase(),statuses:n.contexts.nodes.map(s=>{var a,o,u,c;return Ml(s)?{id:s.id,url:(a=s.checkSuite.app)==null?void 0:a.url,avatar_url:(o=s.checkSuite.app)==null?void 0:o.logoUrl,state:((u=s.conclusion)==null?void 0:u.toLowerCase())||"pending",description:s.title,context:s.name,target_url:s.detailsUrl}:{id:s.id,url:s.targetUrl,avatar_url:s.avatarUrl,state:(c=s.state)==null?void 0:c.toLowerCase(),description:s.description,context:s.context,target_url:s.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const i=await e.getFileChangesInfo(),n=e.mergeBase||e.base.sha,a=(await Fi(i,t.repository,n)).find(h=>h.fileName===r.path||h.previousFileName===r.path);if(!a)throw new Error("Can't find matching file");let o,u;if(e.equals(t.activePullRequest)){const h=l.Uri.file(b.resolve(t.repository.rootUri.fsPath,a.fileName));o=a.status===ne.DELETE?Ct(h,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):h,u=Ct(h,a.status===ne.RENAME?a.previousFileName:a.fileName,void 0,a.status===ne.ADD?"":n,!1,{base:!0},t.repository.rootUri)}else{const h=e.head.sha,w=a.status===ne.RENAME?a.previousFileName:a.fileName;o=Jt(l.Uri.file(b.resolve(t.repository.rootUri.fsPath,a.fileName)),e,a.baseCommit,h,a.fileName,!1,a.status),u=Jt(l.Uri.file(b.resolve(t.repository.rootUri.fsPath,w)),e,a.baseCommit,h,a.fileName,!0,a.status)}const c=r.path.split("/");l.commands.executeCommand("vscode.diff",u,o,`${c[c.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){$.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,Xe.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const a=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(Ht(a.data,t))}if(this.item.merged){const a=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,a.data}const{data:i}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=i.merge_base_commit.sha;const n=300;let s=[];return i.files.length>=n?($.debug(`More than ${n} files changed, fetching all file changes of PR #${this.number}`,Xe.ID),s=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):s=i.files,$.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${s.length} `,Xe.ID),s}async getMergability(){try{$.debug(`Fetch pull request mergeability ${this.number} - enter`,Xe.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:i}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return $.debug(`Fetch pull request mergeability ${this.number} - done`,Xe.ID),rn(i.repository.pullRequest.mergeable)}catch(t){return $.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),Tt.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}};let vt=Xe;Qe(vt,"ID","PullRequestModel");var mc=Object.defineProperty,Vt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function an(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class oa{constructor(){Vt(this,"_webview"),Vt(this,"_disposables",[]),Vt(this,"_waitForReady"),Vt(this,"_onIsReady",new l.EventEmitter),Vt(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;(e=this._webview)==null||e.onDidReceiveMessage(async r=>{await this._onDidReceiveMessage(r)},null,this._disposables)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var i;const n={seq:e.req,res:r};(i=this._webview)==null||i.postMessage(n)}async _throwError(e,r){var i;const n={seq:e.req,err:r};(i=this._webview)==null||i.postMessage(n)}dispose(){this._disposables.forEach(e=>e.dispose())}}class la extends oa{constructor(){super(...arguments);Vt(this,"viewType"),Vt(this,"_view")}show(){this._view?this._view.show():l.commands.executeCommand(`${this.viewType}.focus`)}}var hc=Object.defineProperty,wt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?hc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const at=class extends oa{constructor(t,e,r,i,n=at._viewType){super();this._extensionUri=t,wt(this,"_panel"),wt(this,"_disposables",[]),wt(this,"_descriptionNode"),wt(this,"_item"),wt(this,"_folderRepositoryManager"),wt(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=i,this._panel=l.window.createWebviewPanel(n,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[l.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(s=>{if(this._folderRepositoryManager&&this._item){const a=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:a})}},null,this._disposables)}static async createOrShow(t,e,r,i=!1){const n=i?l.ViewColumn.Beside:l.window.activeTextEditor?l.window.activeTextEditor.viewColumn:l.ViewColumn.One;if(at.currentPanel)at.currentPanel._panel.reveal(n,!0);else{const s=`Issue #${r.number.toString()}`;at.currentPanel=new at(t,n||l.ViewColumn.Active,s,e)}await at.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,i,n]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,$.debug("pr.initialize",at.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:i,repositoryDefaultBranch:n,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{l.window.showErrorMessage(A(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":l.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(n,s){return e=(await n.getLabels(s)).filter(o=>!s.item.labels.some(u=>u.name===o.name)),e.map(o=>({label:o.name}))}const i=await l.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(i&&i.length){await this._item.addLabels(i.map(s=>s.label));const n=i.map(s=>e.find(a=>a.name===s.label));this._item.item.labels=this._item.item.labels.concat(...n),this._replyMessage(t,{added:n})}}catch(e){l.window.showErrorMessage(A(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}webviewDebug(t){$.debug(t.args,at.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(`Editing description failed: ${A(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(`Editing title failed: ${A(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),l.window.showErrorMessage(A(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){l.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),l.window.showErrorMessage(A(r))})})}close(t){l.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){at.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose();this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=an(),r=l.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let oi=at;wt(oi,"ID","PullRequestOverviewPanel"),wt(oi,"currentPanel"),wt(oi,"_viewType","IssueOverview");var pc=Object.defineProperty,ar=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ot=class extends oi{constructor(t,e,r,i){super(t,e,r,i,ot._viewType);ar(this,"_repositoryDefaultBranch"),ar(this,"_existingReviewers",[]),ar(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),Ad(n=>{n&&this._item.update(n),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables)}static async createOrShow(t,e,r,i=!1){const n=i?l.ViewColumn.Beside:l.window.activeTextEditor?l.window.activeTextEditor.viewColumn:l.ViewColumn.One;if(ot.currentPanel)ot.currentPanel._panel.reveal(n,!0);else{const s=`Pull Request #${r.number.toString()}`;ot.currentPanel=new ot(t,n||l.ViewColumn.Active,s,e)}await ot.currentPanel.update(e,r)}set _currentPanel(t){ot.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t)]).then(e=>{const[r,i,n,s,a,o]=e;if(!r)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._repositoryDefaultBranch=n,this._panel.title=`Pull Request #${t.number.toString()}`;const u=t.equals(this._folderRepositoryManager.activePullRequest),c=o.hasWritePermission,h=o.mergeMethodsAvailability,w=c||this._item.canEdit(),R=l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),q=ua(h,R);this._existingReviewers=aa(a,i,r.author);const U=r.base&&r.head&&!r.base.repositoryCloneUrl.equals(r.head.repositoryCloneUrl)&&sn();$.debug("pr.initialize",ot.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:r.number,title:r.title,url:r.html_url,createdAt:r.createdAt,body:r.body,bodyHTML:r.bodyHTML,labels:r.item.labels,author:{login:r.author.login,name:r.author.name,avatarUrl:r.userAvatar,url:r.author.url},state:r.state,events:i,isCurrentlyCheckedOut:u,base:r.base&&r.base.label||"UNKNOWN",head:r.head&&r.head.label||"UNKNOWN",repositoryDefaultBranch:n,canEdit:w,hasWritePermission:c,status:s||{statuses:[]},mergeable:r.item.mergeable,reviewers:this._existingReviewers,isDraft:r.isDraft,mergeMethodsAvailability:h,defaultMergeMethod:q,isIssue:!1,milestone:r.milestone,assignees:r.assignees,showMergeOnGitHub:U}})}).catch(e=>{l.window.showErrorMessage(A(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink(t);case"pr.openOnGitHub":return Dr(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){if(!t)return[];const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],i=new Set([this._item.author.login,...this._existingReviewers.map(s=>s.reviewer.login)]),n=[];for(const s of t){const{login:a,name:o,isAuthor:u,isCommenter:c}=s;if(i.has(a))continue;const h=u&&c?"Recently edited and reviewed changes to these files":u?"Recently edited these files":c?"Recently reviewed changes to these files":"Suggested reviewer";n.push({label:a,description:o,detail:h,reviewer:s}),i.add(a)}for(const s of r)i.has(s.login)||n.push({label:s.login,description:s.name,reviewer:s});return n}getAssigneesQuickPickItems(t,e){if(!e)return[];const r=new Set([...this._item.assignees.map(n=>n.login)]),i=[];for(const n of e){const{login:s,name:a,isAuthor:o,isCommenter:u}=n;if(r.has(s))continue;const c=o&&u?"Recently edited and reviewed changes to these files":o?"Recently edited these files":u?"Recently reviewed changes to these files":"Suggested reviewer";i.push({label:s,description:a,detail:c,assignee:n}),r.add(s)}for(const n of t)r.has(n.login)||i.push({label:n.login,description:n.name,assignee:n});return i}async addReviewers(t){try{const e=await l.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(e){await this._item.requestReview(e.map(i=>i.label));const r=e.map(i=>({reviewer:i.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(r),this._replyMessage(t,{added:r})}}catch(e){l.window.showErrorMessage(A(e))}}async addMilestone(t){try{async function e(i){return(await i.getMilestones()).items.map(n=>({label:n.milestone.title,id:n.milestone.id,milestone:n.milestone}))}const r=await l.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){l.window.showErrorMessage(A(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}async addAssignees(t){try{const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],i=await l.window.showQuickPick(this.getAssigneesQuickPickItems(r,[]),{canPickMany:!0,matchOnDescription:!0});if(i){const n=i.map(s=>s.assignee);this._item.assignees=this._item.assignees.concat(n),await this._item.updateAssignees(n.map(s=>s.login)),this._replyMessage(t,{added:n})}}catch(e){l.window.showErrorMessage(A(e))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}async removeAssignee(t){try{await this._item.deleteAssignees(t.args);const e=this._item.assignees.findIndex(r=>r.login===t.args);this._item.assignees.splice(e,1),this._replyMessage(t,{})}catch(e){l.window.showErrorMessage(A(e))}}async applyPatch(t){try{const e=t.args.comment,i=/```diff\n([\s\S]*)\n```/g.exec(e.body),n=b.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),s=new TextEncoder,a=l.Uri.parse(n);await l.workspace.fs.writeFile(a,s.encode(i[1])),await this._folderRepositoryManager.repository.apply(n,!0),await l.workspace.fs.delete(a)}catch(e){$.appendLine(`Applying patch failed: ${e}`),l.window.showErrorMessage(`Applying patch failed: ${A(e)}`)}}async openDiff(t){try{const e=t.args.comment;return vt.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){$.appendLine(`Open diff view failed: ${A(e)}`,ot.ID)}}checkoutPullRequest(t){l.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:i}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,i).then(n=>{l.commands.executeCommand("pr.refreshList"),n.merged||l.window.showErrorMessage(`Merging PR failed: ${n.message}`),this._replyMessage(t,{state:n.merged?Re.Merged:Re.Open})}).catch(n=>{l.window.showErrorMessage(`Unable to merge pull request. ${A(n)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const n=this._item.head.ref;this._repositoryDefaultBranch===this._item.head.ref||r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${n}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const n=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!n});const s=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!s})}if(!r.length){l.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const i=await l.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0});if(i){const n=this._item.equals(this._folderRepositoryManager.activePullRequest),s=i.map(async a=>{switch(a.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(n){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await l.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(e.remote)}});await Promise.all(s),this.refreshPanel(),l.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{l.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{l.window.showErrorMessage(`Unable to set PR ready for review. ${A(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),l.commands.executeCommand("pr.refreshList")},e=>{l.window.showErrorMessage(`Approving pull request failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{l.window.showErrorMessage(`Requesting changes failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}submitReview(t){this._item.submitReview(ht.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{l.window.showErrorMessage(`Submitting review failed. ${A(e)}`),this._throwError(t,`${A(e)}`)})}async copyPrLink(t){await l.env.clipboard.writeText(this._item.html_url),l.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let bt=ot;ar(bt,"ID","PullRequestOverviewPanel"),ar(bt,"currentPanel"),ar(bt,"_viewType","PullRequestOverview");function ua(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(i=>t[i])}var fc=Object.defineProperty,ca=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gc extends la{constructor(e,r,i){super();this._extensionUri=e,this._folderRepositoryManager=r,this._item=i,ca(this,"viewType","github:activePullRequest"),ca(this,"_existingReviewers",[])}resolveWebviewView(e,r,i){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":l.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return Dr(this._item,this._item._telemetry)}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests()]).then(r=>{var i,n,s,a;const[o,u,c,h]=r;if(!o)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=o,this._view.title=`${o.title} #${e.number.toString()}`;const w=e.equals(this._folderRepositoryManager.activePullRequest),R=u.hasWritePermission,q=u.mergeMethodsAvailability,V=R||this._item.canEdit(),U=l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),z=ua(q,U),K=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=aa(h!=null?h:[],c!=null?c:[],o.author);const re=o.base&&o.head&&!o.base.repositoryCloneUrl.equals(o.head.repositoryCloneUrl)&&sn();this._postMessage({command:"pr.initialize",pullrequest:{number:o.number,title:o.title,url:o.html_url,createdAt:o.createdAt,body:o.body,bodyHTML:o.bodyHTML,labels:o.item.labels,author:{login:o.author.login,name:o.author.name,avatarUrl:o.userAvatar,url:o.author.url},state:o.state,isCurrentlyCheckedOut:w,base:(n=(i=o.base)==null?void 0:i.label)!=null?n:"UNKNOWN",head:(a=(s=o.head)==null?void 0:s.label)!=null?a:"UNKNOWN",canEdit:V,hasWritePermission:R,mergeable:o.item.mergeable,isDraft:o.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:q,defaultMergeMethod:z,isIssue:!1,isAuthor:K.login===o.author.login,reviewers:this._existingReviewers,showMergeOnGitHub:re}})}).catch(r=>{l.window.showErrorMessage(A(r))})}close(e){l.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(i=>e.user.login===i.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),l.commands.executeCommand("pr.refreshList")},r=>{l.window.showErrorMessage(`Approving pull request failed. ${A(r)}`),this._throwError(e,`${A(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{l.window.showErrorMessage(`Requesting changes failed. ${A(r)}`),this._throwError(e,`${A(r)}`)})}submitReview(e){this._item.submitReview(ht.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{l.window.showErrorMessage(`Submitting review failed. ${A(r)}`),this._throwError(e,`${A(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),i=[];if(this._item.isResolved()){const s=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||i.push({label:`Delete remote branch ${this._item.remote.remoteName}/${s}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const s=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");i.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!s});const a=l.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&i.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!a})}if(!i.length){l.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const n=await l.window.showQuickPick(i,{canPickMany:!0,ignoreFocusOut:!0});if(n){const s=this._item.equals(this._folderRepositoryManager.activePullRequest),a=n.map(async o=>{switch(o.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(s){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await l.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.cleanAll");else return;const u=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(u)}return this._folderRepositoryManager.repository.deleteBranch(r.branch,!0);case"remote":return this._folderRepositoryManager.repository.removeRemote(r.remote)}});await Promise.all(a),l.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch"})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{l.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{l.window.showErrorMessage(`Unable to set PR ready for review. ${A(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:i,method:n}=e.args;if(await l.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:Re.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,i,n).then(a=>{l.commands.executeCommand("pr.refreshList"),a.merged||l.window.showErrorMessage(`Merging PR failed: ${a.message}`),this._replyMessage(e,{state:a.merged?Re.Merged:Re.Open})}).catch(a=>{l.window.showErrorMessage(`Unable to merge pull request. ${A(a)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=an(),r=l.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class vc{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var i;const n=e.line.indexOf("https://github.com");if(n===-1)return[];const s=e.line.substring(n),a=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),o=s.match(a);if(o&&o.length===4){const u=o[1],c=o[2],h=o[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(R=>R.remote.owner===u&&R.remote.repositoryName===c)>-1&&((i=this.reviewManager.repository.state.HEAD)==null?void 0:i.name)===h)return[{startIndex:n,length:e.line.length-n,tooltip:"Create a Pull Request",url:s}]}return[]}handleTerminalLink(e){l.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(r=>{r==="Yes"?this.reviewManager.createPullRequest():l.env.openExternal(l.Uri.parse(e.url))})}}var wc=oe(4098),on=oe.n(wc);const da=void 0;let ma=!1;const ha=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(ma)return l.Uri.parse(e);if(await l.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return ma=!0,l.Uri.parse(e)}const r=t instanceof l.Uri?t:l.Uri.parse(t.host);return r.authority==="github.com"?l.Uri.parse("https://api.github.com"):l.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof l.Uri?t:l.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var bc=Object.defineProperty,yc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ln{constructor(){yc(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null)return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,i]=await ln.getOptions(e,"HEAD","/rate_limit");let n=!1;try{return n=(await on()(r.toString(),i)).headers["x-github-request-id"]!==void 0,n}catch(s){return $.appendLine(`No response from host ${e}: ${s.message}`,"GitHubServer"),n}finally{$.debug(`Host ${e} is associated with GitHub: ${n}`,"GitHubServer"),this._servers.set(e.authority,n)}}static async getOptions(e,r="GET",i,n){const s={"user-agent":"GitHub VSCode Pull Requests"};n&&(s.authorization=`token ${n}`);const a=l.Uri.joinPath(await ha.getApiHost(e),ha.getApiPath(e,i));return[a,{hostname:a.authority,port:443,method:r,headers:s,agent:da}]}}var kc=oe(1336),_c=oe(9593),Rc=oe.n(_c),li=oe(7228);const pa=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function fa(t){return t.match(pa)}function Ec(t){return!!fa(t.body)}async function ga(t,e,r=!0){const i=t[2],n=t[3],s=t[5],a=Number(t[6])-1,o=t[8]?Number(t[8])-1:a;let u;for(const h of e.folderManagers){const w=h.getGitHubRemotes();for(const R of w)if(i.toLowerCase()===R.owner.toLowerCase()&&n.toLowerCase()===R.repositoryName.toLowerCase()){u=h;break}if(u)break}if(!u)return;const c=l.Uri.joinPath(u.repository.rootUri,s);try{await l.workspace.fs.stat(c)}catch(h){return}return{file:c,start:a,end:o}}async function Cc(t,e){const r=fa(t.body);if(!r){l.window.showInformationMessage("Issue has no link.");return}const i=await ga(r,e,!1);if(!i)return l.env.openExternal(l.Uri.parse(r[0]));const n=await l.workspace.openTextDocument(i==null?void 0:i.file),s=n.lineAt(i.end<n.lineCount?i.end:n.lineCount-1),a=new l.Range(i.start,0,i.end,s.text.length);return l.window.showTextDocument(i.file,{selection:a})}var Sc=Object.defineProperty,va=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const gf=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Sr=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,un=/\@([^\s]+)/,Tc=150,Ce="githubIssues",or="queries",Pc="default",wa="workingIssueBranch",cn="issueBranchTitle",ba="useBranchForIssues",Nc="workingIssueFormatScm";function dn(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function Dc(t,e,r,i){var n;const s=(n=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:n.get(r);if(s)return s;{let a,o,u;const c=e.getGitHubRemotes();for(const h of c){if(i)a=i.owner?i.owner:h.owner,o=i.name?i.name:h.repositoryName,u=i.issueNumber;else{const w=dn(r.match(Sr));w&&(!w.name||!w.owner)&&(a=h.owner,o=h.repositoryName)}if(a&&o&&u!==void 0){let w=await e.resolveIssue(a,o,u,!!i.commentNumber);if(w||(w=await e.resolvePullRequest(a,o,u)),w){let R;return t.resolvedIssues.has(e.repository.rootUri.path)?R=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,R=new(Rc())(50)),R.set(r,w),w}}}}}function Fc(t,e){let r;return t.commitContributions.forEach(i=>{e.toLowerCase()===i.repoNameWithOwner.toLowerCase()&&(r=i.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class Ic extends l.CompletionItem{constructor(){super(...arguments);va(this,"login"),va(this,"uri")}}function mn(t,e){const r=new l.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const i=Fc(e,t.owner+"/"+t.repo);return(e.location||i)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),i&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${i}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function Ac(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function Mc(t,e){const r=Ac(t);let i="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(i="000000"),`<span style="color:#${i};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function ya(t,e,r){let i=t.search(e),n=0;for(;i>=0&&i<t.length;){let s;if(i===0||t.charAt(i-1)!=="&"){const o=t.substring(i).match(e);if(o){const u=await r(o);u&&(s=t.slice(0,i)+u,t=s+t.slice(i+o[0].length))}}n=s?s.length:i+1;const a=t.substring(n).search(e);i=a>0?n+a:a}return t}function ka(t,e){return ya(t,Sr,async r=>{const i=dn(r);if(i){const n=Ea(i);return(!i.owner||!i.name)&&(i.owner=e.remote.owner,i.name=e.remote.repositoryName),`[${n}](https://github.com/${i.owner}/${i.name}/issues/${i.issueNumber})`}})}async function xc(t,e){return ya(t,pa,async r=>{const i=await ga(r,e);if(i){const n=await l.workspace.openTextDocument(i==null?void 0:i.file),s=n.lineAt(i.end<n.lineCount?i.end:n.lineCount-1),a=[i.file,{selection:{start:{line:i.start,character:0},end:{line:i.end,character:s.text.length}}}],o=l.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(a))}`);return`[${r[0]}](${o} "Open ${i.file.fsPath}")`}})}const ui=200;async function hn(t,e,r,i){const n=new l.MarkdownString(void 0,!0);n.isTrusted=!0;const s=new Date(t.createdAt),a=`${t.remote.owner}/${t.remote.repositoryName}`;n.appendMarkdown(`[${a}](https://github.com/${a}) on ${s.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const o=li.parse(t.title,{renderer:new gn}).trim();n.appendMarkdown(`${qc(t,e)} **${o}** [#${t.number}](${t.html_url})  
`);let u=li.parse(t.body,{renderer:new gn});if(n.appendMarkdown(`  
`),u=u.length>ui?u.substr(0,ui)+"...":u,u=await ka(u,t),u=await xc(u,r),n.appendMarkdown(u+`  
`),n.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(c=>{n.appendMarkdown(`[${Mc(c.color,c.name)}](https://github.com/${a}/labels/${encodeURIComponent(c.name)}) `)}),t.item.comments&&i){for(const c of t.item.comments)if(c.databaseId===i){n.appendMarkdown(`  \r
\r
---\r
`),n.appendMarkdown(`&nbsp;  
`),n.appendMarkdown(`![Avatar](${c.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${c.author.login}** commented`),n.appendMarkdown(`&nbsp;  
`);let h=li.parse(c.body.length>ui?c.body.substr(0,ui)+"...":c.body,{renderer:new gn});h=await ka(h,t),n.appendMarkdown(h)}}return n}function Oc(t){switch(t.state){case Re.Open:return t instanceof vt?"$(git-pull-request)":"$(issues)";case Re.Closed:return t instanceof vt?"$(git-pull-request)":"$(issue-closed)";case Re.Merged:return"$(git-merge)"}}function qc(t,e){if(t instanceof vt)return Oc(t);switch(t.state){case Re.Open:return'<span style="color:#22863a;">$(issues)</span>';case Re.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const _a="HEAD",Uc=1,Lc=2,$c=3,Ra=4,ci=new Map([["upstream",Uc],["ups",Lc],["origin",$c]]);async function Gc(t,e){var r,i,n;const s=((r=t.state.HEAD)==null?void 0:r.upstream)&&!ci.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let a;const o=t.state.remotes.map(w=>({name:w.name,remote:w})).filter(w=>(w.name===s&&(a=w.remote),ci.has(w.name))).sort((w,R)=>{var q,V;const U=(q=ci.get(w.name))!=null?q:Ra,z=(V=ci.get(R.name))!=null?V:Ra;return U-z});s&&o.push({name:s,remote:a});const u=[_a];((i=t.state.HEAD)==null?void 0:i.name)&&t.state.HEAD.name!==_a&&u.unshift((n=t.state.HEAD)==null?void 0:n.name);let c,h;for(let w=0;w<u.length&&!c;w++)for(let R=0;R<o.length&&!c;R++){const q=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${o[R].name}/${u[w]}`,count:1})).filter(V=>V.remote&&V.name);q&&q.length>0&&(c=q[0],h=o[R].remote)}return h}async function pn(t,e){let r,i;if(!e&&l.window.activeTextEditor)r=l.window.activeTextEditor.document,i=l.window.activeTextEditor.selection;else if(e)r=e.document,i=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from."};const n=sa(t,r.uri);if(!n)return{permalink:void 0,error:"The current file isn't part of repository."};const s=await n.log({maxEntries:1,path:r.uri.fsPath});if(s.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file."};const a=new Promise(c=>{var h;if((h=n.state.HEAD)==null?void 0:h.upstream)for(const w of n.state.remotes)n.state.HEAD.upstream.remote===w.name&&c(w);c(void 0)});let o=await Promise.race([Gc(n,s[0]),new Promise(c=>{setTimeout(()=>{c(a)},2e3)})]);if((!o||!o.fetchUrl)&&(o=await a,!o||!o.fetchUrl))return{permalink:void 0,error:"There is no suitable remote."};const u=r.uri.path.substring(n.rootUri.path.length);return{permalink:`https://github.com/${new St(o.fetchUrl).nameWithOwner}/blob/${s[0].hash}${u}#L${i.start.line+1}-L${i.end.line+1}`,error:void 0}}function Hc(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const Vc=/\$\{(.*?)\}/g;async function di(t,e,r,i){return t.replace(Vc,(n,s)=>{switch(s){case"user":return i||n;case"issueNumber":return e?`${e.number}`:n;case"issueNumberLabel":return e?`${lr(e,r)}`:n;case"issueTitle":return e?e.title:n;case"repository":return r?r.repo:n;case"owner":return r?r.owner:n;case"sanitizedIssueTitle":return e?Hc(e.title):n;default:return n}})}function lr(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),Ea(r)}function Ea(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function Ca(t,e,r){var i;const n=await((i=e.currentIssue(t.repository.rootUri))==null?void 0:i.getCommitMessage());if(n)return t.repository.commit(n,{all:r})}const Sa="Commit Staged",Ta="Commit All";async function Bc(t,e,r){var i,n;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const s=[];switch(t.repository.state.indexChanges&&s.push(Sa),t.repository.state.workingTreeChanges&&s.push(Ta),await l.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...s)){case Sa:{await Ca(t,r,!1);break}case Ta:{await Ca(t,r,!0);break}default:return!1}}if((i=t.repository.state.HEAD)==null?void 0:i.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let s;return t.repository.state.remotes.length===1?s=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(s=await l.window.showQuickPick(t.repository.state.remotes.map(a=>a.name),{placeHolder:"Remote to push to"})),s?(await t.repository.push(s,(n=t.repository.state.HEAD)==null?void 0:n.name,!0),await e.createPullRequest(void 0),!0):(l.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function fn(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await l.languages.getTokenInformationAtPosition(t,e)).type!==l.StandardTokenType.Comment)}async function Pa(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:fn(t,e)}function Na(t){const e=new kc.URLSearchParams(t.query).get("rootUri");return e?l.Uri.parse(e):void 0}class gn extends li.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,i,n){return e+" "}hr(){return""}list(e,r,i){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,i){return""}text(e){return e}link(e,r,i){return i+" "}}var jc=Object.defineProperty,Qc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Da="github-pr-remote",Fa="github-pr-owner-number",Ia=/branch\.(.+)\.github-pr-owner-number/,Wc=/branch\.(.+)\.remote/,fe=class{static async checkoutFromFork(t,e,r){const i=await fe.calculateUniqueBranchNameForPR(t,e);r||($.appendLine(`Branch ${i} is from a fork. Create a remote first.`,fe.ID),r=await fe.createRemote(t,e.remote,e.head.repositoryCloneUrl));const n=`${e.head.ref}:${i}`;$.debug(`Fetch ${r}/${e.head.ref}:${i} - start`,fe.ID),await t.fetch(r,n,1),$.debug(`Fetch ${r}/${e.head.ref}:${i} - done`,fe.ID),await t.checkout(i),await t.setBranchUpstream(i,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),fe.associateBranchWithPullRequest(t,e,i)}static async fetchAndCheckout(t,e,r){if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=fe.getHeadRemoteForPullRequest(e,r),n=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||n)return fe.checkoutFromFork(t,r,i&&i.remoteName);const s=r.head.ref,a=i.remoteName;let o;try{if(o=await t.getBranch(s),$.debug(`Checkout ${s}`,fe.ID),await t.checkout(s),!o.upstream){const u=`refs/remotes/${a}/${s}`;await t.setBranchUpstream(s,u)}o.behind!==void 0&&o.behind>0&&o.ahead===0&&($.debug("Pull from upstream",fe.ID),await t.pull())}catch(u){$.appendLine(`Branch ${a}/${s} doesn't exist on local disk yet.`,fe.ID);const c=`refs/remotes/${a}/${s}`;$.appendLine(`Fetch tracked branch ${c}`,fe.ID),await t.fetch(a,s,1);const h=await t.getBranch(c);await t.createBranch(s,!0,h.commit),await t.setBranchUpstream(s,c),await this.unshallow(t)}await fe.associateBranchWithPullRequest(t,r,s)}static async unshallow(t){try{await t.pull(!0)}catch(e){$.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=fe.buildPullRequestMetadata(e),i=await t.getConfigs(),n=a=>i.filter(({key:o})=>a===o).map(({value:o})=>o)[0],s=i.map(a=>{const o=Ia.exec(a.key);return{branch:o&&o.length?o[1]:null,value:a.value}}).filter(a=>a.branch&&a.value===r);if(s&&s.length){const a=s[0].branch;await t.checkout(a);const o=n(`branch.${a}.remote`),u=n(`branch.${a}.merge`);await t.fetch(o,u);const c=await t.getBranch(s[0].branch);return c.behind!==void 0&&c.behind>0&&c.ahead===0&&($.debug("Pull from upstream",fe.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=fe.buildPullRequestMetadata(e),i=await t.getConfigs(),n=i.map(s=>{const a=Ia.exec(s.key);return{branch:a&&a.length?a[1]:null,value:s.value}}).find(s=>!!s.branch&&s.value===r);if(n){const s=n.branch;try{const a=`branch.${s}.remote`,o=i.filter(w=>w.key===a).map(w=>w.value);let u;o.length&&(u=o[0]);let c=!1;if(u){const w=`remote.${u}.github-pr-remote`;i.filter(q=>q.key===w&&q.value).length&&(c=!0)}let h;return c&&(h=i.some(w=>!!(Wc.exec(w.key)&&w.key!==`branch.${s}.remote`&&w.value===u))),{branch:s,remote:u,createdForPullRequest:c,remoteInUse:h}}catch(a){return{branch:s}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,i,n]=e;return{owner:r,repositoryName:i,prNumber:Number(n)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Fa}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),i=await t.getConfig(r);return fe.parsePullRequestMetadata(i)}catch(r){return}}static async createRemote(t,e,r){$.appendLine(`create remote for ${r}.`,fe.ID);const i=Cr(t);for(const s of i)if(new St(s.url).equals(r))return s.remoteName;const n=fe.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(n,r.toString()),await t.setConfig(`remote.${n}.${Da}`,"true"),n}static async isRemoteCreatedForPullRequest(t,e){try{$.debug(`Check if remote '${e}' is created for pull request - start`,fe.ID);const r=await t.getConfig(`remote.${e}.${Da}`);return $.debug(`Check if remote '${e}' is created for pull request - end`,fe.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let i=r,n=1;for(;;)try{await t.getBranch(i),i=`${r}-${n++}`}catch(s){break}return i}static getUniqueRemoteName(t,e){let r=e,i=1;const n=Cr(t);for(;n.find(s=>s.remoteName===r);)r=`${e}${i++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){$.appendLine(`associate ${r} with Pull Request #${e.number}`,fe.ID);const i=`branch.${r}.${Fa}`;await t.setConfig(i,fe.buildPullRequestMetadata(e))}};let et=fe;Qc(et,"ID","PullRequestGitHelper");var zc=Object.defineProperty,ge=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Kc extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Aa extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Yc extends Error{constructor(e,r,i){super();this.branchName=e,this.upstreamRef=r,this.problem=i}get message(){const{upstreamRef:{remote:e,name:r},branchName:i,problem:n}=this;return`The upstream ref ${e}/${r} for branch ${i} ${n}.`}}const yt="githubPullRequests",vn="remotes",Ma="ReposManagerStateContext";var Ve;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(Ve||(Ve={}));const xa="No Milestone";var Oa;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Oa||(Oa={}));const tt=class{constructor(t,e,r,i){this._repository=t,this._telemetry=e,this._git=r,this._credentialStore=i,ge(this,"_subs"),ge(this,"_activePullRequest"),ge(this,"_activeIssue"),ge(this,"_githubRepositories"),ge(this,"_allGitHubRemotes",[]),ge(this,"_mentionableUsers"),ge(this,"_fetchMentionableUsersPromise"),ge(this,"_assignableUsers"),ge(this,"_fetchAssignableUsersPromise"),ge(this,"_gitBlameCache",{}),ge(this,"_githubManager"),ge(this,"_repositoryPageInformation",new Map),ge(this,"_onDidChangeActivePullRequest",new l.EventEmitter),ge(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),ge(this,"_onDidChangeActiveIssue",new l.EventEmitter),ge(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),ge(this,"_onDidLoadRepositories",new l.EventEmitter),ge(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),ge(this,"_onDidChangeRepositories",new l.EventEmitter),ge(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),ge(this,"_onDidChangeAssignableUsers",new l.EventEmitter),ge(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),ge(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new ln,this._subs.push(l.workspace.onDidChangeConfiguration(async n=>{n.affectsConfiguration(`${yt}.${vn}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider()}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Cr(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((i,n,s)=>r[n])).catch(r=>($.appendLine(`Resolving GitHub remotes failed: ${r}`),l.window.showErrorMessage(`Resolving GitHub remotes failed: ${A(r)}`),[]))}async getActiveGitHubRemotes(t){const e=l.workspace.getConfiguration(yt).get(vn);return e?(e.forEach(r=>{t.some(i=>i.remoteName===r)||$.appendLine(`No remote with name '${r}' found.`)}),$.debug(`Displaying configured remotes: ${e.join(", ")}`,tt.ID),e.map(r=>t.find(i=>i.remoteName===r)).filter(r=>!!r)):($.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],r=[];l.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(i,n,s)=>{try{if(JSON.parse(i.uri.query).extensionId!==qt)return;const o=i.getWordRangeAtPosition(n,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!o||o.isEmpty)return;let u=[];const c={};let h={},w,R;const q=l.window.visibleTextEditors;if(q.length){const re=q.find(ee=>ee.document.uri.scheme==="pr");if(re){const ee=we(re.document.uri);w=ee.prNumber,R=ee.remoteName}else this._activePullRequest&&(w=this._activePullRequest.number,R=this._activePullRequest.remote.remoteName);if(t&&w&&w===t.number)return r}const V=new Promise(async re=>{if(w&&R){if($.debug("get Timeline Events and parse users",tt.ID),t&&t.number===w)return e;const ee=this._githubRepositories.find(le=>le.remote.remoteName===R);ee&&(t=await ee.getPullRequest(w),e=await t.getTimelineEvents()),u=oc(e),re()}re()}),U=new Promise(async re=>{if(q.length)try{$.debug("git blame and parse users",tt.ID);const ee=b.resolve(q[0].document.uri.fsPath);let le;this._gitBlameCache[ee]?le=this._gitBlameCache[ee]:(le=await this.repository.blame(ee),this._gitBlameCache[ee]=le);const ve=le.split(`
`);for(const he of ve){const ke=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(he);if(ke&&ke.length===2){const de=ke[1].trim();c[de]=!0}}}catch(ee){$.debug(ee,tt.ID)}re()}),z=new Promise(async re=>{$.debug("get mentionable users",tt.ID),h=await this.getMentionableUsers(),re()});await Promise.all([V,U,z]),r=[];const K={};$.debug("prepare user suggestions",tt.ID),u.forEach(re=>{K[re.login]||(K[re.login]=re)});const Z={};for(const re in h)for(const ee of h[re])if(!K[ee.login]&&!Z[ee.login]){Z[ee.login]=!0;let le=2;(c[ee.login]||ee.name&&c[ee.name])&&(le=1),K[ee.login]&&(le=0),r.push({label:ee.login,insertText:ee.login,filterText:`${ee.login}`+(ee.name&&ee.name!==ee.login?`_${ee.name.toLowerCase().replace(" ","_")}`:""),sortText:`${le}_${ee.login}`,detail:ee.name,kind:l.CompletionItemKind.User,login:ee.login,uri:this.repository.rootUri})}for(const re in K)Z[re]||r.push({label:K[re].login,insertText:`${K[re].login}`,filterText:`${K[re].login}`+(K[re].name&&K[re].name!==K[re].login?`_${K[re].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${K[re].login}`,detail:K[re].name,kind:l.CompletionItemKind.User,login:K[re].login,uri:this.repository.rootUri});return $.debug("done",tt.ID),r}catch(a){return[]}},resolveCompletionItem:async(i,n)=>{try{const s=await this.getPullRequestDefaults(),a=await this.resolveUser(s.owner,s.repo,i.label);a&&(i.documentation=mn(s,a))}catch(s){}return i}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await l.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),$.appendLine("Found GitHub remote")):(await l.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),$.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized"){$.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated();l.commands.executeCommand("setContext","github:authenticated",r);const i=[],n=[];return(r?e:[]).forEach(a=>{const o=this.createGitHubRepository(a,this._credentialStore);n.push(o.resolveRemote()),i.push(o)}),Promise.all(n).then(a=>{const o=this._githubRepositories;this._githubRepositories=i,o.forEach(c=>c.dispose());const u=o.length!==this._githubRepositories.length||!o.every(c=>this._githubRepositories.some(h=>h.remote.equals(c.remote)));return this._githubRepositories.length&&u&&this.checkIfMissingUpstream(),this.getMentionableUsers(u),this.getAssignableUsers(u),this._onDidLoadRepositories.fire(r||!e.length?Ve.RepositoriesLoaded:Ve.NeedsAuthentication),t||this._onDidChangeRepositories.fire(),Promise.resolve()})}async checkIfMissingUpstream(){try{const e=await(await this.getOrigin()).getMetadata();if(e.fork){const r=new St(e.parent.git_url);if(!this._githubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repositoryName)){const s=!this.repository.state.remotes.some(a=>a.name==="upstream")?"upstream":e.parent.owner.login;await this.repository.addRemote(s,e.parent.git_url)}}}catch(t){$.appendLine(`Missing upstream check failed: ${t}`)}}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}async getMentionableUsers(t){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;if(!this._fetchMentionableUsersPromise){const e={};return this._fetchMentionableUsersPromise=new Promise(r=>{const i=this._githubRepositories.map(async n=>{const s=await n.getMentionableUsers();e[n.remote.remoteName]=s});Promise.all(i).then(()=>{this._mentionableUsers=e,this._fetchMentionableUsersPromise=void 0,r(e)})})}return this._fetchMentionableUsersPromise}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(i=>{const n=this._githubRepositories.map(async s=>{const a=await s.getAssignableUsers();e[s.remote.remoteName]=a.sort(ia),r.push(...a)});Promise.all(n).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,i(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(i=>i.type===mt.Head&&i.name!==void 0).map(i=>i.name).map(async i=>{const n=await et.getMatchingPullRequestMetadataForBranch(this.repository,i);if(n){const{owner:s,prNumber:a}=n,o=t.find(u=>u.remote.owner.toLocaleLowerCase()===s.toLocaleLowerCase());if(o){const u=await o.getPullRequest(a);if(u)return u.localBranchName=i,u}}return Promise.resolve(null)});return Promise.all(r).then(i=>i.filter(n=>n!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(u=>u.remote.owner===(e==null?void 0:e.owner)&&u.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:i,octokit:n}=await r.ensure();let s=!1,a=1,o=[];do{const u=await n.issues.listLabelsForRepo({owner:i.owner,repo:i.repositoryName,per_page:100,page:a});o=o.concat(u.data.map(c=>({name:c.name,color:c.color}))),o=o.sort((c,h)=>c.name.localeCompare(h.name)),s=!!u.headers.link&&u.headers.link.indexOf('rel="next"')>-1,a+=1}while(s);return o}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(n){}if(!r)return;await et.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:a,value:o})=>/^branch.*\.remote$/.test(a)&&o===r)||await this.repository.removeRemote(r)),this._telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,i=Ne.All,n){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const s=()=>this.totalFetchedPages.get(e)||0,a=w=>this.totalFetchedPages.set(e,w);for(const w of this._githubRepositories){const R=w.remote.url.toString()+e;this._repositoryPageInformation.get(R)||this._repositoryPageInformation.set(R,{pullRequestPage:0,hasMorePages:null})}let o=0;const u={hasMorePages:!1,items:[]},c=w=>{o++,w&&(u.items=u.items.concat(w.items),u.hasMorePages=w.hasMorePages)},h=this._githubRepositories.filter(w=>{const R=this._repositoryPageInformation.get(w.remote.url.toString()+e);return R&&(t.fetchNextPage===!1||R.hasMorePages!==!1)});for(let w=0;w<h.length;w++){const R=h[w],q=R.remote.url.toString()+e,V=this._repositoryPageInformation.get(q),U=async z=>{switch(r){case 0:return i===Ne.All?R.getAllPullRequests(z):R.getPullRequestsForCategory(n||"",z);case 1:return R.getIssuesForUserByMilestone(V.pullRequestPage);case 2:return R.getIssuesWithoutMilestone(V.pullRequestPage);case 3:return R.getIssues(V.pullRequestPage,n)}};if(t.fetchNextPage?(V.pullRequestPage++,c(await U(V.pullRequestPage)),a(s()+1)):(V.pullRequestPage===0&&(V.pullRequestPage=1),(await Promise.all(Array.from({length:V.pullRequestPage}).map((K,Z)=>U(Z+1)))).forEach(K=>c(K))),V.hasMorePages=u.hasMorePages,u.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&o>=s()))return s()===0&&a(o),{items:u.items,hasMorePages:V.hasMorePages,hasUnsearchedRepositories:w<h.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const i=t.toString()+(r||"");return this.fetchPagedData(e,i,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const i=await this.fetchPagedData(t,"issuesKey",1,Ne.All,r);if(e){const n=await this.fetchPagedData(t,"issuesKey",2,Ne.All,r);i.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:xa},issues:n.items})}return i}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,Ne.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),i=await l.workspace.findFiles(new l.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...i]}async getPullRequestDefaults(t){if(!t&&!this.repository.state.HEAD)throw new Aa(this.repository);const e=await this.getOrigin(t),r=await e.getMetadata(),i=r.fork?r.parent:await(this.findRepo(cr("upstream"))||e).getMetadata();return{owner:i.owner.login,repo:i.name,base:i.default_branch}}async getMetadata(t){const e=this.findRepo(cr(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:i}=await e.getCommit(r);return i}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new Kc(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const n=this.findRepo(cr(e.remote));if(!n){const s=(await this.getAllGitHubRemotes()).find(a=>a.remoteName===e.remote);if(s)return new ir(s,this._credentialStore,this._telemetry);throw $.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new Yc(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return n}const[r,...i]=this._githubRepositories;return i.length&&(this.findRepo(cr("origin"))||this.findRepo(Jc))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const i=this._githubRepositories.find(n=>n.remote.owner===t.owner&&n.remote.repositoryName===t.repo);if(!i)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const n=await i.createPullRequest(t),s=t.head.indexOf(":"),a=t.head.slice(s+1);return await et.associateBranchWithPullRequest(this._repository,n,a),this._telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),n}catch(n){if(n.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await l.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await l.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await l.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await l.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(i.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw $.appendLine(`GitHubRepository> Creating pull requests failed: ${n}`),this._telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(A(n))}}async createIssue(t){try{const e=this._githubRepositories.find(s=>s.remote.owner===t.owner&&s.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),i=ec(r,e),n=new Fe(e,e.remote,i);return this._telemetry.sendTelemetryEvent("issue.create.success"),n}catch(e){$.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this._telemetry.sendTelemetryErrorEvent("issue.create.failure"),l.window.showWarningMessage(`Creating issue failed: ${A(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(n=>n.remote.owner===t.remote.owner&&n.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const i={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(i),this._telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){$.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this._telemetry.sendTelemetryErrorEvent("issue.assign.failure"),l.window.showWarningMessage(`Assigning issue failed: ${A(r)}`)}}getCurrentUser(t){return It(this._credentialStore.getCurrentUser(),t.githubRepository)}async mergePullRequest(t,e,r,i){const{octokit:n,remote:s}=await t.githubRepository.ensure(),a=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,o=this.repository.state.HEAD&&this.repository.state.HEAD.commit,u=t.head&&t.head.sha,c=this.repository.state.workingTreeChanges.length>0;if(a===u){if(o!==u){const{ahead:h}=this.repository.state.HEAD;if(h&&await l.window.showWarningMessage(`You have ${h} unpushed ${h>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(c&&await l.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await n.pulls.merge({commit_message:r,commit_title:e,merge_method:i||l.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:s.owner,repo:s.repositoryName,pull_number:t.number}).then(h=>(this._telemetry.sendTelemetryEvent("pr.merge.success"),h.data)).catch(h=>{throw this._telemetry.sendTelemetryErrorEvent("pr.merge.failure"),h})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const s=n.key,a=/^branch\.(.*)\.(.*)$/.exec(s);if(a&&a.length===3){const o=a[1];e.has(o)||e.set(o,{});const u=e.get(o);if(a[2]==="remote"&&(u.remote=n.value),a[2]==="github-pr-owner-number"){const c=et.parsePullRequestMetadata(n.value);u.metadata=c}e.set(o,u)}});const r=[];e.forEach((n,s)=>{if(n.metadata){const a=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(a?a.owner===n.metadata.owner&&a.repositoryName===n.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===n.metadata.prNumber:!1)||r.push({label:`${s}`,description:`${n.metadata.repositoryName}/${n.metadata.owner} #${n.metadata.prNumber}`,picked:!1,metadata:n.metadata})}});const i=await Promise.all(r.map(async n=>{const s=n.metadata,a=this._githubRepositories.find(h=>h.remote.owner.toLowerCase()===s.owner.toLowerCase()&&h.remote.repositoryName.toLowerCase()===s.repositoryName.toLowerCase());if(!a)return n;const{remote:o,query:u,schema:c}=await a.ensure();try{const{data:h}=await u({query:c.PullRequestState,variables:{owner:o.owner,name:o.repositoryName,number:s.prNumber}});n.legacy=h.repository.pullRequest.state!=="OPEN"}catch{}return n}));return i.forEach(n=>{n.legacy?n.picked=!0:n.description=`${n.description} is still Open`}),i}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const n=i.key;let s=/^branch\.(.*)\.(.*)$/.exec(n);if(s&&s.length===3){const a=s[1];if(s[2]==="remote"){const o=i.value;e.has(o)||e.set(o,{branches:new Set}),e.get(o).branches.add(a)}}if(s=/^remote\.(.*)\.(.*)$/.exec(n),s&&s.length===3){const a=s[1];e.has(a)||e.set(a,{branches:new Set});const o=e.get(a);s[2]==="github-pr-remote"&&(o.createdForPullRequest=i.value==="true"),s[2]==="url"&&(o.url=i.value)}});const r=[];return e.forEach((i,n)=>{if(i.branches.size===0){let s=i.createdForPullRequest?"":"Not created by GitHub Pull Request extension";i.url&&(s=s?s+" "+i.url:i.url),r.push({label:n,description:s,picked:i.createdForPullRequest,remote:n})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=l.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(n=>n.picked),e.busy=!1;let i=!0;e.onDidAccept(async()=>{if(i){const n=e.selectedItems;if(n.length){e.busy=!0;try{await Promise.all(n.map(async a=>{await this.repository.deleteBranch(a.label,!0)})),e.busy=!1}catch(a){e.hide(),l.window.showErrorMessage(`Deleting branches failed: ${a}`)}}i=!1,e.busy=!0;const s=await this.getRemoteDeletionItems();s?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=s,e.selectedItems=s.filter(a=>a.picked)):e.hide()}else{const n=e.selectedItems;n.length&&(e.busy=!0,await Promise.all(n.map(async s=>{await this.repository.removeRemote(s.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fullfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;$.debug("Fullfill pull request missing info - start",tt.ID);const e=t.githubRepository,{octokit:r,remote:i}=await e.ensure();if(!t.base){const{data:n}=await r.pulls.get({owner:i.owner,repo:i.repositoryName,pull_number:t.number});t.update(Ht(n,e))}if(!t.mergeBase){const{data:n}=await r.repos.compareCommits({repo:i.repositoryName,owner:i.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=n.merge_base_commit.sha}}catch(e){l.window.showErrorMessage(`Fetching Pull Request merge base failed: ${A(e)}`)}$.debug("Fullfill pull request missing info - done",tt.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(i=>i.remote.owner.toLowerCase()===t.toLowerCase()&&i.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const i=await this.resolveItem(t,e);if(i)return i.getPullRequest(r)}async resolveIssue(t,e,r,i=!1){const n=await this.resolveItem(t,e);if(n)return n.getIssue(r,i)}async resolveUser(t,e,r){$.debug(`Fetch user ${r}`,tt.ID);const i=this.createGitHubRepositoryFromOwnerName(t,e),{query:n,schema:s}=await i.ensure();try{const{data:a}=await n({query:s.GetUser,variables:{login:r}});return sc(a)}catch(a){console.log(a)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await et.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await et.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await et.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await et.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){try{const e=await this.repository.getBranch(t);e.upstream&&t===e.upstream.name?await this.repository.checkout(t):await l.commands.executeCommand("git.checkout")}catch(e){if(e.gitErrorCode&&e.gitErrorCode===Et.DirtyWorkTree){l.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}l.window.showErrorMessage(`Exiting failed: ${e}`)}}createGitHubRepository(t,e){return new ir(t,e,this._telemetry)}createGitHubRepositoryFromOwnerName(t,e){const r=`https://github.com/${t}/${e}`;return new ir(new ri(e,r,new St(r)),this._credentialStore,this._telemetry)}async findUpstreamForItem(t){let e,r;for(const n of this.gitHubRepositories){if(!e&&n.remote.owner===t.remote.owner&&n.remote.repositoryName===t.remote.repositoryName){e=n;continue}const s=await n.getRepositoryForkDetails();if(s&&s.isFork&&s.parent.owner===t.remote.owner&&s.parent.name===t.remote.repositoryName){const a=await n.getViewerPermission();if(a===He.Admin||a===He.Maintain||a===He.Write){r=n.remote;break}}}let i=!1;if(e&&!r){const n=await t.githubRepository.getViewerPermission();(n===He.Read||n===He.Triage||n===He.Unknown)&&(i=!0)}return{needsFork:i,upstream:e,remote:r}}async forkWithProgress(t,e,r,i){t.report({message:`Forking ${r}...`});const n=await e.fork();if(t.report({increment:50}),!n){l.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const s=i.state.remotes.length>1?"origin":i.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await i.renameRemote(s,"upstream"),await i.addRemote(s,n),await new Promise(a=>{if(this.gitHubRepositories.length===0){const o=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(o.dispose(),a())})}else a()}),t.report({increment:50}),s}async doFork(t,e,r){return l.window.withProgress({location:l.ProgressLocation.Notification,title:"Creating Fork"},async i=>{try{return this.forkWithProgress(i,t,e,r)}catch(n){l.window.showErrorMessage(`Creating fork failed: ${n}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",i="Don't Fork";switch(await l.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,i)){case r:return this.doFork(t,e,this.repository);case i:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let ur=tt;ge(ur,"ID","FolderRepositoryManager");function vf(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const Jc=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},cr=t=>({remote:{remoteName:e}})=>e===t,qa=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};var Zc=Object.defineProperty,Be=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Xc extends la{constructor(e,r,i,n){super();this._extensionUri=e,this._folderRepositoryManager=r,this._pullRequestDefaults=i,Be(this,"viewType","github:createPullRequest"),Be(this,"_onDone",new l.EventEmitter),Be(this,"onDone",this._onDone.event),Be(this,"_onDidChangeBaseRemote",new l.EventEmitter),Be(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),Be(this,"_onDidChangeBaseBranch",new l.EventEmitter),Be(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),Be(this,"_onDidChangeCompareRemote",new l.EventEmitter),Be(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),Be(this,"_onDidChangeCompareBranch",new l.EventEmitter),Be(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),Be(this,"_firstLoad",!0),Be(this,"_compareBranch"),this._compareBranch=n}resolveWebviewView(e,r,i){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,i;((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((i=this._compareBranch.upstream)==null?void 0:i.remote))&&(this._compareBranch=e,this.initializeParams(!0),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}show(e){e&&(this.compareBranch=e),super.show()}async getTitle(){var e,r;const i=await this._folderRepositoryManager.getOrigin(this._compareBranch);let n=!1;if(this.compareBranch.upstream){const s=this._folderRepositoryManager.findRepo(cr(this.compareBranch.upstream.remote));if(s){const a=`${s.remote.owner}:${(e=this.compareBranch.name)!=null?e:""}`;n=(await i.compareCommits(this._pullRequestDefaults.base,a)).total_commits>1}}return n?(r=this.compareBranch.name)!=null?r:"":this.compareBranch.name?qa(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await l.workspace.fs.readFile(e[0])).toString()}catch(r){$.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){const e=await this.getPullRequestTemplate();return e||(this.compareBranch.name?qa(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body:"")}async initializeParams(e=!1){var r,i;if(!this.compareBranch)throw new Aa(this._folderRepositoryManager.repository);const n={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},s=await this._folderRepositoryManager.getOrigin(this.compareBranch),a={owner:s.remote.owner,repositoryName:s.remote.repositoryName},[o,u,c,h]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),w=o.map(q=>({owner:q.owner,repositoryName:q.repositoryName}));let R=u;a.owner!==n.owner&&(R=await this._folderRepositoryManager.listBranches(a.owner,a.repositoryName)),this.compareBranch.name&&!R.includes(this.compareBranch.name)&&(R.push(this.compareBranch.name),R.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:w,defaultBaseRemote:n,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:a,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:u,branchesForCompare:R,defaultTitle:c,defaultDescription:h,compareBranch:(i=this.compareBranch.name)!=null?i:"",isDraft:!1}})}async changeRemote(e,r){const{owner:i,repositoryName:n}=e.args,s=this._folderRepositoryManager.findRepo(u=>i===u.remote.owner&&n===u.remote.repositoryName);if(!s)throw new Error("No matching GitHub repository found.");const a=await s.getDefaultBranch(),o=await this._folderRepositoryManager.listBranches(i,n);return!r&&this.compareBranch.name&&!o.includes(this.compareBranch.name)&&(o.push(this.compareBranch.name),o.sort()),r?(this._onDidChangeBaseRemote.fire({owner:i,repositoryName:n}),this._onDidChangeBaseBranch.fire(a)):(this._onDidChangeCompareRemote.fire({owner:i,repositoryName:n}),this._onDidChangeCompareBranch.fire(a)),this._replyMessage(e,{branches:o,defaultBranch:a})}async create(e){var r,i;try{let n,s;if(!this.compareBranch.name){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===mt.RemoteHead){const c=this.compareBranch.name.indexOf("/");n=this.compareBranch.name.substring(c+1),s=this.compareBranch.name.substring(0,c)}else n=this.compareBranch.name,s=(r=this.compareBranch.upstream)==null?void 0:r.remote;if(!s)if(await l.window.showInformationMessage(`There is no upstream branch for '${n}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch")await l.commands.executeCommand("git.publish"),this._folderRepositoryManager.repository.state.HEAD&&(this.compareBranch=this._folderRepositoryManager.repository.state.HEAD,s=(i=this.compareBranch.upstream)==null?void 0:i.remote);else{this._throwError(e,"No upstream for the compare branch.");return}const a=this._folderRepositoryManager.findRepo(cr(s));if(!a)throw new Error(`Unable to find GitHub repository matching '${s}'.`);const o=`${a.remote.owner}:${n}`,u=await this._folderRepositoryManager.createPullRequest({...e.args,head:o});u?(await this._replyMessage(e,{}),await et.associateBranchWithPullRequest(this._folderRepositoryManager.repository,u,n),this._onDone.fire(u)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(n){this._throwError(e,n.message)}}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":l.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0);return;case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":this._onDidChangeBaseBranch.fire(e.args);return;case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":this._onDidChangeCompareBranch.fire(e.args);return;default:l.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=an(),r=l.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}function We(t){return t===void 0||t===0?0:t-1}function Ua(t,e,r){let i=-1;if(t.position!==null){const n=Bt(e,t.position);n&&(r&&n.type===_e.Delete&&(i=n.oldLineNumber),!r&&n.type!==_e.Delete&&(i=n.newLineNumber))}return i}function ed(t){let e;const r=Zt(t);let i=r.next();for(;!i.done;){const n=i.value;e=n.diffLines[n.diffLines.length-1],i=r.next()}return e}function Bt(t,e){for(let r=0;r<t.length;r++){const i=t[r];for(let n=0;n<i.diffLines.length;n++)if(i.diffLines[n].positionInHunk===e)return i.diffLines[n]}}function La(t,e,r,i=!1){const n=Zt(e);let s=n.next(),a=r;for(;!s.done;){const u=s.value;if(u.oldLineNumber>r)break;a+=u.oldLength-u.newLength,s=n.next()}const o=-1;for(let u=0;u<t.length;u++){const c=t[u];for(let h=0;h<c.diffLines.length;h++)if(i){if(c.diffLines[h].oldLineNumber===a)return c.diffLines[h].positionInHunk}else if(c.diffLines[h].newLineNumber===a)return c.diffLines[h].positionInHunk}return o}function mi(t,e){const r=Zt(t);let i=r.next(),n=0;for(;!i.done;){const s=i.value;if(!(s.oldLineNumber>e))if(s.oldLineNumber+s.oldLength-1<e)n+=s.newLength-s.oldLength;else return n+=s.newLength-s.oldLength,e+n;i=r.next()}return e+n}function td(t,e,r){for(let i=0;i<r.length;i++){const n=r[i];if(n.position===null||n.position===void 0)continue;const s=Bt(t,n.position);if(s){if(s.type===_e.Delete)continue;const a=mi(e,s.newLineNumber);n.absolutePosition=a}}return r}var rd=Object.defineProperty,wn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class id{constructor(){wn(this,"fileHasComments",new Map),wn(this,"_onDidChangeFileDecorations",new l.EventEmitter),wn(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,i,n){const s=`${r}:${i}`;this.fileHasComments.get(s)!==n&&(this.fileHasComments.set(`${r}:${i}`,n),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const i=is(e);if(i){const n=`${i.prNumber}:${i.fileName}`;if(this.fileHasComments.get(n))return{propagate:!1,tooltip:"Commented",badge:"\u25C6"}}}}const $a=new id;var nd=Object.defineProperty,bn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?nd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ge{constructor(){bn(this,"childrenDisposables"),bn(this,"parent"),bn(this,"label")}getParent(){if(this.parent instanceof Ge)return this.parent}async reveal(e,r){return this.parent.reveal(e||this,r)}async getChildren(){return[]}dispose(){this.childrenDisposables&&this.childrenDisposables.forEach(e=>e.dispose())}}var sd=Object.defineProperty,Ie=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Ga(t){const e=l.window.activeTextEditor,r={preserveFocus:!0,viewColumn:l.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}class At extends Ge{constructor(e,r,i,n,s,a,o,u){super();this.parent=e,this.pullRequest=r,this.status=i,this.fileName=n,this.previousFileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"command"),Ie(this,"resourceUri"),Ie(this,"contextValue"),this.contextValue=`filechange:${ne[i]}`,this.label=b.basename(n),this.description=b.relative(".",b.dirname(n)),this.iconPath=l.ThemeIcon.File,this.resourceUri=rs(l.Uri.parse(this.blobUrl),r.number,n,i),this.command={title:"show remote file",command:"pr.openDiffView",arguments:[this]}}getTreeItem(){return this}}class Ha extends Ge{constructor(e,r,i,n,s,a,o,u,c,h){super();this.parent=e,this.pullRequest=r,this.status=i,this.fileName=n,this.blobUrl=s,this.filePath=a,this.parentFilePath=o,this.diffHunks=u,this.comments=c,this.sha=h,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"resourceUri"),Ie(this,"parentSha"),Ie(this,"contextValue"),Ie(this,"command"),Ie(this,"opts"),this.contextValue=`filechange:${ne[i]}`,this.label=b.basename(n),this.description=b.relative(".",b.dirname(n)),this.iconPath=l.ThemeIcon.File,this.opts={preserveFocus:!0},this.update(this.comments),this.resourceUri=rs(l.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status)}findFirstActiveComment(){let e;return this.comments.forEach(r=>{if(!e&&r.position){e=r;return}e&&r.position&&r.position<e.position&&(e=r)}),e}update(e){if(this.comments=e,$a.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,e.length>0),e&&e.length){const r=this.findFirstActiveComment();if(r){const i=Bt(this.diffHunks,r.position===void 0?r.originalPosition:r.position);if(i){const n=Math.max(We(i.type===_e.Delete?i.oldLineNumber:i.newLineNumber),0);this.opts.selection=new l.Range(n,0,n,0)}}}else delete this.opts.selection}getCommentPosition(e){const r=Bt(this.diffHunks,e.position===void 0?e.originalPosition:e.position);return r?Math.max(We(r.type===_e.Delete?r.oldLineNumber:r.newLineNumber),0):0}getTreeItem(){return this}openFileCommand(){return Ga(this.filePath)}async openDiffCommand(e){const r=this.parentFilePath,i=this.filePath,n=this.opts;let s=await Ti(r,e.repository)||r,a=await Ti(i,e.repository)||i;(s.scheme==="data"||a.scheme==="data")&&(this.status===ne.ADD&&(s=ts),this.status===ne.DELETE&&(a=ts));const o=i.path.split("/");return{command:"vscode.diff",arguments:[s,a,`${o[o.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}async openDiff(e){var r;const i=await this.openDiffCommand(e);l.commands.executeCommand(i.command,...(r=i.arguments)!=null?r:[])}}class hi extends Ha{constructor(e,r,i,n,s,a,o,u,c,h,w,R,q){super(e,r,i,n,a,o,u,w,R,q);this.parent=e,this.pullRequest=r,this.status=i,this.fileName=n,this.previousFileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,this.isPartial=c,this.patch=h,this.diffHunks=w,this.comments=R,this.sha=q,this.command={title:"show diff",command:"pr.openDiffView",arguments:[this]}}}class dr extends Ha{constructor(e,r,i,n,s,a,o,u,c,h=[],w){super(e,i,n,s,a,o,u,c,h,w);this.parent=e,this.pullRequestManager=r,this.pullRequest=i,this.status=n,this.fileName=s,this.blobUrl=a,this.filePath=o,this.parentFilePath=u,this.diffHunks=c,this.comments=h,this.sha=w,Ie(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===ne.DELETE||this.status===ne.ADD){const c=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===ne.DELETE?[this.parentFilePath,c,`${this.fileName}`,{preserveFocus:!0}]:[c,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:i,rootPath:n}=Ke(this.filePath),s=`${i}^`,a={path:e,ref:r,commit:s,base:!0,isOutdated:!0,rootPath:n},o=this.filePath.with({query:JSON.stringify(a)}),u={preserveFocus:!0};if(this.comments&&this.comments.length){const c=this.comments.filter(h=>h.position===void 0).sort((h,w)=>h.originalPosition-w.originalPosition);if(c.length){const h=Bt(this.diffHunks,c[0].originalPosition);if(h){const w=Math.max(We(h.type===_e.Delete?h.oldLineNumber:h.newLineNumber),0);u.selection=new l.Range(w,0,w,0)}}}return{command:"vscode.diff",arguments:[o,this.filePath,`${this.fileName} from ${(i||"").substr(0,8)}`,u],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():l.workspace.getConfiguration().get("git.openDiffOnClick")?this.command=await this.openDiffCommand(this.pullRequestManager):this.command=this.openFileCommand()}}class ad extends Ge{constructor(e,r,i,n,s,a){super();this.parent=e,this.fileName=r,this.previousFileName=i,this.status=n,this.baseBranch=s,this.headBranch=a,Ie(this,"description"),Ie(this,"iconPath"),Ie(this,"resourceUri"),Ie(this,"command"),this.label=r,this.iconPath=l.ThemeIcon.File,this.resourceUri=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({status:n,fileName:r})});let o=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s})}),u=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:a})});switch(n){case ne.ADD:o=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:s,isEmpty:!0})});break;case ne.RENAME:o=l.Uri.file(i).with({scheme:"github",query:JSON.stringify({fileName:i,branch:s,isEmpty:!0})});break;case ne.DELETE:u=l.Uri.file(r).with({scheme:"github",query:JSON.stringify({fileName:r,branch:a,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[o,u,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function mr(t){return t.filter(e=>e instanceof dr)}var od=Object.defineProperty,hr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?od(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ld{constructor(e,r,i,n,s,a,o){this.repository=e,this.baseOwner=r,this.baseBranchName=i,this._compareOwner=n,this.compareBranchName=s,this.compareHasUpstream=a,this.folderRepoManager=o,hr(this,"_view"),hr(this,"_onDidChangeTreeData",new l.EventEmitter),hr(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),hr(this,"_contentProvider"),hr(this,"_disposables",[]),hr(this,"_gitHubRepository"),this._view=l.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(u=>u.remote.owner===this._compareOwner),this._disposables.push(this._view)}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const i=await this.repository.getBranch(e);this.compareHasUpstream=!!i.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)l.commands.executeCommand("setContext","github:noUpstream",!1);else return l.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new ud(this._gitHubRepository),this._disposables.push(l.workspace.registerTextDocumentContentProvider("github",this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:i}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return i.files.length?this._view.message=void 0:this._view.message=`The are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,i.files.map(n=>new ad(this._view,n.filename,n.previous_filename,Di(n.status),i.merge_base_commit.sha,this.compareBranchName))}catch(i){return $.appendLine(`Comparing changes failed: ${i}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose())}}class ud{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var i;const n=vl(e);if(!n||n.isEmpty)return"";const{octokit:s,remote:a}=await this.gitHubRepository.ensure(),o=await s.repos.getContent({owner:a.owner,repo:a.repositoryName,path:n.fileName,ref:n.branch}),u=(i=o.data.content)!=null?i:"";return Buffer.from(u,o.data.encoding).toString()}}var cd=Object.defineProperty,Tr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dd{constructor(e){this.repository=e,Tr(this,"_disposables",[]),Tr(this,"_createPRViewProvider"),Tr(this,"_treeView"),Tr(this,"_onDidCreate",new l.EventEmitter),Tr(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var i,n;l.commands.executeCommand("setContext","github:createPullRequest",!1),(i=this._createPRViewProvider)==null||i.dispose(),this._createPRViewProvider=void 0,(n=this._treeView)==null||n.dispose(),this._treeView=void 0,this._disposables.forEach(s=>s.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var i;(i=this._treeView)==null||i.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var i;(i=this._treeView)==null||i.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var i;(i=this._treeView)==null||i.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(i=>i.remote.owner===r.owner&&i.remote.repositoryName===r.repo))return r;{const i=await e.getOrigin(),n=await e.getMetadata(i.remote.remoteName);return{owner:n.owner.login,repo:n.name,base:n.default_branch}}}async create(e,r,i){var n;l.commands.executeCommand("setContext","github:createPullRequest",!0);const s=(n=i?await r.repository.getBranch(i):void 0)!=null?n:r.repository.state.HEAD;if(!this._createPRViewProvider){const a=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(s));this._createPRViewProvider=new Xc(e,r,a,s);const o=await r.getOrigin(s);this._treeView=new ld(this.repository,a.owner,a.base,o.remote.owner,s.name,!!s.upstream,r),this.registerListeners(!i),this._disposables.push(l.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(s)}}var md=Object.defineProperty,Va=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?md(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ba{constructor(e,r,i,n,s=`${e}:${r}`){this.owner=e,this.name=r,this.description=i,this.remote=n,this.label=s,Va(this,"detail"),Va(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}var pi,hd=new Uint8Array(16);function pd(){if(!pi&&(pi=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(hd)}const fd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function gd(t){return typeof t=="string"&&fd.test(t)}const vd=gd;for(var Ae=[],yn=0;yn<256;++yn)Ae.push((yn+256).toString(16).substr(1));function wd(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Ae[t[e+0]]+Ae[t[e+1]]+Ae[t[e+2]]+Ae[t[e+3]]+"-"+Ae[t[e+4]]+Ae[t[e+5]]+"-"+Ae[t[e+6]]+Ae[t[e+7]]+"-"+Ae[t[e+8]]+Ae[t[e+9]]+"-"+Ae[t[e+10]]+Ae[t[e+11]]+Ae[t[e+12]]+Ae[t[e+13]]+Ae[t[e+14]]+Ae[t[e+15]]).toLowerCase();if(!vd(r))throw TypeError("Stringified UUID is invalid");return r}const bd=wd;function yd(t,e,r){t=t||{};var i=t.random||(t.rng||pd)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=i[n];return e}return bd(i)}const ja=yd;function kn(t,e){const r=[];for(let i=0;i<t.length;i++){const n=t[i];let s,a;if(e){let o;for(let u=0;u<n.diffLines.length;u++){const c=n.diffLines[u];c.type===_e.Delete?(s!==void 0||(s=We(c.oldLineNumber)),o=We(c.oldLineNumber)):s!==void 0&&o!==void 0&&(r.push(new l.Range(s,0,o,0)),s=void 0,o=void 0)}s!==void 0&&o!==void 0&&(r.push(new l.Range(s,0,o,0)),s=void 0,o=void 0)}else n.newLineNumber&&(s=We(n.newLineNumber),a=We(n.newLength),r.push(new l.Range(s,0,s+a,0)))}return r}var kd=Object.defineProperty,_d=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?kd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qa{constructor(){_d(this,"_data",{})}setDocumentThreads(e,r,i){this._data[e]||(this._data[e]={}),r?this._data[e].original=i:this._data[e].modified=i}getDocuments(){return Object.keys(this._data)}getThreadsForDocument(e,r){const i=this._data[e];return r?i&&i.original:i&&i.modified}getAllThreadsForDocument(e){return this._data[e]&&(this._data[e].original||[]).concat(this._data[e].modified||[])}maybeDisposeThreads(e,r){for(const i in this._data){const n=this._data[i];!e.find(o=>r(o,i,!0))&&n.original&&(n.original.forEach(o=>o.dispose()),this._data[i].original=void 0),!e.find(o=>r(o,i,!1))&&n.modified&&(n.modified.forEach(o=>o.dispose()),this._data[i].modified=void 0),!this._data[i].original&&!this._data[i].modified&&delete this._data[i]}}}var Rd=Object.defineProperty,Wa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ed{constructor(){Wa(this,"_onDidChange",new l.EventEmitter),Wa(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const i=we(e);if(i&&i.prNumber){const n=this._prFileChangeContentProviders[i.prNumber];if(n)return await n(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const Cd=new Ed;function za(){return Cd}var Sd=Object.defineProperty,_n=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class jt extends Ge{constructor(e,r,i,n){super();this.parent=e,this.label=r,this.iconPath=i,this.pullRequestModel=n,_n(this,"command"),_n(this,"contextValue"),_n(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${n.number}`}getTreeItem(){return this}}var Td=Object.defineProperty,Rn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Td(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qt extends Ge{constructor(e,r){super();this.parent=e,this.label=r,Rn(this,"collapsibleState"),Rn(this,"children",[]),Rn(this,"pathToChild",new Map),this.collapsibleState=l.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof Qt&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof Qt&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(i=>{i instanceof Qt?(i.sort(),e.push(i)):r.push(i)}),e.sort((i,n)=>i.label<n.label?-1:1),r.sort((i,n)=>i.label<n.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const i=e[0],n=e.slice(1);let s=this.pathToChild.get(i);s||(s=new Qt(this,i),this.pathToChild.set(i,s),this.children.push(s)),s.addPathRecc(n,r)}getTreeItem(){return this}}var Pd=Object.defineProperty,kt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function En(t,e,r,i){if(!r||r instanceof At)return[];const n=W(i,a=>String(a.position)),s=[];for(const a in n){const o=n[a],u=o[0],c=Ua(u,r.diffHunks,e);if(c<0)continue;const h=new l.Position(We(c),0),w=new l.Range(h,h);s.push({threadId:u.id.toString(),uri:t,range:w,comments:o})}return s}const Ka=class extends Ge{constructor(t,e,r,i){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=i,kt(this,"_fileChanges"),kt(this,"_commentController"),kt(this,"_prCommentController"),kt(this,"_disposables",[]),kt(this,"_inMemPRContentProvider"),kt(this,"_refreshCommentsInProgress"),kt(this,"_command"),kt(this,"_commentHandlerId"),this._commentHandlerId=ja(),Xn(this._commentHandlerId,this)}get commentController(){return this._commentController}get command(){return this._command}set command(t){this._command=t}async getChildren(){$.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,Ka.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&this.childrenDisposables.forEach(i=>i.dispose());const t=new jt(this,"Description",new l.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=za().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this.pullRequestModel.equals(this._folderReposManager.activePullRequest)?(await this.pullRequestModel.githubRepository.ensureCommentsController(),this.pullRequestModel.githubRepository.commentsHandler.clearCommentThreadCache(this.pullRequestModel.number)):((!this._prCommentController||!this._commentController)&&await this.resolvePRCommentController(),await this.refreshExistingPREditors(l.window.visibleTextEditors,!0),await this.pullRequestModel.validateDraftMode(),await this.refreshContextKey(l.window.activeTextEditor));const e=[t];if(l.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const i=new Qt(this,"");this._fileChanges.forEach(n=>i.addFile(n)),i.finalize(),i.label===""?e.push(...i.children):e.push(i)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return $.appendLine(t),[]}}async resolvePRCommentController(){return this._prCommentController?this._prCommentController:(await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._prCommentController=this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this),this.registerListeners(),this._prCommentController)}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(r=>{r instanceof hi&&r.comments.forEach(i=>i.isDraft=t)});const e=(await this.resolvePRCommentController()).commentThreadCache;for(const r in e)e[r].forEach(i=>{Xi(i,t)})})),this._disposables.push(l.window.onDidChangeVisibleTextEditors(async t=>{this._refreshCommentsInProgress?this._refreshCommentsInProgress=this._refreshCommentsInProgress.then(async e=>await this.refreshExistingPREditors(t,!1)):this._refreshCommentsInProgress=this.refreshExistingPREditors(t,!1)})),this._disposables.push(l.window.onDidChangeActiveTextEditor(async t=>{await this.refreshContextKey(t)}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await Fi(e,this._folderReposManager.repository,r)).map(n=>{const s=this.pullRequestModel.head.sha,a=n.status===ne.RENAME?n.previousFileName:n.fileName;return n instanceof ls?new At(this,this.pullRequestModel,n.status,n.fileName,n.previousFileName,n.blobUrl,Jt(l.Uri.file(b.resolve(this._folderReposManager.repository.rootUri.fsPath,n.fileName)),this.pullRequestModel,n.baseCommit,s,n.fileName,!1,n.status),Jt(l.Uri.file(b.resolve(this._folderReposManager.repository.rootUri.fsPath,a)),this.pullRequestModel,n.baseCommit,s,n.fileName,!0,n.status)):new hi(this,this.pullRequestModel,n.status,n.fileName,n.previousFileName,n.blobUrl,Jt(l.Uri.file(b.resolve(this._folderReposManager.repository.rootUri.fsPath,n.fileName)),this.pullRequestModel,n.baseCommit,s,n.fileName,!1,n.status),Jt(l.Uri.file(b.resolve(this._folderReposManager.repository.rootUri.fsPath,a)),this.pullRequestModel,n.baseCommit,s,n.fileName,!0,n.status),n.isPartial,n.patch,n.diffHunks,t.filter(u=>u.path===n.fileName&&u.position!==null))}):[]}async refreshExistingPREditors(t,e){let r=t.filter(n=>{if(n.document.uri.scheme!=="pr")return!1;const s=we(n.document.uri);return!(!s||s.prNumber!==this.pullRequestModel.number)}).map(n=>({fileName:we(n.document.uri).fileName,document:n.document}));const i=(await this.resolvePRCommentController()).commentThreadCache;for(const n in i){const s=i[n];r.find(o=>o.fileName===n)||(s.forEach(o=>o.dispose()),delete i[n])}if(e||(r=r.filter(n=>i[n.fileName]===void 0)),r=v(r,n=>n.fileName),r.length){const n=await this.getFileChanges();await this.pullRequestModel.validateDraftMode(),r.forEach(s=>{const a=n.find(R=>R.fileName===s.fileName);if(!a||a instanceof At)return;const o=a.parentFilePath,u=a.filePath,c=En(o,!0,a,a.comments),h=En(u,!1,a,a.comments);let w=[];if(e){const R=i[s.fileName]||[],q=R.filter(U=>U.uri.toString()===o.toString()),V=R.filter(U=>U.uri.toString()===u.toString());w=[...q,...V]}this.updateFileChangeCommentThreads(w,[...c,...h],a,i)})}}async refreshContextKey(t){if(!t)return;const e=t.document.uri;if(e.scheme!=="pr")return;const r=we(e);!r||r.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}setContextKey(t){l.commands.executeCommand("setContext","prInDraft",t)}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:i,isDraft:n,html_url:s}=this.pullRequestModel,{login:a}=i,o=t?"\u2713 ":"",u=t?"Current Branch * ":"",c=r.toString(),h=`${o}#${c}: ${n?"[DRAFT] ":""}${e}`,w=`${u}${e} by @${a}`,R=`by @${a}`;return{label:h,id:`${this.parent instanceof Ge?this.parent.label:""}${s}`,tooltip:w,description:R,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new l.ThemeIcon("github")}}hasCommentThread(t){if(t.uri.scheme!=="pr"||this._folderReposManager.activePullRequest&&this._folderReposManager.activePullRequest.number===this.pullRequestModel.number)return!1;const e=we(t.uri);return!(!e||e.prNumber!==this.pullRequestModel.number)}createCommentThreads(t,e,r){const i=e.map(n=>nr(n,this._commentController));r[t]=i}updateCommentThreadComments(t,e){t.comments=e,st(t)}async findMatchingFileNode(t){const e=we(t);if(!e)throw new Error(`${t.toString()} is not valid PR document`);const r=(await this.getFileChanges()).find(i=>i.fileName===e.fileName);if(!r)throw new Error("No matching file found");if(r instanceof At)throw new Error("Comments not supported on remote file changes");return r}calculateCommentPosition(t,e){const r=e.uri,i=we(r),n=!!(i&&i.isBase),s=La(t.diffHunks,"",e.range.start.line+1,n);if(s<0)throw new Error("Comment position cannot be negative");return s}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=we(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const i=(await this.getFileChanges()).find(n=>n.fileName===r.fileName);return!i||i instanceof At?void 0:kn(i.diffHunks,r.isBase)}}updateFileChangeCommentThreads(t,e,r,i){if(t.forEach(n=>{(e&&e.filter(a=>a.threadId===n.threadId)).length||n.dispose()}),e&&e.length){const n=[];e.forEach(s=>{const a=t.filter(o=>o.threadId===s.threadId);a.length===0&&n.push(s),a.forEach(o=>{o.comments=o.comments.map(c=>{if(c instanceof xe){const w=s.comments.find(R=>R.body===c.body);return w?new me(w,o):c}const h=s.comments.find(w=>w.id.toString()===c.commentId);if(h)return new me(h,o)}).filter(c=>!!c);const u=s.comments.filter(c=>!o.comments.some(h=>h instanceof me&&h.commentId===c.id.toString()));o.comments=[...o.comments,...u.map(c=>new me(c,o))]})}),n.length&&this.createCommentThreads(r.fileName,n,i)}}async provideDocumentContent(t){const e=we(t);if(!e)return"";const r=(await this.getFileChanges()).find(i=>i.fileName===e.fileName);if(!r)return $.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===ne.ADD||!e.isBase&&r.status===ne.DELETE)return"";if(r instanceof At||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(i){return $.appendLine(`PR> Fetching file content failed: ${i}`),l.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(n=>{n==="Open on GitHub"&&l.commands.executeCommand("vscode.open",l.Uri.parse(r.blobUrl))}),""}if(r instanceof hi)if(r.status===ne.ADD||r.status===ne.DELETE)if(e.isBase){const n=[];for(let s=0;s<r.diffHunks.length;s++)for(let a=0;a<r.diffHunks[s].diffLines.length;a++){const o=r.diffHunks[s].diffLines[a];o.type===_e.Add||(o.type===_e.Delete?n.push(o.text):o.type===_e.Control||n.push(o.text))}return n.join(`
`)}else{const n=[];for(let s=0;s<r.diffHunks.length;s++)for(let a=0;a<r.diffHunks[s].diffLines.length;a++){const o=r.diffHunks[s].diffLines[a];o.type===_e.Add?n.push(o.text):o.type===_e.Delete||o.type===_e.Control||n.push(o.text)}return n.join(`
`)}else{const n=r.status===ne.RENAME?r.previousFileName:r.fileName,s=l.Uri.joinPath(this._folderReposManager.repository.rootUri,n),a=await this._folderReposManager.repository.show(e.baseCommit,s.fsPath);return e.isBase?a:Tl(a,r.patch)}return""}async createOrReplyComment(t,e,r){const i=t.comments.length,n=r!==void 0?r:this.pullRequestModel.hasPendingReview,s=this.optimisticallyAddComment(t,e,n);try{const a=await this.findMatchingFileNode(t.uri),o=i?await this.reply(t,e):await this.createFirstCommentInThread(t,e,a);a.update(a.comments.concat(o)),this.replaceTemporaryComment(t,o,s)}catch(a){l.window.showErrorMessage(`Creating comment failed: ${a}`),t.comments=t.comments.map(o=>(o instanceof xe&&o.id===s&&(o.mode=l.CommentMode.Editing),o))}}optimisticallyAddComment(t,e,r){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),n=new xe(t,e,r,i);return this.updateCommentThreadComments(t,[...t.comments,n]),n.id}optimisticallyEditComment(t,e){const r=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new xe(t,e.body instanceof l.MarkdownString?e.body.value:e.body,!!e.label,r,e);return t.comments=t.comments.map(n=>n instanceof me&&n.commentId===e.commentId?i:n),i.id}replaceTemporaryComment(t,e,r){t.comments=t.comments.map(i=>i instanceof xe&&i.id===r?new me(e,t):i)}reply(t,e){const r=t.comments[0];if(r instanceof me)return this.pullRequestModel.createReviewCommentReply(e,r._rawComment);throw new Error("Cannot respond to temporary comment")}async updateCommentThreadCache(t,e,r){const i=(await this.resolvePRCommentController()).commentThreadCache,n=i[e.fileName];n?i[e.fileName]=[...n,t]:i[e.fileName]=[t]}async createFirstCommentInThread(t,e,r){const i=this.calculateCommentPosition(r,t),n=await this.pullRequestModel.createReviewComment(e,r.fileName,i);return this.updateCommentThreadCache(t,r,n),n}async editComment(t,e){const r=await this.findMatchingFileNode(t.uri);if(e instanceof me){const i=this.optimisticallyEditComment(t,e);try{const n=await this.pullRequestModel.editReviewComment(e._rawComment,e.body instanceof l.MarkdownString?e.body.value:e.body),s=r.comments.findIndex(a=>a.id.toString()===e.commentId);s>-1&&r.comments.splice(s,1,n),this.replaceTemporaryComment(t,n,i)}catch(n){l.window.showErrorMessage(`Editing comment failed ${n}`),t.comments=t.comments.map(s=>s instanceof xe&&s.id===i?new me(e._rawComment,t):s)}}else this.createOrReplyComment(t,e.body instanceof l.MarkdownString?e.body.value:e.body)}async deleteComment(t,e){if(e instanceof me){await this.pullRequestModel.deleteReviewComment(e.commentId);const r=await this.findMatchingFileNode(t.uri),i=r.comments.findIndex(n=>n.id.toString()===e.commentId);if(i>-1&&r.comments.splice(i,1),t.comments=t.comments.filter(n=>n instanceof me&&n.commentId!==e.commentId),t.comments.length===0){const n=e._rawComment;if(n.path){const s=(await this.resolvePRCommentController()).commentThreadCache,a=s[n.path].findIndex(o=>o.threadId===t.threadId);s[n.path].splice(a,1)}t.dispose()}r.comments.length===0&&r.update(r.comments)}else t.comments=t.comments.filter(r=>r instanceof xe&&r.id===e.id);await this.pullRequestModel.validateDraftMode()}async startReview(t,e){const r=this.optimisticallyAddComment(t,e,!0);try{const i=await this.findMatchingFileNode(t.uri),n=this.calculateCommentPosition(i,t),s=await this.pullRequestModel.startReview({body:e,path:i.fileName,position:n});await this.updateCommentThreadCache(t,i,s),this.replaceTemporaryComment(t,s,r),i.update(i.comments.concat(s)),this.setContextKey(!0)}catch(i){l.window.showErrorMessage(`Starting a review failed: ${i}`),t.comments=t.comments.map(n=>(n instanceof xe&&n.id===r&&(n.mode=l.CommentMode.Editing),n))}}async finishReview(t,e){try{await this.createOrReplyComment(t,e,!1),await this.pullRequestModel.submitReview(),this.setContextKey(!1)}catch(r){l.window.showErrorMessage(`Failed to submit the review: ${r}`)}}async deleteReview(){const{deletedReviewId:t,deletedReviewComments:e}=await this.pullRequestModel.deleteReview(),r=W(e,i=>i.path||"");for(const i in r){const n=(await this.getFileChanges()).find(s=>s.fileName===i);if(n&&n instanceof hi){n.comments=n.comments.filter(a=>a.pullRequestReviewId!==t),n.update(n.comments);const s=(await this.resolvePRCommentController()).commentThreadCache;if(s[n.fileName]){const a=[];s[n.fileName].forEach(o=>{this.updateCommentThreadComments(o,o.comments.filter(u=>!e.some(c=>c.id.toString()===u.commentId))),o.comments.length?a.push(o):o.dispose()}),a.length?s[n.fileName]=a:delete s[n.fileName]}}}this.setContextKey(!1)}async toggleReaction(t,e){if(t.parent.uri.scheme!=="pr")return;const r=we(t.parent.uri);if(!r)return;const i=await this.findMatchingFileNode(t.parent.uri),n=i.comments.findIndex(o=>o.id.toString()===t.commentId);if(n<0)return;let s;t.reactions&&!t.reactions.find(o=>o.label===e.label&&!!o.authorHasReacted)?s=(await this.pullRequestModel.addCommentReaction(t._rawComment.graphNodeId,e)).addReaction.subject.reactionGroups:s=(await this.pullRequestModel.deleteCommentReaction(t._rawComment.graphNodeId,e)).removeReaction.subject.reactionGroups,i.comments[n].reactions=en(s),Ys(t,i.comments[n].reactions);const a=(await this.resolvePRCommentController()).commentThreadCache;a[r.fileName]&&a[r.fileName].forEach(o=>{!o.comments||o.comments.find(u=>u.commentId===t.commentId)&&(o.comments=o.comments)})}dispose(){super.dispose(),es(this._commentHandlerId),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._prCommentController&&this._prCommentController.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose())}};let pr=Ka;kt(pr,"ID","PRNode");var Nd=Object.defineProperty,lt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Nd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Ya(t,e,r){if(!e)return[];if(!r||!r.length)return[];const i=[],n=W(r,s=>String(s.position));for(const s in n){const a=n[s],o=a[0],u=new l.Position(We(o.absolutePosition||0),0),c=new l.Range(u,u),h=b.join(t.rootUri.path,o.path).replace(/\\/g,"/"),w=t.rootUri.with({path:h});i.push({threadId:o.id.toString(),uri:w,range:c,comments:a})}return i}function Dd(t,e,r){r.forEach(i=>{if(i.comments&&i.comments.length){const n=i.comments[0];if(n instanceof me){const s=Bt(t,n._rawComment.position||n._rawComment.originalPosition);if(s){const a=s.type===_e.Delete?s.oldLineNumber:s.newLineNumber,o=We(mi(e,a)),u=new l.Range(o,0,o,0);i.range=u}}}})}class Fd{constructor(e,r,i,n,s){this._reposManager=e,this._repository=r,this._localFileChanges=i,this._obsoleteFileChanges=n,this._comments=s,lt(this,"_localToDispose",[]),lt(this,"_onDidChangeComments",new l.EventEmitter),lt(this,"onDidChangeComments",this._onDidChangeComments.event),lt(this,"_commentHandlerId"),lt(this,"_commentController"),lt(this,"_workspaceFileChangeCommentThreads",{}),lt(this,"_obsoleteFileChangeCommentThreads",{}),lt(this,"_reviewDocumentCommentThreads",new Qa),lt(this,"_prDocumentCommentThreads",new Qa),lt(this,"_visibleNormalTextEditors",[]),this._commentController=l.comments.createCommentController(`review-${e.activePullRequest.number}`,e.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=ja(),Xn(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=l.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this.initializeWorkspaceCommentThreads(),await this.initializeDocumentCommentThreadsAndListeners()}async initializeWorkspaceCommentThreads(){await this._reposManager.activePullRequest.validateDraftMode();const e=this._localFileChanges.map(async i=>{const n=await this.getWorkspaceFileThreadDatas(i);this._workspaceFileChangeCommentThreads[i.fileName]=n.map(s=>nr(s,this._commentController))}),r=mr(this._obsoleteFileChanges).map(i=>{const n=this.outdatedCommentsToCommentThreads(i,i.comments).map(s=>nr(s,this._commentController));this._obsoleteFileChangeCommentThreads[i.fileName]=n});return Promise.all([...e,...r])}async getWorkspaceFileThreadDatas(e){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return[];const r=await this._repository.diffWithHEAD(e.fileName),i=td(e.diffHunks,r,e.comments).filter(n=>n.absolutePosition!==void 0);return Ya(this._repository,e,i)}async initializeDocumentCommentThreadsAndListeners(){this._localToDispose.push(l.window.onDidChangeVisibleTextEditors(async e=>{if(this.visibleEditorsEqual(this._visibleNormalTextEditors,e))return;this._visibleNormalTextEditors=e.filter(n=>n.document.uri.scheme!=="comment");const r=e.filter(n=>{if(n.document.uri.scheme!=="pr")return!1;const s=we(n.document.uri);return!!s&&s.prNumber===this._reposManager.activePullRequest.number});this._prDocumentCommentThreads.maybeDisposeThreads(r,(n,s,a)=>{const o=we(n.document.uri);return!!o&&o.fileName===s&&o.isBase===a}),this._reviewDocumentCommentThreads.maybeDisposeThreads(e,(n,s,a)=>{const o=this.gitRelativeRootPath(n.document.uri.path);if(n.document.uri.scheme!=="review"&&n.document.uri.scheme===this._repository.rootUri.scheme&&n.document.uri.query){const u=Ke(n.document.uri);if(s===o&&u.base===a)return!0}if(n.document.uri.scheme!=="review")return!1;try{const u=Ke(n.document.uri);if(s===o&&u.base===a)return!0}catch{return!1}return!1}),e.filter(n=>n.document.uri.scheme===this._repository.rootUri.scheme).forEach(n=>{const s=this.gitRelativeRootPath(n.document.uri.path),a=this._workspaceFileChangeCommentThreads[s]||[],o=!n.viewColumn;this._workspaceFileChangeCommentThreads[s]=a.map(u=>(u.collapsibleState=o&&!u.isResolved?l.CommentThreadCollapsibleState.Expanded:l.CommentThreadCollapsibleState.Collapsed,u))});for(const n of this._visibleNormalTextEditors)await this.updateCommentThreadsForEditor(n)})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(r=>{for(const i in r)r[i].forEach(n=>{Xi(n,e),st(n)})}),this._reviewDocumentCommentThreads.getDocuments().forEach(r=>{this._reviewDocumentCommentThreads.getAllThreadsForDocument(r).forEach(i=>{Xi(i,e),st(i)})}),this._prDocumentCommentThreads.getDocuments().forEach(r=>{this._prDocumentCommentThreads.getAllThreadsForDocument(r).forEach(i=>{i.comments=i.comments.map(n=>(n.label=e?"Pending":void 0,n)),st(i)})})}))}async updateCommentThreadsForEditor(e){if(e.document.uri.scheme==="pr"){const n=we(e.document.uri);if(n&&n.prNumber===this._reposManager.activePullRequest.number){if(this._prDocumentCommentThreads.getThreadsForDocument(n.fileName,n.isBase))return;this._prDocumentCommentThreads.setDocumentThreads(n.fileName,n.isBase,[]);const a=this._localFileChanges.filter(o=>o.fileName===n.fileName);if(a.length){await this._reposManager.activePullRequest.validateDraftMode();const u=En(e.document.uri,n.isBase,a[0],a[0].comments).map(c=>nr(c,this._commentController));this._prDocumentCommentThreads.setDocumentThreads(n.fileName,n.isBase,u)}}return}const r=this.gitRelativeRootPath(e.document.uri.path);if(e.document.uri.scheme===this._repository.rootUri.scheme&&e.viewColumn!==void 0){const n=this._localFileChanges.filter(o=>o.fileName===r);if(n&&!n.length)return;const s=this._workspaceFileChangeCommentThreads[r];if(!this._reposManager.activePullRequest.isResolved())return;const a=await this.getContentDiff(e.document,r);Dd(n[0].diffHunks,a,s);return}let i;try{i=Ke(e.document.uri)}catch(n){}if(i){if(i.isOutdated||this._reviewDocumentCommentThreads.getThreadsForDocument(r,i.base))return;this._reviewDocumentCommentThreads.setDocumentThreads(r,i.base,[]),await this._reposManager.activePullRequest.validateDraftMode();const a=this.provideCommentsForReviewUri(e.document,i).map(o=>nr(o,this._commentController));this._reviewDocumentCommentThreads.setDocumentThreads(r,i.base,a)}}visibleEditorsEqual(e,r){if(e=e.filter(i=>i.document.uri.scheme!=="comment"),r=r.filter(i=>i.document.uri.scheme!=="comment"),e=v(e,i=>i.document.uri.toString()),r=v(r,i=>i.document.uri.toString()),e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(!r.find(s=>s.document.uri.toString()===e[i].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;if(e.uri.scheme==="pr"){const i=we(e.uri);return!!(this._reposManager.activePullRequest&&i&&this._reposManager.activePullRequest.number===i.prNumber)}const r=l.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}addToCommentThreadCache(e){const r=e.uri,i=l.workspace.getWorkspaceFolder(r);switch(r.scheme){case"pr":const n=we(r);if(n){const{fileName:u,isBase:c}=n,h=this._prDocumentCommentThreads.getThreadsForDocument(u,c)||[];this._prDocumentCommentThreads.setDocumentThreads(u,c,h.concat(e))}return;case"review":const s=r.query&&Ke(r);if(s){const u=this.gitRelativeRootPath(r.path),c=this._reviewDocumentCommentThreads.getThreadsForDocument(u,s.base)||[];this._reviewDocumentCommentThreads.setDocumentThreads(u,s.base,c.concat(e));return}break;case i.uri.scheme:const a=this.gitRelativeRootPath(r.path);this._workspaceFileChangeCommentThreads[a].push(e);return;default:return}}async provideCommentingRanges(e,r){if(e.uri.scheme==="pr"){const s=we(e.uri);if(!s||s.prNumber!==this._reposManager.activePullRequest.number)return;const a=this._localFileChanges.find(o=>o.fileName===s.fileName);return!a||a instanceof At?void 0:kn(a.diffHunks,s.isBase)}let i;try{i=Ke(e.uri)}catch(s){}if(i){const s=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(s)return kn(s.diffHunks,i.base)}const n=l.workspace.getWorkspaceFolder(e.uri);if(!!n&&e.uri.scheme===n.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const s=this.gitRelativeRootPath(e.uri.path),a=mr(this._localFileChanges).find(u=>u.fileName===s),o=[];if(a){if(a.status===ne.RENAME)return[];const u=await this.getContentDiff(e,a.fileName),c=a.diffHunks;for(let h=0;h<c.length;h++){const w=c[h],R=mi(u,w.newLineNumber),q=mi(u,w.newLineNumber+w.newLength-1);R>0&&q>0&&o.push(new l.Range(R-1,0,q-1,0))}}return o}}async getNewCommentPosition(e,r){const i=e.uri;let n=!1;if(i.query){if(i.scheme==="review")try{n=Ke(i).base}catch{}if(i.scheme==="pr"){const o=we(i);n=!!o&&o.isBase}}if(!this._reposManager.activePullRequest)throw new Error("No active pull request");if(!this._reposManager.activePullRequest.validatePullRequestModel("Creating new comment failed"))throw new Error("No upstream branch");const s=await this._repository.diffWithHEAD(r.fileName),a=La(r.diffHunks,s,e.range.start.line+1,n);if(a<0)throw new Error("Comment position cannot be negative");return a}async createNewThread(e,r,i){var n;const s=await this.getNewCommentPosition(e,r),a=e.uri.scheme!=="pr"?(n=this._repository.state.HEAD)==null?void 0:n.commit:void 0;return await this._reposManager.activePullRequest.createReviewComment(i,r.fileName,s,a)}async getContentDiff(e,r){let i;if(e.isDirty){const n=this._repository.state.HEAD.commit,s=e.getText(),o=(await this._repository.getObjectDetails(n,r)).object,u=await this._repository.hashObject(s);i=await this._repository.diffBlobs(o,u)}else i=await this._repository.diffWithHEAD(r);return i}outdatedCommentsToCommentThreads(e,r){if(!r||!r.length)return[];const i=[],n=W(r,s=>String(s.position));for(const s in n){const a=n[s],o=a[0],u=Bt(o.diffHunks||[],o.originalPosition);u&&(o.absolutePosition=u.newLineNumber);const c=new l.Position(We(o.absolutePosition||0),0),h=new l.Range(c,c);i.push({threadId:o.id.toString(),uri:e.filePath,range:h,comments:a})}return i}provideCommentsForReviewUri(e,r){const i=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(i){const u=i.comments,c=r.base;return u.forEach(h=>{h.absolutePosition=Ua(h,i.diffHunks,c)}),Ya(this._repository,i,u.filter(h=>h.absolutePosition!==void 0&&h.absolutePosition>0)).map(h=>(h.uri=e.uri,h))}const n=this.findMatchedFileChangeForReviewDiffView(this._obsoleteFileChanges,e.uri);let s=[];if(n)s=n.comments;else{try{s=this._comments.filter(u=>u.path===r.path&&`${u.originalCommitId}^`===r.commit)}catch(u){}if(!s.length)return[]}const a=W(s,u=>String(u.originalPosition)),o=[];for(const u in a){const h=a[u][0],w=ed(h.diffHunk);if(!w)continue;const R=r.base?w.oldLineNumber:w.oldLineNumber>0?-1:w.newLineNumber;if(R<0)continue;const q=new l.Range(new l.Position(R,0),new l.Position(R,0));o.push({threadId:String(h.id),uri:e.uri,range:q,comments:s})}return o}findMatchedFileChangeForReviewDiffView(e,r){const i=Ke(r),n=e.filter(s=>{if(s instanceof At||s.fileName!==i.path)return!1;if(s.filePath.scheme!=="review"&&s.sha===i.commit)return!0;try{if(JSON.parse(s.filePath.query).commit===i.commit)return!0}catch(a){}try{if(JSON.parse(s.parentFilePath.query).commit===i.commit)return!0}catch(a){}return!1});if(n&&n.length)return n[0]}findMatchedFileByUri(e){let r,i=!1;if(e.scheme==="review"){const a=Ke(e);i=a.isOutdated,r=a.path}e.scheme==="pr"&&(r=we(e).fileName);const n=i?this._obsoleteFileChanges:this._localFileChanges,s=mr(n).filter(a=>e.scheme==="review"||e.scheme==="pr"?a.fileName===r:a.filePath.path===e.path);if(s&&s.length)return s[0]}gitRelativeRootPath(e){return b.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){var i;const n=this.optimisticallyAddComment(e,r,!0);try{const s=this.findMatchedFileByUri(e.uri);if(!s)throw new Error("No matching file found");const a=await this.getNewCommentPosition(e,s),o=e.uri.scheme!=="pr"?(i=this._repository.state.HEAD)==null?void 0:i.commit:void 0,u=await this._reposManager.activePullRequest.startReview({body:r,path:s.fileName,position:a},o);e.threadId=u.id.toString(),this.addToCommentThreadCache(e),this.replaceTemporaryComment(e,u,n),await this.updateWithNewComment(u,s)}catch(s){l.window.showErrorMessage(`Starting review failed: ${s}`),e.comments=e.comments.map(a=>(a instanceof xe&&a.id===n&&(a.mode=l.CommentMode.Editing),a))}}async finishReview(e,r){try{await this.createOrReplyComment(e,r),await this._reposManager.activePullRequest.submitReview()}catch(i){l.window.showErrorMessage(`Failed to submit the review: ${i}`)}}getUpdatedThreads(e,r){const i=[];return e.forEach(n=>{n.comments=n.comments.filter(s=>!r.some(a=>a.id.toString()===s.commentId)),st(n),n.comments.length?i.push(n):n.dispose()}),i}async deleteReview(){const{deletedReviewComments:e}=await this._reposManager.activePullRequest.deleteReview();[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads].forEach(r=>{for(const i in r){const n=this.getUpdatedThreads(r[i],e);n.length?r[i]=n:delete r[i]}}),this._reviewDocumentCommentThreads.getDocuments().forEach(r=>{const i=this._reviewDocumentCommentThreads.getThreadsForDocument(r,!0);if(i){const s=this.getUpdatedThreads(i,e);this._reviewDocumentCommentThreads.setDocumentThreads(r,!0,s.length?s:void 0)}const n=this._reviewDocumentCommentThreads.getThreadsForDocument(r,!1);if(n){const s=this.getUpdatedThreads(n,e);this._reviewDocumentCommentThreads.setDocumentThreads(r,!1,s.length?s:void 0)}}),this._prDocumentCommentThreads.getDocuments().forEach(r=>{const i=this._prDocumentCommentThreads.getThreadsForDocument(r,!0);if(i){const s=this.getUpdatedThreads(i,e);this._prDocumentCommentThreads.setDocumentThreads(r,!0,s.length?s:void 0)}const n=this._prDocumentCommentThreads.getThreadsForDocument(r,!1);if(n){const s=this.getUpdatedThreads(n,e);this._prDocumentCommentThreads.setDocumentThreads(r,!1,s.length?s:void 0)}})}optimisticallyAddComment(e,r,i){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),s=new xe(e,r,i,n);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,r){e.comments=r,st(e)}optimisticallyEditComment(e,r){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),n=new xe(e,r.body instanceof l.MarkdownString?r.body.value:r.body,!!r.label,i,r);return e.comments=e.comments.map(s=>s instanceof me&&s.commentId===r.commentId?n:s),n.id}replaceTemporaryComment(e,r,i){e.comments=e.comments.map(n=>n instanceof xe&&n.id===i?new me(r,e):n)}async updateWithNewComment(e,r){r.update(r.comments.concat(e)),this._comments.push(e),await this.update(this._localFileChanges,this._obsoleteFileChanges),this._onDidChangeComments.fire(this._comments)}async createOrReplyComment(e,r,i){const n=e.comments.length,s=i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,a=this.optimisticallyAddComment(e,r,s);try{const o=this.findMatchedFileByUri(e.uri);if(!o)throw new Error(`Cannot find document ${e.uri.toString()}`);let u;if(!n)u=await this.createNewThread(e,o,r),e.threadId=u.id.toString(),this.addToCommentThreadCache(e);else{const c=e.comments[0];if(c instanceof me)u=await this._reposManager.activePullRequest.createReviewCommentReply(r,c._rawComment);else throw new Error("Cannot reply to temporary comment")}this.replaceTemporaryComment(e,u,a),this.updateWithNewComment(u,o)}catch(o){l.window.showErrorMessage(`Creating comment failed: ${o}`),e.comments=e.comments.map(u=>(u instanceof xe&&u.id===a&&(u.mode=l.CommentMode.Editing),u))}}async editComment(e,r){if(r instanceof me){const i=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const n=this.findMatchedFileByUri(e.uri);if(!n)throw new Error("Unable to find matching file");const s=await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof l.MarkdownString?r.body.value:r.body),a=n.comments.findIndex(u=>String(u.id)===r.commentId);a>-1&&n.comments.splice(a,1,s);const o=this._comments.findIndex(u=>String(u.id)===r.commentId);o>-1&&this._comments.splice(o,1,s),this.replaceTemporaryComment(e,s,i),st(e)}catch(n){l.window.showErrorMessage(A(n)),e.comments=e.comments.map(s=>s instanceof xe&&s.id===i?new me(r._rawComment,e):s)}}else this.createOrReplyComment(e,r.body instanceof l.MarkdownString?r.body.value:r.body)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const i=this.findMatchedFileByUri(e.uri);if(!i)throw new Error("Unable to find matching file");if(r instanceof me){await this._reposManager.activePullRequest.deleteReviewComment(r.commentId);const s=i.comments.findIndex(o=>o.id.toString()===r.commentId);s>-1&&(i.comments.splice(s,1),i.update(i.comments));const a=this._comments.findIndex(o=>o.id.toString()===r.commentId);a>-1&&this._comments.splice(a,1),e.comments=e.comments.filter(o=>o instanceof me&&o.commentId!==r.commentId)}else e.comments=e.comments.filter(s=>s instanceof xe&&s.id===r.id);e.comments.length===0?e.dispose():st(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges,this._obsoleteFileChanges)}catch(i){throw new Error(A(i))}}async update(e,r){await this._reposManager.activePullRequest.validateDraftMode();for(const i in this._workspaceFileChangeCommentThreads)this.updateFileChangeCommentThreads(e,i,!1);this._localFileChanges=e;for(const i in this._obsoleteFileChangeCommentThreads)this.updateFileChangeCommentThreads(mr(r),i,!0);this._obsoleteFileChanges=r;for(const i of l.window.visibleTextEditors)await this.updateCommentThreadsForEditor(i)}async updateFileChangeCommentThreads(e,r,i){const n=e.find(s=>s.fileName===r);if(!n)this._workspaceFileChangeCommentThreads[r].forEach(s=>s.dispose()),delete this._workspaceFileChangeCommentThreads[r];else{const s=i?this._obsoleteFileChangeCommentThreads[r]:this._workspaceFileChangeCommentThreads[r],a=i?this.outdatedCommentsToCommentThreads(n,n.comments):await this.getWorkspaceFileThreadDatas(n),o=[];a.forEach(u=>{const c=s.find(h=>h.threadId===u.threadId);c?(o.push(c),c.range=u.range,c.comments=u.comments.map(h=>new me(h,c)),st(c)):o.push(nr(u,this._commentController))}),s.forEach(u=>{a.filter(h=>h.threadId===u.threadId)||u.dispose()}),this._workspaceFileChangeCommentThreads[r]=o}}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");const i=this.findMatchedFileByUri(e.parent.uri);if(!i)throw new Error("Unable to find matching file");let n=[];e.reactions&&!e.reactions.find(a=>a.label===r.label&&!!a.authorHasReacted)?n=(await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r)).addReaction.subject.reactionGroups:n=(await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)).removeReaction.subject.reactionGroups;const s=i.comments.findIndex(a=>a.id.toString()===e.commentId);if(s>-1){const a=i.comments[s];a.reactions=en(n);const o=Ks(a.reactions),u=i.fileName;[...this._prDocumentCommentThreads.getAllThreadsForDocument(u)||[],...this._reviewDocumentCommentThreads.getAllThreadsForDocument(u)||[],...this._workspaceFileChangeCommentThreads[u]||[],...this._obsoleteFileChangeCommentThreads[u]||[]].filter(h=>!!h.comments.find(w=>w.commentId===e.commentId)).forEach(h=>{h.comments=h.comments.map(w=>(w.commentId===e.commentId&&me.is(w)&&(w.reactions=o),w))})}}catch(i){throw new Error(A(i))}}dispose(){this._commentController&&this._commentController.dispose(),es(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var Id=Object.defineProperty,Pe=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Id(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ja=class{constructor(t,e,r,i,n){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=i,this.changesInPrDataProvider=n,Pe(this,"_localToDispose",[]),Pe(this,"_disposables"),Pe(this,"_comments",[]),Pe(this,"_localFileChanges",[]),Pe(this,"_obsoleteFileChanges",[]),Pe(this,"_lastCommitSha"),Pe(this,"_updateMessageShown",!1),Pe(this,"_validateStatusInProgress"),Pe(this,"_reviewCommentController"),Pe(this,"_statusBarItem"),Pe(this,"_prNumber"),Pe(this,"_previousRepositoryState"),Pe(this,"_webviewViewProvider"),Pe(this,"_createPullRequestHelper"),Pe(this,"_switchingToReviewMode"),Pe(this,"justSwitchedToRevieMode",!1),Pe(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Cr(this._repository)},this.registerListeners(),this.updateState(),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let i;!e||!r?i=!1:i=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const n=i&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,s=Cr(this._repository),a=this._previousRepositoryState.remotes.length===s.length&&this._previousRepositoryState.remotes.every(o=>s.some(u=>o.equals(u)));(!n||!a)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:s},this.updateState(!!e))})),this._disposables.push(l.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(l.window.registerTerminalLinkProvider(new vc(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=l.window.createStatusBarItem(l.StatusBarAlignment.Left)),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const r=this._repository.state.HEAD;if(r){const i=r.upstream?r.upstream.remote:null;i&&(await this._repository.fetch(i,(e=this._repository.state.HEAD)==null?void 0:e.name),(t.head.sha!==this._lastCommitSha||r.behind!==void 0&&r.behind>0)&&!this._updateMessageShown&&(this._updateMessageShown=!0,await l.window.showInformationMessage("There are updates available for this pull request.",{},"Pull")==="Pull"&&(await l.commands.executeCommand("git.pull"),this._updateMessageShown=!1)))}}async updateState(t=!1){if(!this.switchingToReviewMode)return this._validateStatusInProgress?($.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async e=>await this.validateState(t)),this._validateStatusInProgress):($.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t),this._validateStatusInProgress)}async validateState(t){if($.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const e=this._repository.state.HEAD;let r=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!r){$.appendLine(`Review> no matching pull request metadata found for current branch ${e.name}`);const u=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();u&&(et.associateBranchWithPullRequest(this._repository,u.model,e.name),r=u)}if(!r){$.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${e.name}`),this.clear(!0);return}const i=e.commit!==this._lastCommitSha&&e.ahead===0&&e.behind===0;if(this._prNumber===r.prNumber&&!i){l.commands.executeCommand("pr.refreshList");return}if(!(e.upstream?e.upstream.remote:null)){$.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}$.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${r.prNumber}`),this.clear(!1),this._prNumber=r.prNumber,this._lastCommitSha=void 0;const{owner:s,repositoryName:a}=r;$.appendLine("Review> Resolving pull request");const o=await this._folderRepoManager.resolvePullRequest(s,a,r.prNumber);if(!o||!o.isResolved()){this._prNumber=void 0,$.appendLine("Review> This PR is no longer valid");return}if(this._folderRepoManager.activePullRequest=o,this._lastCommitSha=o.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(o)),$.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(o),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,o,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,$.appendLine("Review> register comments provider"),await this.registerCommentController(),this._webviewViewProvider?this._webviewViewProvider.updatePullRequest(o):(this._webviewViewProvider=new gc(this._context.extensionUri,this._folderRepoManager,o),this._context.subscriptions.push(l.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(l.commands.registerCommand("pr.refreshActivePullRequest",u=>{var c;(c=this._webviewViewProvider)==null||c.refresh()})),!t&&this._context.workspaceState.get(Ut)&&l.env.remoteName==="codespaces"&&this._webviewViewProvider.show()),this.statusBarItem.text=`$(git-branch) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[o]},$.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),l.commands.executeCommand("pr.refreshList"),!t&&this._context.workspaceState.get(Ut)&&l.env.remoteName==="codespaces"&&this.localFileChanges.length>0){let u;for(const c of this.localFileChanges)if(c.status===ne.MODIFY){u=c;break}u=u!=null?u:this.localFileChanges[0],u.openDiff(this._folderRepoManager)}this._validateStatusInProgress=void 0}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const i=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!i||!i.isResolved()){$.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(i),await this.getPullRequestData(i),await this._reviewCommentController.update(this._localFileChanges,this._obsoleteFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const i=[],n=t.mergeBase||t.base.sha,s=t.head.sha;for(let a=0;a<e.length;a++){const o=e[a];let u=[];if(o instanceof os)u=o.diffHunks;else if(o.status!==ne.RENAME)try{const V=await this._repository.diffBetween(t.base.sha,t.head.sha,o.fileName);u=Ni(V)}catch(V){$.appendLine(`Failed to parse patch for outdated comments: ${V}`)}const c=b.join(this._repository.rootUri.path,o.fileName).replace(/\\/g,"/"),h=this._repository.rootUri.with({path:c}),w=o.status===ne.DELETE?Ct(h,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):h,R=Ct(h,o.status===ne.RENAME?o.previousFileName:o.fileName,void 0,o.status===ne.ADD?"":n,!1,{base:!0},this._repository.rootUri),q=new dr(this.changesInPrDataProvider.view,this._folderRepoManager,t,o.status,o.fileName,o.blobUrl,w,R,u,r.filter(V=>V.path===o.fileName),s);i.push(q)}return i}async getPullRequestData(t){try{this._comments=await t.getReviewComments();const e=this._comments.filter(o=>o.position),r=this._comments.filter(o=>!o.position),i=await t.getFileChangesInfo(),n=t.mergeBase||t.base.sha,s=await Fi(i,this._repository,n);this._localFileChanges=await this.getLocalChangeNodes(t,s,e);const a=W(r,o=>o.originalCommitId);this._obsoleteFileChanges=[];for(const o in a){const u=a[o],c=W(u,h=>h.path);for(const h in c){let w=[];try{const U=await this._repository.diffBetween(t.base.sha,o,h);w=Ni(U)}catch(U){$.appendLine(`Failed to parse patch for outdated comments: ${U}`)}const R=c[h],q=l.Uri.file(b.join(`commit~${o.substr(0,8)}`,h)),V=new dr(this.changesInPrDataProvider.view,this._folderRepoManager,t,ne.MODIFY,h,void 0,Ct(q,h,void 0,R[0].originalCommitId,!0,{base:!1},this._repository.rootUri),Ct(q,h,void 0,R[0].originalCommitId,!0,{base:!0},this._repository.rootUri),w,R,o);this._obsoleteFileChanges.push(V)}}return Promise.resolve(void 0)}catch(e){$.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Fd(this._folderRepoManager,this._repository,this._localFileChanges,this._obsoleteFileChanges,this._comments),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){$.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if($.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.gitErrorCode&&(e.gitErrorCode===Et.LocalChangesOverwritten||e.gitErrorCode===Et.DirtyWorkTree)){l.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}l.window.showErrorMessage(A(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fullfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),$.appendLine(`Review> switch to Pull Request #${t.number} - done`,Ja.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const i=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),n=await i.getViewerPermission();if(n===He.Read||n===He.Triage||n===He.Unknown){const a=await this._folderRepoManager.tryOfferToFork(i);if(!a)return;r=this._folderRepoManager.getGitHubRemotes().find(o=>o.remoteName===a)}if(!r)return;const s=r;return new Promise(async a=>{const o=l.window.createInputBox();o.value=t.name,o.ignoreFocusOut=!0,o.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const u=async function(c){try{o.busy=!0,await this._reposManager.getBranch(s,c)?o.validationMessage=`Branch ${c} already exists in ${s.owner}/${s.repositoryName}`:o.validationMessage=void 0}catch(h){o.validationMessage=void 0}o.busy=!1};await u(t.name),o.onDidChangeValue(u.bind(this)),o.onDidAccept(async()=>{o.validationMessage=void 0,o.hide();try{await this._repository.push(s.remoteName,`${t.name}:${o.value}`,!0)}catch(h){throw h.gitErrorCode===Et.PushRejected&&(l.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),a(void 0)),h.gitErrorCode===Et.RemoteConnectionError&&(l.window.showWarningMessage(`Could not read from remote repository '${s.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),a(void 0)),h}const c=await this._repository.getBranch(t.name);(!c||!c.upstream)&&a(void 0),a(c)}),o.show()})}async getRemote(t,e,r){if(!t.length){l.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return Ba.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let i=!1;const n=t.map(a=>{const o=Ba.fromRemote(a);if(r){const{owner:u,name:c}=r;o.picked=o.owner===u&&o.name===c,o.picked&&(i=!0)}return o});!i&&r&&n.unshift(r);const s=await l.window.showQuickPick(n,{ignoreFocusOut:!0,placeHolder:e});if(!!s)return s}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new dd(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState();const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await Za(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){l.workspace.getConfiguration(yt).get("focusedMode")&&this._folderRepoManager.activePullRequest?(l.commands.executeCommand("setContext",Ut,!0),await this._context.workspaceState.update(Ut,!0)):(l.commands.executeCommand("setContext",Ut,!1),this._context.workspaceState.update(Ut,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],l.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=Ke(t);let i=mr(this._localFileChanges).filter(n=>n.fileName===e).filter(n=>n.sha===r||(n.parentSha?n.parentSha:`${n.sha}^`)===r);if(i.length){const n=i[0],s=r===n.sha?_e.Delete:_e.Add;return n.diffHunks.map(o=>o.diffLines.filter(u=>u.type!==s).map(u=>u.text)).reduce((o,u)=>o.concat(...u),[]).join(`
`)}if(i=mr(this._obsoleteFileChanges).filter(n=>n.fileName===e).filter(n=>n.sha===r||(n.parentSha?n.parentSha:`${n.sha}^`)===r),i.length){const n=i[0],s=r===n.sha?_e.Delete:_e.Add,a=[],o=W(n.comments,u=>String(u.originalPosition));for(const u in o){if(!o[u][0].diffHunks)continue;const c=o[u][0].diffHunks.map(h=>h.diffLines.filter(w=>w.type!==s).map(w=>w.text)).reduce((h,w)=>h.concat(...w),[]);a.push(...c)}return a.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(i=>i.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let Wt=Ja;Pe(Wt,"ID","Review");const fi=new l.EventEmitter,Ad=fi.event;function Pr(t,e){if(e)return e instanceof pr?e.pullRequestModel:e;if(!t.activePullRequest)throw l.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function Za(t,e,r,i,n){const s=Pr(n,r);i==null||i.reveal(i,{select:!0,focus:!0}),bt.createOrShow(t.extensionUri,n,s),e.sendTelemetryEvent("pr.openDescription")}async function Nr(t,e,r){var i;if(t.length===1)return t[0];const n=t.map(s=>({label:e(s),itemValue:s}));return(i=await l.window.showQuickPick(n,r))==null?void 0:i.itemValue}async function Dr(t,e){t instanceof pr||t instanceof jt?l.commands.executeCommand("vscode.open",l.Uri.parse(t.pullRequestModel.html_url)):l.commands.executeCommand("vscode.open",l.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function Md(t,e,r,i,n,s){t.subscriptions.push(l.commands.registerCommand("auth.signout",async()=>{n.logout()})),t.subscriptions.push(l.commands.registerCommand("pr.openPullRequestOnGitHub",async u=>{if(u)Dr(u,i);else{const c=e.folderManagers.map(h=>h.activePullRequest).filter(h=>!!h);if(c.length>=1){const h=await Nr(c,w=>w.html_url);h&&Dr(h,i)}}})),t.subscriptions.push(l.commands.registerCommand("review.suggestDiff",async u=>{try{const c=await Nr(e.folderManagers,Z=>b.basename(Z.repository.rootUri.fsPath));if(!c||!c.activePullRequest)return;const{indexChanges:h,workingTreeChanges:w}=c.repository.state;if(!h.length)if(w.length)if(await l.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await l.commands.executeCommand("git.stageAll");else return;else{l.window.showInformationMessage("There are no changes to suggest.");return}const R=await c.repository.diff(!0);let q="";u&&u.inputBox&&u.inputBox.value&&(q=`${u.inputBox.value}
`,u.inputBox.value="");const V=`${q}\`\`\`diff
${R}
\`\`\``;await c.activePullRequest.createIssueComment(V),await l.commands.executeCommand("git.unstageAll");const U=b.join(c.repository.rootUri.path,".git",`${c.activePullRequest.number}.diff`),z=new TextEncoder,K=l.Uri.parse(U);await l.workspace.fs.writeFile(K,z.encode(R)),await c.repository.apply(U,!0),await l.workspace.fs.delete(K)}catch(c){$.appendLine(`Applying patch failed: ${c}`),l.window.showErrorMessage(`Applying patch failed: ${A(c)}`)}})),t.subscriptions.push(l.commands.registerCommand("pr.openFileOnGitHub",u=>{l.commands.executeCommand("vscode.open",l.Uri.parse(u.blobUrl))})),t.subscriptions.push(l.commands.registerCommand("pr.copyCommitHash",u=>{l.env.clipboard.writeText(u.sha)})),t.subscriptions.push(l.commands.registerCommand("pr.openOriginalFile",async u=>{const c=e.getManagerForIssueModel(u.pullRequest);if(c){const h=await Ti(u.parentFilePath,c.repository);l.commands.executeCommand("vscode.open",h||u.parentFilePath)}})),t.subscriptions.push(l.commands.registerCommand("pr.openModifiedFile",u=>{l.commands.executeCommand("vscode.open",u.filePath)})),t.subscriptions.push(l.commands.registerCommand("pr.openDiffView",u=>{const c=e.getManagerForIssueModel(u.pullRequest);!c||u.openDiff(c)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteLocalBranch",async u=>{const c=e.getManagerForIssueModel(u.pullRequestModel);if(!c)return;const h=Pr(c,u),w="delete branch (even if not merged)";let R=null;try{await c.deleteLocalPullRequest(h)}catch(q){if(q.gitErrorCode===Et.BranchNotFullyMerged){if(await l.window.showErrorMessage(`The branch '${h.localBranchName}' is not fully merged, are you sure you want to delete it? `,w)!==w)return;try{await c.deleteLocalPullRequest(h,!0)}catch(U){R=U}}else R=q}R?(i.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await l.window.showErrorMessage(`Deleting local pull request branch failed: ${R}`)):(i.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),l.commands.executeCommand("pr.refreshList"))}));function a(u){if(u){const c=l.Uri.file(u).toString();for(const h of r)if(h.repository.rootUri.toString()===c)return h}return Nr(r,c=>b.basename(c.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function o(u){return!!(u==null?void 0:u.rootUri)}t.subscriptions.push(l.commands.registerCommand("pr.create",async u=>{var c,h;o(u)?(c=await a(u.rootUri.fsPath))==null||c.createPullRequest():(h=await a(u==null?void 0:u.repoPath))==null||h.createPullRequest(u==null?void 0:u.compareBranch)})),t.subscriptions.push(l.commands.registerCommand("pr.pick",async u=>{let c;u instanceof pr||u instanceof jt?c=u.pullRequestModel:c=u;const h=u instanceof vt;return i.sendTelemetryEvent("pr.checkout",{fromDescription:h.toString()}),l.window.withProgress({location:l.ProgressLocation.SourceControl,title:`Switching to Pull Request #${c.number}`},async(w,R)=>{var q;await((q=Wt.getReviewManagerForRepository(r,c.githubRepository))==null?void 0:q.switch(c))})})),t.subscriptions.push(l.commands.registerCommand("pr.exit",async u=>{let c;u instanceof pr||u instanceof jt?c=u.pullRequestModel:c=u;const h=u instanceof vt;return i.sendTelemetryEvent("pr.exit",{fromDescription:h.toString()}),l.window.withProgress({location:l.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async(w,R)=>{const q=await c.githubRepository.getDefaultBranch(),V=e.getManagerForIssueModel(c);V&&V.checkoutDefaultBranch(q)})})),t.subscriptions.push(l.commands.registerCommand("pr.merge",async u=>{const c=e.getManagerForIssueModel(u==null?void 0:u.pullRequestModel);if(!c)return;const h=Pr(c,u);return h.base&&h.head&&!h.base.repositoryCloneUrl.equals(h.head.repositoryCloneUrl)&&sn()?Dr(h,i):l.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async q=>{let V;if(q==="Yes")try{return V=await c.mergePullRequest(h),V}catch(U){return l.window.showErrorMessage(`Unable to merge pull request. ${A(U)}`),V}})})),t.subscriptions.push(l.commands.registerCommand("pr.readyForReview",async u=>{const c=e.getManagerForIssueModel(u==null?void 0:u.pullRequestModel);if(!c)return;const h=Pr(c,u);return l.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async w=>{let R;if(w==="Yes")try{return R=await h.setReadyForReview(),l.commands.executeCommand("pr.refreshList"),R}catch(q){return l.window.showErrorMessage(`Unable to mark pull request as ready to review. ${A(q)}`),R}})})),t.subscriptions.push(l.commands.registerCommand("pr.close",async(u,c)=>{let h;if(u)h=u instanceof vt?u:u.pullRequestModel;else{const R=e.folderManagers.map(q=>q.activePullRequest).filter(q=>!!q);h=await Nr(R,q=>`${q.number}: ${q.title}`,{placeHolder:"Pull request to close"})}if(!h)return;const w=h;return l.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async R=>{if(R==="Yes")try{let q;c&&(q=await w.createIssueComment(c));const V=await w.close();return l.commands.executeCommand("pr.refreshList"),fi.fire(V),q}catch(q){l.window.showErrorMessage(`Unable to close pull request. ${A(q)}`),fi.fire()}fi.fire()})})),t.subscriptions.push(l.commands.registerCommand("pr.openDescription",async u=>{let c;if(u)c=u instanceof jt?u.pullRequestModel:u;else{const R=e.folderManagers.map(q=>q.activePullRequest).filter(q=>!!q);R.length>=1&&(c=await Nr(R,q=>q.title))}if(!c){$.appendLine("No pull request found.");return}const h=e.getManagerForIssueModel(c);if(!h)return;let w;if(u instanceof jt)w=u;else{const R=Wt.getReviewManagerForFolderManager(r,h);if(!R)return;w=R.changesInPrDataProvider.getDescriptionNode(h)}await Za(t,i,c,w,h)})),t.subscriptions.push(l.commands.registerCommand("pr.refreshDescription",async()=>{bt.currentPanel&&bt.refresh()})),t.subscriptions.push(l.commands.registerCommand("pr.openDescriptionToTheSide",async u=>{const c=e.getManagerForIssueModel(u.pullRequestModel);if(!c)return;const h=u.pullRequestModel,w=Pr(c,h);u.reveal(u,{select:!0,focus:!0}),bt.createOrShow(t.extensionUri,c,w,!0),i.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(l.commands.registerCommand("pr.signin",async()=>{await e.authenticate()})),t.subscriptions.push(l.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const u of e.folderManagers)await u.deleteLocalBranchesNRemotes()})),t.subscriptions.push(l.commands.registerCommand("pr.signinAndRefreshList",async()=>{await e.authenticate()&&l.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(l.commands.registerCommand("pr.configureRemotes",async()=>l.commands.executeCommand("workbench.action.openSettings",`@ext:${qt} remotes`))),t.subscriptions.push(l.commands.registerCommand("pr.startReview",async u=>{i.sendTelemetryEvent("pr.startReview");const c=Yt(u.thread);c&&c.startReview(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.finishReview",async u=>{i.sendTelemetryEvent("pr.finishReview");const c=Yt(u.thread);c&&await c.finishReview(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteReview",async u=>{if(i.sendTelemetryEvent("pr.deleteReview"),await l.window.showWarningMessage("Delete this review and all associated comments?",{modal:!0},"Delete")){const h=Yt(u.thread);h&&await h.deleteReview(),u.thread.comments.length||u.thread.dispose()}})),t.subscriptions.push(l.commands.registerCommand("pr.createComment",async u=>{i.sendTelemetryEvent("pr.createComment");const c=Yt(u.thread);c&&c.createOrReplyComment(u.thread,u.text)})),t.subscriptions.push(l.commands.registerCommand("pr.editComment",async u=>{i.sendTelemetryEvent("pr.editComment"),u.startEdit()})),t.subscriptions.push(l.commands.registerCommand("pr.cancelEditComment",async u=>{i.sendTelemetryEvent("pr.cancelEditComment"),u.cancelEdit()})),t.subscriptions.push(l.commands.registerCommand("pr.saveComment",async u=>{i.sendTelemetryEvent("pr.saveComment");const c=Yt(u.parent);c&&await c.editComment(u.parent,u)})),t.subscriptions.push(l.commands.registerCommand("pr.deleteComment",async u=>{if(i.sendTelemetryEvent("pr.deleteComment"),await l.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const h=Yt(u.parent);h&&await h.deleteComment(u.parent,u)}})),t.subscriptions.push(l.commands.registerCommand("review.openFile",u=>{var c;const h=u instanceof dr?u.openFileCommand():Ga(u);l.commands.executeCommand(h.command,...(c=h.arguments)!=null?c:[])})),t.subscriptions.push(l.commands.registerCommand("pr.refreshChanges",u=>{r.forEach(c=>{c.updateComments(),bt.refresh(),c.changesInPrDataProvider.refresh()})})),t.subscriptions.push(l.commands.registerCommand("pr.setFileListLayoutAsTree",u=>{l.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(l.commands.registerCommand("pr.setFileListLayoutAsFlat",u=>{l.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(l.commands.registerCommand("pr.refreshPullRequest",u=>{var c;const h=e.getManagerForIssueModel(u.pullRequestModel);h&&u.pullRequestModel.equals(h==null?void 0:h.activePullRequest)&&((c=Wt.getReviewManagerForFolderManager(r,h))==null||c.updateComments()),bt.refresh(),s.refresh(u)}))}let Fr;const xd={};function Od(t){Fr=t.globalState}const Xa=(t,e)=>{if(!Fr)throw new Error("Persistent store not initialized.");return Fr.get(t+":"+e,xd)},eo=(t,e,r)=>{if(!Fr)throw new Error("Persistent store not initialized.");return Fr.update(t+":"+e,r)};var fr=oe(9035),qd=Object.defineProperty,to=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?qd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function Ud(t){const e=await l.workspace.fs.readFile(l.Uri.file(b.join(t,"product.json")));return JSON.parse(e.toString())}async function Ld(t){const e=await l.workspace.fs.readFile(l.Uri.file(b.join(t,"package.json")));return JSON.parse(e.toString())}class $d{constructor(e){this.baseReporter=e,to(this,"sharedProperties",{})}sendTelemetryEvent(e,r,i){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...r},i)}sendTelemetryErrorEvent(e,r,i){this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const i={};for(const[n,s]of r)i[n]=s;this.sendTelemetryEvent(e,i)}dispose(){return this.baseReporter.dispose()}}function Gd(t){switch(t.quality){case"stable":return fr.aU.Public;case"insider":return fr.aU.Insiders;case"exploration":return fr.aU.Internal;case void 0:return fr.aU.Team;default:return fr.aU.Public}}class Hd{constructor(){to(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Vd(t,e){const r=await Ld(t.extensionPath),i=await Ud(l.env.appRoot),n=Gd(i);return r.name==="vscode-pull-request-github"?(0,fr.X7)(`${r.publisher}.${r.name}`,r.version,n,e,t.globalState):new Hd}function gi(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Bd=oe(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function ro(t){return Object.prototype.toString.call(t)==="[object Object]"}function io(t){var e,r;return ro(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(ro(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function jd(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function no(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(i=>{io(e[i])?i in t?r[i]=no(t[i],e[i]):Object.assign(r,{[i]:e[i]}):Object.assign(r,{[i]:e[i]})}),r}function so(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function Cn(t,e,r){if(typeof e=="string"){let[n,s]=e.split(" ");r=Object.assign(s?{method:n,url:s}:{url:n},r)}else r=Object.assign({},e);r.headers=jd(r.headers),so(r),so(r.headers);const i=no(t||{},r);return t&&t.mediaType.previews.length&&(i.mediaType.previews=t.mediaType.previews.filter(n=>!i.mediaType.previews.includes(n)).concat(i.mediaType.previews)),i.mediaType.previews=i.mediaType.previews.map(n=>n.replace(/-preview/,"")),i}function Qd(t,e){const r=/\?/.test(t)?"&":"?",i=Object.keys(e);return i.length===0?t:t+r+i.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}const Wd=/\{[^}]+\}/g;function zd(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Kd(t){const e=t.match(Wd);return e?e.map(zd).reduce((r,i)=>r.concat(i),[]):[]}function ao(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,i)=>(r[i]=t[i],r),{})}function oo(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function gr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ir(t,e,r){return e=t==="+"||t==="#"?oo(e):gr(e),r?gr(r)+"="+e:e}function vr(t){return t!=null}function Sn(t){return t===";"||t==="&"||t==="?"}function Yd(t,e,r,i){var n=t[r],s=[];if(vr(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),i&&i!=="*"&&(n=n.substring(0,parseInt(i,10))),s.push(Ir(e,n,Sn(e)?r:""));else if(i==="*")Array.isArray(n)?n.filter(vr).forEach(function(a){s.push(Ir(e,a,Sn(e)?r:""))}):Object.keys(n).forEach(function(a){vr(n[a])&&s.push(Ir(e,n[a],a))});else{const a=[];Array.isArray(n)?n.filter(vr).forEach(function(o){a.push(Ir(e,o))}):Object.keys(n).forEach(function(o){vr(n[o])&&(a.push(gr(o)),a.push(Ir(e,n[o].toString())))}),Sn(e)?s.push(gr(r)+"="+a.join(",")):a.length!==0&&s.push(a.join(","))}else e===";"?vr(n)&&s.push(gr(r)):n===""&&(e==="&"||e==="?")?s.push(gr(r)+"="):n===""&&s.push("");return s}function Jd(t){return{expand:Zd.bind(null,t)}}function Zd(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(i,n,s){if(n){let o="";const u=[];if(r.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(c){var h=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);u.push(Yd(e,o,h[1],h[2]||h[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(u.length!==0?o:"")+u.join(a)}else return u.join(",")}else return oo(s)})}function lo(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),i=Object.assign({},t.headers),n,s=ao(t,["method","baseUrl","url","headers","request","mediaType"]);const a=Kd(r);r=Jd(r).expand(s),/^http/.test(r)||(r=t.baseUrl+r);const o=Object.keys(t).filter(h=>a.includes(h)).concat("baseUrl"),u=ao(s,o);if(!/application\/octet-stream/i.test(i.accept)&&(t.mediaType.format&&(i.accept=i.accept.split(/,/).map(h=>h.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const h=i.accept.match(/[\w-]+(?=-preview)/g)||[];i.accept=h.concat(t.mediaType.previews).map(w=>{const R=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${w}-preview${R}`}).join(",")}return["GET","HEAD"].includes(e)?r=Qd(r,u):"data"in u?n=u.data:Object.keys(u).length?n=u:i["content-length"]=0,!i["content-type"]&&typeof n!="undefined"&&(i["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n=="undefined"&&(n=""),Object.assign({method:e,url:r,headers:i},typeof n!="undefined"?{body:n}:null,t.request?{request:t.request}:null)}function Xd(t,e,r){return lo(Cn(t,e,r))}function uo(t,e){const r=Cn(t,e),i=Xd.bind(null,r);return Object.assign(i,{DEFAULTS:r,defaults:uo.bind(null,r),merge:Cn.bind(null,r),parse:lo})}const em=`octokit-endpoint.js/6.0.11 ${gi()}`,tm=uo(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":em},mediaType:{format:"",previews:[]}});class rm extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var im=oe(778),nm=oe.n(im);const sm=nm()(t=>console.warn(t));class Ar extends Error{constructor(e,r,i){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return sm(new rm("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=i.headers||{};const n=Object.assign({},i.request);i.request.headers.authorization&&(n.headers=Object.assign({},i.request.headers,{authorization:i.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}}const am="5.4.14";function om(t){return t.arrayBuffer()}function co(t){(io(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,i;return(t.request&&t.request.fetch||on())(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(s=>{i=s.url,r=s.status;for(const o of s.headers)e[o[0]]=o[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new Ar(s.statusText,r,{headers:e,request:t})}if(r===304)throw new Ar("Not modified",r,{headers:e,request:t});if(r>=400)return s.text().then(o=>{const u=new Ar(o,r,{headers:e,request:t});try{let c=JSON.parse(u.message);Object.assign(u,c);let h=c.errors;u.message=u.message+": "+h.map(JSON.stringify).join(", ")}catch(c){}throw u});const a=s.headers.get("content-type");return/application\/json/.test(a)?s.json():!a||/^text\/|charset=utf-8$/.test(a)?s.text():om(s)}).then(s=>({status:r,url:i,headers:e,data:s})).catch(s=>{throw s instanceof Ar?s:new Ar(s.message,500,{headers:e,request:t})})}function Tn(t,e){const r=t.defaults(e);return Object.assign(function(n,s){const a=r.merge(n,s);if(!a.request||!a.request.hook)return co(r.parse(a));const o=(u,c)=>co(r.parse(r.merge(u,c)));return Object.assign(o,{endpoint:r,defaults:Tn.bind(null,r)}),a.request.hook(o,a)},{endpoint:r,defaults:Tn.bind(null,r)})}const vi=Tn(tm,{headers:{"user-agent":`octokit-request.js/${am} ${gi()}`}}),lm="4.6.1";class um extends Error{constructor(e,r){const i=r.data.errors[0].message;super(i);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const cm=["method","baseUrl","url","headers","request","query","mediaType"],dm=["query","method","url"],mo=/\/api\/v3\/?$/;function mm(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const a in r)if(!!dm.includes(a))return Promise.reject(new Error(`[@octokit/graphql] "${a}" cannot be used as variable name`))}const i=typeof e=="string"?Object.assign({query:e},r):e,n=Object.keys(i).reduce((a,o)=>cm.includes(o)?(a[o]=i[o],a):(a.variables||(a.variables={}),a.variables[o]=i[o],a),{}),s=i.baseUrl||t.endpoint.DEFAULTS.baseUrl;return mo.test(s)&&(n.url=s.replace(mo,"/api/graphql")),t(n).then(a=>{if(a.data.errors){const o={};for(const u of Object.keys(a.headers))o[u]=a.headers[u];throw new um(n,{headers:o,data:a.data})}return a.data.data})}function Pn(t,e){const r=t.defaults(e);return Object.assign((n,s)=>mm(r,n,s),{defaults:Pn.bind(null,r),endpoint:vi.endpoint})}const yf=Pn(vi,{headers:{"user-agent":`octokit-graphql.js/${lm} ${gi()}`},method:"POST",url:"/graphql"});function hm(t){return Pn(t,{method:"POST",url:"/graphql"})}async function pm(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function fm(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function gm(t,e,r,i){const n=e.endpoint.merge(r,i);return n.headers.authorization=fm(t),e(n)}const vm=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(pm.bind(null,e),{hook:gm.bind(null,e)})},ho="3.3.1";class Nn{constructor(e={}){const r=new Bd.Collection,i={baseUrl:vi.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=[e.userAgent,`octokit-core.js/${ho} ${gi()}`].filter(Boolean).join(" "),e.baseUrl&&(i.baseUrl=e.baseUrl),e.previews&&(i.mediaType.previews=e.previews),e.timeZone&&(i.headers["time-zone"]=e.timeZone),this.request=vi.defaults(i),this.graphql=hm(this.request).defaults(i),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:s,...a}=e,o=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:a},e.auth));r.wrap("request",o.hook),this.auth=o}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=vm(e.auth);r.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...i){const n=i[0]||{};if(typeof e=="function"){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const i=this.plugins;return r=class extends this{},r.plugins=i.concat(e.filter(s=>!i.includes(s))),r}}Nn.VERSION=ho,Nn.plugins=[];const wm="1.0.3";function po(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const i=Date.now(),n=t.request.endpoint.parse(r),s=n.url.replace(r.baseUrl,"");return e(r).then(a=>(t.log.info(`${n.method} ${s} - ${a.status} in ${Date.now()-i}ms`),a)).catch(a=>{throw t.log.info(`${n.method} ${s} - ${a.status} in ${Date.now()-i}ms`),a})})}po.VERSION=wm;const bm="2.13.2";function ym(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,i=t.data.repository_selection,n=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],a=t.data[s];return t.data=a,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof i!="undefined"&&(t.data.repository_selection=i),t.data.total_count=n,t}function Dn(t,e,r){const i=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),n=typeof e=="function"?e:t.request,s=i.method,a=i.headers;let o=i.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!o)return{done:!0};const u=await n({method:s,url:o,headers:a}),c=ym(u);return o=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}})}}function fo(t,e,r,i){return typeof r=="function"&&(i=r,r=void 0),go(t,[],Dn(t,e,r)[Symbol.asyncIterator](),i)}function go(t,e,r,i){return r.next().then(n=>{if(n.done)return e;let s=!1;function a(){s=!0}return e=e.concat(i?i(n.value,a):n.value.data),s?e:go(t,e,r,i)})}const kf=Object.assign(fo,{iterator:Dn}),km=null;function _f(t){return typeof t=="string"?km.includes(t):!1}function vo(t){return{paginate:Object.assign(fo.bind(null,t),{iterator:Dn.bind(null,t)})}}vo.VERSION=bm;const _m={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Rm="4.12.0";function Em(t,e){const r={};for(const[i,n]of Object.entries(e))for(const[s,a]of Object.entries(n)){const[o,u,c]=a,[h,w]=o.split(/ /),R=Object.assign({method:h,url:w},u);r[i]||(r[i]={});const q=r[i];if(c){q[s]=Cm(t,i,s,R,c);continue}q[s]=t.request.defaults(R)}return r}function Cm(t,e,r,i,n){const s=t.request.defaults(i);function a(...o){let u=s.endpoint.merge(...o);if(n.mapToData)return u=Object.assign({},u,{data:u[n.mapToData],[n.mapToData]:void 0}),s(u);if(n.renamed){const[c,h]=n.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${c}.${h}()`)}if(n.deprecated&&t.log.warn(n.deprecated),n.renamedParameters){const c=s.endpoint.merge(...o);for(const[h,w]of Object.entries(n.renamedParameters))h in c&&(t.log.warn(`"${h}" parameter is deprecated for "octokit.${e}.${r}()". Use "${w}" instead`),w in c||(c[w]=c[h]),delete c[h]);return s(c)}return s(...o)}return Object.assign(a,s)}function wo(t){return Em(t,_m)}wo.VERSION=Rm;const Sm="18.2.0",Tm=Nn.plugin(po,wo,vo).defaults({userAgent:`octokit-rest.js/${Sm}`});function Pm(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:wi(t)},r={kind:"Document",definitions:[e]};return r}function Nm(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:wi(t)},i={kind:"Document",definitions:[r]};return i}function wi(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return wi(t[0]);var e=[];Object.keys(t).forEach(function(i){var n=wi(t[i]),s={kind:"Field",name:{kind:"Name",value:i},selectionSet:n||void 0};e.push(s)});var r={kind:"SelectionSet",selections:e};return r}var Dm={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Fm=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:Es(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Es(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,i=e.data;if(typeof r!="undefined"){var n=null;try{n=this.read({rootId:r,optimistic:!1,query:Dm})}catch(o){}var s=n&&n.__typename||"__ClientData",a=Object.assign({__typename:s},i);this.writeFragment({id:r,fragment:Nm(a,s),data:a})}else this.writeQuery({query:Pm(i),data:i})},t}(),bo;(function(t){})(bo||(bo={}));var Me=null,yo={},Im=1,Am=function(){return function(){function t(){this.id=["slot",Im++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Me;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===yo)break;return e!==Me&&(Me.slots[this.id]=r),!0}return Me&&(Me.slots[this.id]=yo),!1},t.prototype.getValue=function(){if(this.hasValue())return Me.slots[this.id]},t.prototype.withValue=function(e,r,i,n){var s,a=(s={__proto__:null},s[this.id]=e,s),o=Me;Me={parent:o,slots:a};try{return r.apply(n,i)}finally{Me=o}},t.bind=function(e){var r=Me;return function(){var i=Me;try{return Me=r,e.apply(this,arguments)}finally{Me=i}}},t.noContext=function(e,r,i){if(Me){var n=Me;try{return Me=null,e.apply(i,r)}finally{Me=n}}else return e.apply(i,r)},t}()},Fn="@wry/context:Slot",In=Array,An=In[Fn]||function(){var t=Am();try{Object.defineProperty(In,Fn,{value:In[Fn]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),Mn=An.bind,Mm=An.noContext;function Rf(t,e){return setTimeout(Mn(t),e)}function Ef(t){return function(){var e=t.apply(this,arguments),r=Mn(e.next),i=Mn(e.throw);return new Promise(function(n,s){function a(c,h){try{var w=c.call(e,h)}catch(q){return s(q)}var R=w.done?n:o;xm(w.value)?w.value.then(R,w.done?s:u):R(w.value)}var o=function(c){return a(r,c)},u=function(c){return a(i,c)};o()})}}function xm(t){return t&&typeof t.then=="function"}var ko=null;function Cf(t){if(ko.indexOf(t)<0){var e=function(r,i){var n=r[i];r[i]=function(){return Mm(n,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),ko.push(t)}return t}function Om(){}var qm=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Om),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var i=r.older,n=r.newer;n&&(n.older=i),i&&(i.newer=n),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=n)}return r},t.prototype.set=function(e,r){var i=this.getEntry(e);return i?i.value=r:(i={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(e,i),i.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),bi=new An,Um=[],xn=[],Lm=100;function wr(t,e){if(!t)throw new Error(e||"assertion failure")}function $m(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function _o(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function Gm(t){return t.slice(0)}var Hm=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(wr(!this.recomputing,"already recomputing"),!(!Vm(this)&&On(this)))return br(this)?Bm(this):_o(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Ro(this),qn(this))},t.prototype.dispose=function(){var e=this;Po(this).forEach(On),qn(this),this.parents.forEach(function(r){r.setDirty(),No(r,e)})},t.count=0,t}();function Vm(t){var e=bi.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),br(t)?Co(e,t):So(e,t),e}function Bm(t){var e=Po(t);return bi.withValue(t,jm,[t]),Wm(t)&&Qm(t),e.forEach(On),_o(t.value)}function jm(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function br(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Qm(t){t.dirty=!1,!br(t)&&Eo(t)}function Ro(t){t.parents.forEach(function(e){return Co(e,t)})}function Eo(t){t.parents.forEach(function(e){return So(e,t)})}function Co(t,e){if(wr(t.childValues.has(e)),wr(br(e)),!t.dirtyChildren)t.dirtyChildren=xn.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Ro(t)}function So(t,e){wr(t.childValues.has(e)),wr(!br(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,Gm(e.value)):$m(r,e.value)||t.setDirty(),To(t,e),!br(t)&&Eo(t)}function To(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(xn.length<Lm&&xn.push(r),t.dirtyChildren=null))}function On(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function Po(t){var e=Um;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,i){No(t,i),e.push(i)})),wr(t.dirtyChildren===null),e}function No(t,e){e.parents.delete(t),t.childValues.delete(e),To(t,e)}function Wm(t){if(typeof t.subscribe=="function")try{qn(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function qn(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var Un=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(i){return r=r.getChildTrie(i)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&zm(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=r.get(e);return i||r.set(e,i=new t(this.weakness)),i},t}();function zm(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Km=new Un(typeof WeakMap=="function");function Ym(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Km.lookupArray(t)}var Ln=new Set;function Mr(t,e){e===void 0&&(e=Object.create(null));var r=new qm(e.max||Math.pow(2,16),function(a){return a.dispose()}),i=!!e.disposable,n=e.makeCacheKey||Ym;function s(){if(!(i&&!bi.hasValue())){var a=n.apply(null,arguments);if(a===void 0)return t.apply(null,arguments);var o=Array.prototype.slice.call(arguments),u=r.get(a);u?u.args=o:(u=new Hm(t,o),r.set(a,u),u.subscribe=e.subscribe,i&&(u.reportOrphan=function(){return r.delete(a)}));var c=u.recompute();return r.set(a,u),Ln.add(r),bi.hasValue()||(Ln.forEach(function(h){return h.clean()}),Ln.clear()),i?void 0:c}}return s.dirty=function(){var a=n.apply(null,arguments),o=a!==void 0&&r.get(a);o&&o.setDirty()},s}var Do=!1;function Fo(){var t=!Do;return zi()||(Do=!0),t}var Jm=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,i){var n=i.store.get(e.id),s=e.id==="ROOT_QUERY";if(!n)return s;var a=n.__typename,o=a===void 0?s&&"Query":a;return o&&o===r?!0:(Fo(),"heuristic")},t}(),Sf=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,i){ce(this.isReady,1);var n=i.store.get(e.id),s=e.id==="ROOT_QUERY";if(!n)return s;var a=n.__typename,o=a===void 0?s&&"Query":a;if(ce(o,2),o===r)return!0;var u=this.possibleTypesMap[r];return!!(o&&u&&u.indexOf(o)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(i){(i.kind==="UNION"||i.kind==="INTERFACE")&&(r[i.name]=i.possibleTypes.map(function(n){return n.name}))}),r},t}(),Io=Object.prototype.hasOwnProperty,yr=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=Mr(function(i){return r.data[i]},{disposable:!0,makeCacheKey:function(i){return i}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var i=this.data[e];r!==i&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){Io.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(i){r.set(i,e[i])}),Object.keys(this.data).forEach(function(i){Io.call(e,i)||r.delete(i)})):Object.keys(this.data).forEach(function(i){r.delete(i)})},t}();function Ao(t){return new yr(t)}var Zm=function(){function t(e){var r=this,i=e===void 0?{}:e,n=i.cacheKeyRoot,s=n===void 0?new Un(ji):n,a=i.freezeResults,o=a===void 0?!1:a,u=this,c=u.executeStoreQuery,h=u.executeSelectionSet,w=u.executeSubSelectedArray;this.freezeResults=o,this.executeStoreQuery=Mr(function(R){return c.call(r,R)},{makeCacheKey:function(R){var q=R.query,V=R.rootValue,U=R.contextValue,z=R.variableValues,K=R.fragmentMatcher;if(U.store instanceof yr)return s.lookup(U.store,q,K,JSON.stringify(z),V.id)}}),this.executeSelectionSet=Mr(function(R){return h.call(r,R)},{makeCacheKey:function(R){var q=R.selectionSet,V=R.rootValue,U=R.execContext;if(U.contextValue.store instanceof yr)return s.lookup(U.contextValue.store,q,U.fragmentMatcher,JSON.stringify(U.variableValues),V.id)}}),this.executeSubSelectedArray=Mr(function(R){return w.call(r,R)},{makeCacheKey:function(R){var q=R.field,V=R.array,U=R.execContext;if(U.contextValue.store instanceof yr)return s.lookup(U.contextValue.store,q,V,JSON.stringify(U.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(Y(Y({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,i=e.query,n=e.variables,s=e.previousResult,a=e.returnPartialData,o=a===void 0?!0:a,u=e.rootId,c=u===void 0?"ROOT_QUERY":u,h=e.fragmentMatcherFunction,w=e.config,R=au(i);n=$i({},Vi(R),n);var q={store:r,dataIdFromObject:w&&w.dataIdFromObject,cacheRedirects:w&&w.cacheRedirects||{}},V=this.executeStoreQuery({query:i,rootValue:{type:"id",id:c,generated:!0,typename:"Query"},contextValue:q,variableValues:n,fragmentMatcher:h}),U=V.missing&&V.missing.length>0;return U&&!o&&V.missing.forEach(function(z){if(!z.tolerable)throw new De(8)}),s&&Ye(s,V.result)&&(V.result=s),{result:V.result,complete:!U}},t.prototype.executeStoreQuery=function(e){var r=e.query,i=e.rootValue,n=e.contextValue,s=e.variableValues,a=e.fragmentMatcher,o=a===void 0?Xm:a,u=Hi(r),c=Yr(r),h=Jr(c),w={query:r,fragmentMap:h,contextValue:n,variableValues:s,fragmentMatcher:o};return this.executeSelectionSet({selectionSet:u.selectionSet,rootValue:i,execContext:w})},t.prototype.executeSelectionSet=function(e){var r=this,i=e.selectionSet,n=e.rootValue,s=e.execContext,a=s.fragmentMap,o=s.contextValue,u=s.variableValues,c={result:null},h=[],w=o.store.get(n.id),R=w&&w.__typename||n.id==="ROOT_QUERY"&&"Query"||void 0;function q(V){var U;return V.missing&&(c.missing=c.missing||[],(U=c.missing).push.apply(U,V.missing)),V.result}return i.selections.forEach(function(V){var U;if(!!Li(V,u))if(Dt(V)){var z=q(r.executeField(w,R,V,s));typeof z!="undefined"&&h.push((U={},U[_r(V)]=z,U))}else{var K=void 0;if(Qr(V))K=V;else if(K=a[V.name.value],!K)throw new De(9);var Z=K.typeCondition&&K.typeCondition.name.value,re=!Z||s.fragmentMatcher(n,Z,o);if(re){var ee=r.executeSelectionSet({selectionSet:K.selectionSet,rootValue:n,execContext:s});re==="heuristic"&&ee.missing&&(ee=Y(Y({},ee),{missing:ee.missing.map(function(le){return Y(Y({},le),{tolerable:!0})})})),h.push(q(ee))}}}),c.result=Yi(h),this.freezeResults,c},t.prototype.executeField=function(e,r,i,n){var s=n.variableValues,a=n.contextValue,o=i.name.value,u=Ui(i,s),c={resultKey:_r(i),directives:tu(i,s)},h=eh(e,r,o,u,a,c);return Array.isArray(h.result)?this.combineExecResults(h,this.executeSubSelectedArray({field:i,array:h.result,execContext:n})):i.selectionSet?h.result==null?h:this.combineExecResults(h,this.executeSelectionSet({selectionSet:i.selectionSet,rootValue:h.result,execContext:n})):(Mo(i,h.result),this.freezeResults,h)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i;return e.forEach(function(n){n.missing&&(i=i||[],i.push.apply(i,n.missing))}),{result:e.pop().result,missing:i}},t.prototype.executeSubSelectedArray=function(e){var r=this,i=e.field,n=e.array,s=e.execContext,a;function o(u){return u.missing&&(a=a||[],a.push.apply(a,u.missing)),u.result}return n=n.map(function(u){return u===null?null:Array.isArray(u)?o(r.executeSubSelectedArray({field:i,array:u,execContext:s})):i.selectionSet?o(r.executeSelectionSet({selectionSet:i.selectionSet,rootValue:u,execContext:s})):(Mo(i,u),u)}),this.freezeResults,{result:n,missing:a}},t}();function Mo(t,e){if(!t.selectionSet&&Wr(e))throw new De(10)}function Xm(){return!0}function Tf(t){invariant(isIdValue(t),11)}function eh(t,e,r,i,n,s){var a=s.resultKey,o=s.directives,u=r;(i||o)&&(u=_s(u,i,o));var c=void 0;if(t&&(c=t[u],typeof c=="undefined"&&n.cacheRedirects&&typeof e=="string")){var h=n.cacheRedirects[e];if(h){var w=h[r];w&&(c=w(t,i,{getCacheKey:function(R){var q=n.dataIdFromObject(R);return q&&zr({id:q,typename:R.__typename})}}))}}return typeof c=="undefined"?{result:c,missing:[{object:t,fieldName:u,tolerable:!1}]}:(Xl(c)&&(c=c.json),{result:c})}var yi=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function Pf(t){return new yi(t)}var th=function(t){pt(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function rh(t,e){var r=new th(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var ih=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,i=e.result,n=e.store,s=n===void 0?Ao():n,a=e.variables,o=e.dataIdFromObject,u=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:i,document:r,store:s,variables:a,dataIdFromObject:o,fragmentMatcherFunction:u})},t.prototype.writeResultToStore=function(e){var r=e.dataId,i=e.result,n=e.document,s=e.store,a=s===void 0?Ao():s,o=e.variables,u=e.dataIdFromObject,c=e.fragmentMatcherFunction,h=er(n);try{return this.writeSelectionSetToStore({result:i,dataId:r,selectionSet:h.selectionSet,context:{store:a,processedData:{},variables:$i({},Vi(h),o),dataIdFromObject:u,fragmentMap:Jr(Yr(n)),fragmentMatcherFunction:c}})}catch(w){throw rh(w,n)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,i=e.result,n=e.dataId,s=e.selectionSet,a=e.context,o=a.variables,u=a.store,c=a.fragmentMap;return s.selections.forEach(function(h){var w;if(!!Li(h,o))if(Dt(h)){var R=_r(h),q=i[R];if(typeof q!="undefined")r.writeFieldToStore({dataId:n,value:q,field:h,context:a});else{var V=!1,U=!1;h.directives&&h.directives.length&&(V=h.directives.some(function(ve){return ve.name&&ve.name.value==="defer"}),U=h.directives.some(function(ve){return ve.name&&ve.name.value==="client"})),!V&&!U&&a.fragmentMatcherFunction}}else{var z=void 0;Qr(h)?z=h:(z=(c||{})[h.name.value],ce(z,3));var K=!0;if(a.fragmentMatcherFunction&&z.typeCondition){var Z=n||"self",re=zr({id:Z,typename:void 0}),ee={store:new yi((w={},w[Z]=i,w)),cacheRedirects:{}},le=a.fragmentMatcherFunction(re,z.typeCondition.name.value,ee);!Fs()&&le==="heuristic",K=!!le}K&&r.writeSelectionSetToStore({result:i,selectionSet:z.selectionSet,dataId:n,context:a})}}),u},t.prototype.writeFieldToStore=function(e){var r,i=e.field,n=e.value,s=e.dataId,a=e.context,o=a.variables,u=a.dataIdFromObject,c=a.store,h,w,R=Jl(i,o);if(!i.selectionSet||n===null)h=n!=null&&typeof n=="object"?{type:"json",json:n}:n;else if(Array.isArray(n)){var q=s+"."+R;h=this.processArrayValue(n,q,i.selectionSet,a)}else{var V=s+"."+R,U=!0;if($n(V)||(V="$"+V),u){var z=u(n);ce(!z||!$n(z),4),(z||typeof z=="number"&&z===0)&&(V=z,U=!1)}Oo(V,i,a.processedData)||this.writeSelectionSetToStore({dataId:V,result:n,selectionSet:i.selectionSet,context:a});var K=n.__typename;h=zr({id:V,typename:K},U),w=c.get(s);var Z=w&&w[R];if(Z!==h&&Wr(Z)){var re=Z.typename!==void 0,ee=K!==void 0,le=re&&ee&&Z.typename!==K;ce(!U||Z.generated||le,5),ce(!re||ee,6),Z.generated&&(le?U||c.delete(Z.id):xo(Z.id,h.id,c))}}w=c.get(s),(!w||!Ye(h,w[R]))&&c.set(s,Y(Y({},w),(r={},r[R]=h,r)))},t.prototype.processArrayValue=function(e,r,i,n){var s=this;return e.map(function(a,o){if(a===null)return null;var u=r+"."+o;if(Array.isArray(a))return s.processArrayValue(a,u,i,n);var c=!0;if(n.dataIdFromObject){var h=n.dataIdFromObject(a);h&&(u=h,c=!1)}return Oo(u,i,n.processedData)||s.writeSelectionSetToStore({dataId:u,result:a,selectionSet:i,context:n}),zr({id:u,typename:a.__typename},c)})},t}();function $n(t){return t[0]==="$"}function xo(t,e,r){if(t===e)return!1;var i=r.get(t),n=r.get(e),s=!1;Object.keys(i).forEach(function(o){var u=i[o],c=n[o];Wr(u)&&$n(u.id)&&Wr(c)&&!Ye(u,c)&&xo(u.id,c.id,r)&&(s=!0)}),r.delete(t);var a=Y(Y({},i),n);return Ye(a,n)?s:(r.set(e,a),!0)}function Oo(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var nh={fragmentMatcher:new Jm,dataIdFromObject:sh,addTypename:!0,resultCaching:!0,freezeResults:!1};function sh(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var ah=Object.prototype.hasOwnProperty,qo=function(t){pt(e,t);function e(r,i,n){var s=t.call(this,Object.create(null))||this;return s.optimisticId=r,s.parent=i,s.transaction=n,s}return e.prototype.toObject=function(){return Y(Y({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return ah.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(yi),oh=function(t){pt(e,t);function e(r){r===void 0&&(r={});var i=t.call(this)||this;i.watches=new Set,i.typenameDocumentCache=new Map,i.cacheKeyRoot=new Un(ji),i.silenceBroadcast=!1,i.config=Y(Y({},nh),r),i.config.customResolvers&&(i.config.cacheRedirects=i.config.customResolvers),i.config.cacheResolvers&&(i.config.cacheRedirects=i.config.cacheResolvers),i.addTypename=!!i.config.addTypename,i.data=i.config.resultCaching?new yr:new yi,i.optimisticData=i.data,i.storeWriter=new ih,i.storeReader=new Zm({cacheKeyRoot:i.cacheKeyRoot,freezeResults:r.freezeResults});var n=i,s=n.maybeBroadcastWatch;return i.maybeBroadcastWatch=Mr(function(a){return s.call(i,a)},{makeCacheKey:function(a){if(!a.optimistic&&!a.previousResult&&n.data instanceof yr)return n.cacheKeyRoot.lookup(a.query,JSON.stringify(a.variables))}}),i}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var i=this.config.fragmentMatcher,n=i&&i.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:n,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var i=this.config.fragmentMatcher,n=i&&i.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:n}),this.broadcastWatches()},e.prototype.diff=function(r){var i=this.config.fragmentMatcher,n=i&&i.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:n,config:this.config})},e.prototype.watch=function(r){var i=this;return this.watches.add(r),function(){i.watches.delete(r)}},e.prototype.evict=function(r){throw new De(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var i=[],n=0,s=this.optimisticData;s instanceof qo;)s.optimisticId===r?++n:i.push(s),s=s.parent;if(n>0){for(this.optimisticData=s;i.length>0;){var a=i.pop();this.performTransaction(a.transaction,a.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,i){var n=this,s=n.data,a=n.silenceBroadcast;this.silenceBroadcast=!0,typeof i=="string"&&(this.data=this.optimisticData=new qo(i,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=a,this.data=s}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,i){return this.performTransaction(r,i)},e.prototype.transformDocument=function(r){if(this.addTypename){var i=this.typenameDocumentCache.get(r);return i||(i=uu(r),this.typenameDocumentCache.set(r,i),this.typenameDocumentCache.set(i,i)),i}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(i){return r.maybeBroadcastWatch(i)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(Fm);function lh(t){return new Je(function(e,r){var i=ps(e,[]);return new $e(function(n){var s;return Promise.resolve(i).then(function(a){return t(a,e.getContext())}).then(e.setContext).then(function(){s=r(e).subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}).catch(n.error.bind(n)),function(){s&&s.unsubscribe()}})})}var uh=oe(3033),ch={includeQuery:!0,includeExtensions:!1},dh={accept:"*/*","content-type":"application/json"},mh={method:"POST"},hh={http:ch,headers:dh,options:mh},Uo=function(t,e,r){var i=new Error(r);throw i.name="ServerError",i.response=t,i.statusCode=t.status,i.result=e,i},ph=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(n){var i=n;return i.name="ServerParseError",i.response=e,i.statusCode=e.status,i.bodyText=r,Promise.reject(i)}}).then(function(r){return e.status>=300&&Uo(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Uo(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(i){return i.operationName}):t.operationName)+"'."),r})}},fh=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new De(1)}},gh=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},vh=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=Y({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;r.forEach(function(w){n=Y({},n,w.options,{headers:Y({},n.headers,w.headers)}),w.credentials&&(n.credentials=w.credentials),s=Y({},s,w.http)});var a=t.operationName,o=t.extensions,u=t.variables,c=t.query,h={operationName:a,variables:u};return s.includeExtensions&&(h.extensions=o),s.includeQuery&&(h.query=(0,uh.S)(c)),{options:n,body:h}},Gn=function(t,e){var r;try{r=JSON.stringify(t)}catch(n){var i=new De(2);throw i.parseError=n,i}return r},wh=function(t,e){var r=t.getContext(),i=r.uri;return i||(typeof e=="function"?e(t):e||"/graphql")},Lo=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,i=t.fetch,n=t.includeExtensions,s=t.useGETForQueries,a=ps(t,["uri","fetch","includeExtensions","useGETForQueries"]);fh(i),i||(i=fetch);var o={http:{includeExtensions:n},options:a.fetchOptions,credentials:a.credentials,headers:a.headers};return new Je(function(u){var c=wh(u,r),h=u.getContext(),w={};if(h.clientAwareness){var R=h.clientAwareness,q=R.name,V=R.version;q&&(w["apollographql-client-name"]=q),V&&(w["apollographql-client-version"]=V)}var U=Y({},w,h.headers),z={http:h.http,options:h.fetchOptions,credentials:h.credentials,headers:U},K=vh(u,hh,o,z),Z=K.options,re=K.body,ee;if(!Z.signal){var le=gh(),ve=le.controller,he=le.signal;ee=ve,ee&&(Z.signal=he)}var ke=function(rt){return rt.kind==="OperationDefinition"&&rt.operation==="mutation"};if(s&&!u.query.definitions.some(ke)&&(Z.method="GET"),Z.method==="GET"){var de=bh(c,re),Ot=de.newURI,Vr=de.parseError;if(Vr)return qs(Vr);c=Ot}else try{Z.body=Gn(re,"Payload")}catch(rt){return qs(rt)}return new $e(function(rt){return i(c,Z).then(function(Ue){return u.setContext({response:Ue}),Ue}).then(ph(u)).then(function(Ue){return rt.next(Ue),rt.complete(),Ue}).catch(function(Ue){Ue.name!=="AbortError"&&(Ue.result&&Ue.result.errors&&Ue.result.data&&rt.next(Ue.result),rt.error(Ue))}),function(){ee&&ee.abort()}})})};function bh(t,e){var r=[],i=function(w,R){r.push(w+"="+encodeURIComponent(R))};if("query"in e&&i("query",e.query),e.operationName&&i("operationName",e.operationName),e.variables){var n=void 0;try{n=Gn(e.variables,"Variables map")}catch(w){return{parseError:w}}i("variables",n)}if(e.extensions){var s=void 0;try{s=Gn(e.extensions,"Extensions map")}catch(w){return{parseError:w}}i("extensions",s)}var a="",o=t,u=t.indexOf("#");u!==-1&&(a=t.substr(u),o=t.substr(0,u));var c=o.indexOf("?")===-1?"?":"&",h=o+c+r.join("&")+a;return{newURI:h}}var Nf=function(t){pt(e,t);function e(r){return t.call(this,Lo(r).request)||this}return e}(Je),yh=Object.defineProperty,xr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const $o="Try again?",kh="Cancel",Go="Sign in",_h="Don't show again",Ho="prompt for sign in",Vo="login",Bo="github",jo=["read:user","user:email","repo"];class Rh{constructor(e){this._telemetry=e,xr(this,"_githubAPI"),xr(this,"_sessionId"),xr(this,"_disposables"),xr(this,"_onDidInitialize",new l.EventEmitter),xr(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(l.authentication.onDidChangeSessions(()=>{if(!this.isAuthenticated())return this.initialize()}))}async initialize(){const e=await l.authentication.getSession(Bo,jo,{createIfNone:!1});if(e){const r=e.accessToken;this._sessionId=e.id;const i=await this.createHub(r);this._githubAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else $.debug("No token found.","Authentication")}async reset(){this._githubAPI=void 0,await this.initialize()}isAuthenticated(){return!!this._githubAPI}getHub(){return this._githubAPI}async getHubOrLogin(){var e;return(e=this._githubAPI)!=null?e:await this.login()}async showSignInNotification(){if(Xa(Ho,Vo)===!1)return;if(await l.window.showInformationMessage("In order to use the Pull Requests functionality, you must sign in to GitHub",Go,_h)===Go)return await this.login();eo(Ho,Vo,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async logout(){this._sessionId&&l.authentication.logout("github",this._sessionId)}async login(){this._telemetry.sendTelemetryEvent("auth.start");let e=!0,r;for(;e;){try{const i=await this.getSessionOrLogin();r=await this.createHub(i)}catch(i){$.appendLine(`Error signing in to GitHub: ${i}`),i instanceof Error&&i.stack&&$.appendLine(i.stack)}r?e=!1:e=await l.window.showErrorMessage("Error signing in to GitHub",$o,kh)===$o}return r?(this._githubAPI=r,await this.setCurrentUser(r),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),r}isCurrentUser(e){var r,i;return((i=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:i.login)===e}getCurrentUser(){var e;return((e=this._githubAPI)==null?void 0:e.octokit)&&this._githubAPI.currentUser}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(){const e=await l.authentication.getSession(Bo,jo,{createIfNone:!0});return this._sessionId=e.id,e.accessToken}async createHub(e){const r=new Tm({request:{agent:da},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`}),i=new Qu({link:Eh("https://api.github.com",e||""),cache:new oh,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),n={octokit:r,graphql:i};return await this.setCurrentUser(n),n}dispose(){this._disposables.forEach(e=>e.dispose())}}const Eh=(t,e)=>lh((r,{headers:i})=>({headers:{...i,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Lo({uri:`${t}/graphql`,fetch:on()}));var Ch=Object.defineProperty,Or=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ch(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Df extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Ff extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class If extends Error{constructor(e,r,i){super();this.branchName=e,this.upstreamRef=r,this.problem=i}get message(){const{upstreamRef:{remote:e,name:r},branchName:i,problem:n}=this;return`The upstream ref ${e}/${r} for branch ${i} ${n}.`}}const Af="remotes",Mf="No Milestone";class Qo{constructor(e,r,i){this._folderManagers=e,this._credentialStore=r,this._telemetry=i,Or(this,"_subs"),Or(this,"_onDidChangeState",new l.EventEmitter),Or(this,"onDidChangeState",this._onDidChangeState.event),Or(this,"_state",Ve.Initializing),this._subs=[],l.commands.executeCommand("setContext",Ma,this._state),this._subs.push(...e.map(n=>n.onDidLoadRepositories(s=>this.state=s)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=l.workspace.workspaceFolders;if(r){const i=r.findIndex(n=>n.uri.toString()===e.repository.rootUri.toString());if(i>-1){const n=this._folderManagers.slice(i,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,i),this._folderManagers.push(e),this._folderManagers.push(...n);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(i=>i.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const i=this._folderManagers[r];this._folderManagers.splice(r),i.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-b.extname(e.remote.url).length);for(const i of this._folderManagers)if(i.gitHubRepositories.map(n=>n.remote.url.substring(0,n.remote.url.length-b.extname(n.remote.url).length)).includes(r))return i}getManagerForFile(e){for(const r of this._folderManagers){const i=r.repository.rootUri.path,n=e.path.substring(i.length>1?i.length+1:i.length);if(l.Uri.joinPath(r.repository.rootUri,n).path===e.path)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(l.commands.executeCommand("setContext",Ma,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=Ve.Initializing}async authenticate(){return!!await this._credentialStore.login()}createGitHubRepository(e,r){return new ir(e,r,this._telemetry)}createGitHubRepositoryFromOwnerName(e,r){const i=`https://github.com/${e}/${r}`;return new ir(new ri(r,i,new St(i)),this._credentialStore,this._telemetry)}dispose(){this._subs.forEach(e=>e.dispose())}}Or(Qo,"ID","RepositoriesManager");function xf(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var Sh=Object.defineProperty,ut=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Hn{constructor(e){ut(this,"_onDidOpenRepository",new l.EventEmitter),ut(this,"onDidOpenRepository",this._onDidOpenRepository.event),ut(this,"_onDidCloseRepository",new l.EventEmitter),ut(this,"onDidCloseRepository",this._onDidCloseRepository.event),ut(this,"_onDidChangeState",new l.EventEmitter),ut(this,"onDidChangeState",this._onDidChangeState.event),ut(this,"_onDidPublish",new l.EventEmitter),ut(this,"onDidPublish",this._onDidPublish.event),ut(this,"_gitAPI"),ut(this,"_disposables");const r=e.exports;this._gitAPI=r.getAPI(1),this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(i=>this._onDidCloseRepository.fire(i))),this._disposables.push(this._gitAPI.onDidOpenRepository(i=>this._onDidOpenRepository.fire(i))),this._disposables.push(this._gitAPI.onDidChangeState(i=>this._onDidChangeState.fire(i))),this._disposables.push(this._gitAPI.onDidPublish(i=>this._onDidPublish.fire(i)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static createProvider(){const e=l.extensions.getExtension("vscode.git");if(e)return new Hn(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var Th=Object.defineProperty,Te=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Th(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ph{constructor(e){this._liveShareAPI=e,Te(this,"_onDidOpenRepository",new l.EventEmitter),Te(this,"onDidOpenRepository",this._onDidOpenRepository.event),Te(this,"_onDidCloseRepository",new l.EventEmitter),Te(this,"onDidCloseRepository",this._onDidCloseRepository.event),Te(this,"_openRepositories",[]),Te(this,"_sharedServiceProxy"),Te(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ns)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(l.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){l.workspace.workspaceFolders&&l.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const i=new Fh(e,this._sharedServiceProxy),n=new Nh,s=new Proxy(i,n);await s.initialize(),this.openRepository(s)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Nh{constructor(){}get(e,r){return r in e?e[r]:function(...i){return e.proxy.request(Pi,[r,e.workspaceFolder.uri.toString(),...i])}}}class Dh{constructor(e){Te(this,"HEAD"),Te(this,"refs"),Te(this,"remotes"),Te(this,"submodules",[]),Te(this,"rebaseCommit"),Te(this,"mergeChanges",[]),Te(this,"indexChanges",[]),Te(this,"workingTreeChanges",[]),Te(this,"_onDidChange",new l.EventEmitter),Te(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Fh{constructor(e,r){this.workspaceFolder=e,this.proxy=r,Te(this,"rootUri"),Te(this,"state")}async initialize(){const e=await this.proxy.request(Pi,[ss,this.workspaceFolder.uri.toString()]);this.state=new Dh(e),this.rootUri=l.Uri.parse(e.rootUri),this.proxy.onNotify(as,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Ih=Object.defineProperty,Wo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ih(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ah{constructor(e,r){this._liveShareAPI=e,this._api=r,Wo(this,"_sharedService"),Wo(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ns)||void 0,this._sharedService&&this._sharedService.onRequest(Pi,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],i=e[1],n=l.Uri.parse(i),s=this._liveShareAPI.convertSharedUriToLocal(n),a=this._api.getGitProvider(s);if(!a)return;const o=a.repositories.filter(u=>u.rootUri.toString()===s.toString())[0];if(o){const u=e.slice(2);if(r===ss)return this._disposables.push(o.state.onDidChange(c=>{this._sharedService.notify(as,{HEAD:o.state.HEAD,remotes:o.state.remotes,refs:o.state.refs})})),{HEAD:o.state.HEAD,remotes:o.state.remotes,refs:o.state.refs,rootUri:n.toString()};if(r==="show"){const c=u[1],h=n.with({path:c}),w=this._liveShareAPI.convertSharedUriToLocal(h);return u[1]=w.fsPath,o[r](...u)}if(o[r])return o[r](...u)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Mh=Object.defineProperty,qr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function xh(){const t=l.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class Oh{constructor(e){this._api=e,qr(this,"_liveShareAPI"),qr(this,"_host"),qr(this,"_guest"),qr(this,"_localDisposables"),qr(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await xh()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Ah(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Ph(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function qh(t){return new Oh(t)}function Uh(t,e){const r=Hn.createProvider();if(r)return e.registerGitProvider(r),r}var Lh=Object.defineProperty,zo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $h{constructor(e){this.pullRequestManager=e,zo(this,"onNotifiedEmitter",new l.EventEmitter),zo(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(i=>{this.notifySuggestedAccounts(i)})})}async requestAsync(e,r,i){let n=null;switch(e){case"initialize":n={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const s=new Map;for(const a of this.pullRequestManager.folderManagers){const o=a.getAllAssignableUsers();if(!!o)for(const u of o)s.has(u.login)||s.set(u.login,u)}s.size>0&&this.notifySuggestedAccounts(Array.from(s.values()));break;default:throw new Error(`type:${e} not supported`)}return n}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(i){}r&&e.findIndex(i=>i.login===r)!==-1&&this.notifySuggestedUsers(e.filter(i=>i.email).map(i=>({id:i.login,displayName:i.name?i.name:i.login,email:i.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const i=r.hub.currentUser;if(i)return i.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var Gh=Object.defineProperty,Ko=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Gh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Hh{constructor(){Ko(this,"_extensionsDisposable"),Ko(this,"_subscriptions",[]),this._extensionsDisposable=l.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),l.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||l.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=l.extensions.getExtension("eamodio.gitlens"))!=null?e:l.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let i=0;const n=setInterval(async()=>{r.isActive?(clearInterval(n),this.register(await r.exports)):(i++,i>60&&clearInterval(n))},1e3)}}}var Vh=Object.defineProperty,zt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Yo{constructor(e,r,i,n,s){this.issueModel=e,this.manager=r,this.stateManager=i,this.shouldPromptForBranch=s,zt(this,"repoChangeDisposable"),zt(this,"_branchName"),zt(this,"user"),zt(this,"repo"),zt(this,"_repoDefaults"),zt(this,"_onDidChangeCurrentIssueState",new l.EventEmitter),zt(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(n!=null?n:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let i=0;i<this.stateManager.gitAPI.repositories.length;i++){const n=this.stateManager.gitAPI.repositories[i];for(let s=0;s<n.state.remotes.length;s++){const a=n.state.remotes[s];if(a.name===(e==null?void 0:e.remoteName)&&((r=a.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=n;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return l.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(i=>i.login===r))&&(await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){l.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return l.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const r=l.workspace.getConfiguration(Ce),i=r.inspect(wa);async function n(s,a){await r.update(cn,s,a),await r.update(wa,void 0,a)}return(i==null?void 0:i.globalValue)&&await n(i.globalValue,l.ConfigurationTarget.Global),(i==null?void 0:i.workspaceValue)&&await n(i.workspaceValue,l.ConfigurationTarget.Workspace),(i==null?void 0:i.workspaceFolderValue)&&await n(i.workspaceFolderValue,l.ConfigurationTarget.WorkspaceFolder),(e=l.workspace.getConfiguration(Ce).get(cn))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,i=e.match(r);if(i&&i.length>0&&i[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";l.window.showErrorMessage(e,r).then(i=>{i===r&&l.commands.executeCommand("workbench.action.openSettings",`${Ce}.${cn}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":l.workspace.getConfiguration(Ce).get(ba);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:r.branch,!this._branchName){const i=await di(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const n=this.validateBranchName(i);if(n)return this.showBranchNameError(n),!1;this._branchName=i}else this._branchName=await l.window.showInputBox({value:i,prompt:"Enter the label for the new branch."})}return this._branchName?(r.branch=this._branchName,this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)||(this._branchName=void 0),!0):!1}async getCommitMessage(){const e=l.workspace.getConfiguration(Ce).get(Nc);if(typeof e=="string")return di(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class Jo extends l.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,l.CompletionItemKind.Issue);this.issue=e}}class Bh{constructor(e,r,i){this.stateManager=e,this.repositoriesManager=r,this.context=i}async provideCompletionItems(e,r,i,n){var s,a,o,u;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&n.triggerKind===l.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new l.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#"))return[];if(n.triggerKind===l.CompletionTriggerKind.TriggerCharacter&&l.workspace.getConfiguration(Ce).get("ignoreCompletionTrigger",[]).find(U=>U===e.languageId))return[];if(e.languageId!=="scminput"&&!await fn(e,r))return[];let c=new l.Range(r,r);r.character-1>=0&&e.getText(new l.Range(r.translate(0,-1),r))==="#"&&(c=new l.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const h=new Map,w=new Date;let R,q;if(e.languageId==="scminput"?q=Na(e.uri):e.uri.scheme==="comment"?q=l.window.visibleTextEditors.length>0?(s=l.workspace.getWorkspaceFolder(l.Uri.file(l.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:s.uri:void 0:q=(a=l.workspace.getWorkspaceFolder(e.uri))==null?void 0:a.uri,!q)return[];try{R=await((o=this.repositoriesManager.getManagerForFile(q))==null?void 0:o.getPullRequestDefaults())}catch(U){}const V=this.stateManager.getIssueCollection(q);for(const U of V){const z=(u=await U[1])!=null?u:[];if(z.length!==0)if(z[0]instanceof Fe){let K=0;for(const Z of z)h.set(lr(Z),await this.completionItemFromIssue(R,Z,w,c,e,K++))}else for(let K=0;K<z.length;K++){const Z=z[K];for(const re of Z.issues)h.set(lr(re),await this.completionItemFromIssue(R,re,w,c,e,K,Z.milestone))}}return[...h.values()]}async completionItemFromIssue(e,r,i,n,s,a,o){var u;const c=new Jo(r);if(s.languageId==="markdown")c.insertText=`[${lr(r,e)}](${r.html_url})`;else{const w=l.workspace.getConfiguration(Ce).get("issueCompletionFormatScm");s.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof w=="string"?c.insertText=await di(w,r,e):c.insertText=`${lr(r,e)}`}c.documentation=r.body,c.range=n,c.detail=o?o.title:(u=r.milestone)==null?void 0:u.title;let h=(i.getTime()-new Date(r.updatedAt).getTime()).toString();return h=new Array(20-h.length).join("0")+h,c.sortText=`${a} ${h}`,c.filterText=`${c.detail} # ${r.number} ${r.title} ${c.documentation}`,c}async resolveCompletionItem(e,r){return e instanceof Jo&&(e.documentation=await hn(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var jh=Object.defineProperty,Ur=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const _t="newIssue",Qh="NewIssue.md",ki="Assignees:",Lr="Labels:";function Vn(t){const e=JSON.parse(t.query);if(e.origin)return l.Uri.parse(e.origin)}class Wh{constructor(){Ur(this,"content"),Ur(this,"createTime",0),Ur(this,"modifiedTime",0),Ur(this,"_onDidChangeFile",new l.EventEmitter),Ur(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const i=this.onDidChangeFile(n=>{n.length===0&&n[0].type===l.FileChangeType.Deleted&&i.dispose()});return i}stat(e){var r,i;return{type:l.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(i=(r=this.content)==null?void 0:r.length)!=null?i:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,i={create:!1,overwrite:!1}){const n=this.content;this.content=r,n===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:l.FileChangeType.Deleted}])}rename(e,r,i){}}class zh{constructor(e){this.manager=e}async provideCompletionItems(e,r,i,n){if(!e.lineAt(r.line).text.startsWith(Lr))return[];const s=Vn(e.uri);if(!s)return[];const a=this.manager.getManagerForFile(s);if(!a)return[];const o=await a.getPullRequestDefaults();return(await a.getLabels(void 0,o)).map(c=>{const h=new l.CompletionItem(c.name,l.CompletionItemKind.Color);return h.documentation=`#${c.color}`,h.commitCharacters=[" ",","],h})}}class Kh{constructor(e,r,i,n){this.manager=e,this.stateManager=r,this.context=i,this.telemetry=n}async provideHover(e,r,i){if(!await Pa(e,r))return;let n=e.getWordRangeAtPosition(r,Sr);if(n&&n.start.character>0){n=new l.Range(new l.Position(n.start.line,n.start.character-1),n.end);const a=e.getText(n).match(Sr),o=dn(a),u=this.manager.getManagerForFile(e.uri);if(!u)return;if(o&&a&&o.issueNumber<=this.stateManager.maxIssueNumber(u.repository.rootUri))return this.createHover(u,a[0],o,n)}else return}async createHover(e,r,i,n){const s=await Dc(this.stateManager,e,r,i);if(!!s)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new l.Hover(await hn(s,this.context,this.manager,i.commentNumber),n)}}var Yh=Object.defineProperty,Zo=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Yh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Kt extends l.TreeItem{constructor(e,r,i){super(r,i);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class Jh{constructor(e,r,i){this.stateManager=e,this.manager=r,this.context=i,Zo(this,"_onDidChangeTreeData",new l.EventEmitter),Zo(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),i.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),i.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),i.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let i;return e instanceof Kt?i=e:e instanceof ur?i=new Kt(e.repository.rootUri,b.basename(e.repository.rootUri.fsPath),l.TreeItemCollapsibleState.Expanded):e instanceof Fe?(i=new Kt(void 0,`${e.number}: ${e.title}`,l.TreeItemCollapsibleState.None),i.iconPath=e.isOpen?new l.ThemeIcon("issues",new l.ThemeColor("issues.open")):new l.ThemeIcon("issue-closed",new l.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(i.label=`\u2713 ${i.label}`,i.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?i.contextValue="continueissue":i.contextValue="issue",Ec(e)&&(i.contextValue="link"+i.contextValue)):i=new Kt(e.uri,e.milestone.title,e.issues.length>0?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.None),i}getChildren(e){return e===void 0&&this.manager.state!==Ve.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof Fe&&(e.tooltip=await hn(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===Ve.NeedsAuthentication?[]:[new Kt(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const i=Array.from(r.keys()),n=i[0];return i.map(s=>{const a=new Kt(e.repository.rootUri,s);return a.contextValue="query",a.collapsibleState=s===n?l.TreeItemCollapsibleState.Expanded:l.TreeItemCollapsibleState.Collapsed,a})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof ur?this.getQueryItems(e):e instanceof Kt?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof Fe?[]:e.issues.map(i=>{const n=Object.assign(i);return n.uri=e.uri,n})}}var Zh=Object.defineProperty,Xh=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class ep{constructor(e){Xh(this,"expression"),e.subscriptions.push(l.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=l.workspace.getConfiguration(Ce).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,i,n){if(this.expression===void 0||i.only&&i.only!==l.CodeActionKind.QuickFix)return[];const s=[];let a=r.start.line;do{const o=e.lineAt(a).text,u=o.substring(0,Tc);if(!u.match(Sr)){const h=u.search(this.expression);if(h>=0){const w=new l.CodeAction("Create GitHub Issue",l.CodeActionKind.QuickFix),R=u.substring(h).search(/\s/),q=h+(R>0?R:u.match(this.expression)[0].length);w.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:a,line:o,insertIndex:q,range:r}]},s.push(w);break}}a++}while(r.end.line>=a);return s}}var tp=Object.defineProperty,je=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?tp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rp=["Recovery"],ip="currentIssue",Bn="issues",Xo="ignoreMilestones",jn=[{label:"My Issues",query:"default"}];class Of extends null{constructor(){super(...arguments);je(this,"uri")}}class np{constructor(e,r,i){this.gitAPI=e,this.manager=r,this.context=i,je(this,"resolvedIssues",new Map),je(this,"_singleRepoStates",new Map),je(this,"_onRefreshCacheNeeded",new l.EventEmitter),je(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),je(this,"_onDidChangeIssueData",new l.EventEmitter),je(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),je(this,"_queries",[]),je(this,"_onDidChangeCurrentIssue",new l.EventEmitter),je(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),je(this,"initializePromise"),je(this,"statusBarItem"),je(this,"isSettingIssue",!1),r.folderManagers.forEach(n=>{this.context.subscriptions.push(n.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let i=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return i||(i=new Map,i)}getOrCreateSingleRepoState(e,r){let i=this._singleRepoStates.get(e.path);return i||(r||(r=this.manager.getManagerForFile(e)),i={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,i),i)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===Ve.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===Ve.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var r;const i=this.getOrCreateSingleRepoState(e.rootUri),n=i.lastHead,s=i.lastBranch,a=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==n&&await this.setIssueData(i.folderManager);const o=(r=e.state.HEAD)==null?void 0:r.name;(n!==a||s!==o)&&(!i.currentIssue||o!==i.currentIssue.branchName)&&(o?i.folderManager&&await this.setCurrentIssueFromBranch(i,o):await this.setCurrentIssue(i,void 0)),i.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,i.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=l.workspace.getConfiguration(Ce).get(or,jn),this._queries.length===0&&(this._queries=jn),this.context.subscriptions.push(l.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${Ce}.${or}`)?(this._queries=l.workspace.getConfiguration(Ce).get(or,jn),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${Ce}.${Xo}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const i=this.getOrCreateSingleRepoState(r.repository.rootUri,r);i.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,i);const n=(e=r.repository.state.HEAD)==null?void 0:e.name;!i.currentIssue&&n&&await this.setCurrentIssueFromBranch(i,n)}}cleanIssueState(){const e=this.context.workspaceState.get(Bn),r=e?JSON.parse(e):{issues:[],branches:[]},i=new Date().valueOf()-30*864e5;for(const n in r.issues)r.issues[n].stateModifiedTime<i&&(r.branches&&r.branches[n]&&delete r.branches[n],delete r.issues[n])}async getUsers(e){var r;await this.initializePromise;const i=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),n=new Map;for(const s in i)i[s].forEach(a=>{n.set(a.login,a)});return n}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(){var e;return(e=this.manager.credentialStore.getCurrentUser())==null?void 0:e.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,i;const n=this.getOrCreateSingleRepoState(e.repository.rootUri,e);n.issueCollection.clear();let s,a;for(const o of this._queries){let u;if(o.query===Pc)u=this.setMilestones(e);else{if(!s)try{s=await e.getPullRequestDefaults()}catch(c){}a||(a=await this.getCurrentUser()),u=this.setIssues(e,await di(o.query,void 0,s,a))}n.issueCollection.set(o.label,u)}n.maxIssueNumber=await e.getMaxIssue(),n.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,n.lastBranch=(i=e.repository.state.HEAD)==null?void 0:i.name}setIssues(e,r){return new Promise(async i=>{const n=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),i(n.items.map(s=>{const a=s;return a.uri=e.repository.rootUri,a}))})}async setCurrentIssueFromBranch(e,r){if(l.workspace.getConfiguration(Ce).get(ba)==="off")return;let n;try{n=await e.folderManager.getPullRequestDefaults()}catch(a){return}if(r===n.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const s=this.getSavedState();for(const a in s.branches)if(a===r){const o=await e.folderManager.resolveIssue(s.branches[a].owner,s.branches[a].repositoryName,s.branches[a].number);o&&await this.setCurrentIssue(e,new Yo(o,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const i=new Date,n=l.workspace.getConfiguration(Ce).get(Xo,[]),s=await e.getMilestones({fetchNextPage:!1},n.indexOf(xa)<0);let a;const o=new Map,u=[];for(let c=0;c<s.items.length;c++){const h=s.items[c];h.uri=e.repository.rootUri;const w=s.items[c].milestone;if(h.issues&&h.issues.length<=0||n.indexOf(w.title)>=0)continue;u.push(h);let R=w.dueOn?new Date(w.dueOn):void 0;R||(R=new Date(this.removeDateExcludeStrings(w.title)),isNaN(R.getTime())&&(R=new Date(w.createdAt))),R<i&&(a===void 0||R>a)&&(a=R),o.set(w.id?w.id:w.title,R)}u.sort((c,h)=>{const w=o.get(c.milestone.id?c.milestone.id:c.milestone.title),R=o.get(h.milestone.id?h.milestone.id:h.milestone.title);return a&&w>=a&&R>=a?w<=R?-1:1:w>=R?-1:1}),this._onDidChangeIssueData.fire(),r(u)})}removeDateExcludeStrings(e){return rp.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,i;return(i=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?i:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof ur){const i=this._singleRepoStates.get(e.repository.rootUri.path);if(!i)return;e=i}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(ip,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(i){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=l.window.createStatusBarItem(l.StatusBarAlignment.Left,0));const i=this.statusBarItem;i.text=`$(issues) Issue ${e.map(n=>lr(n.issue,n.repoDefaults)).join(", ")}`,i.tooltip=e.map(n=>n.issue.title).join(", "),i.command="issue.statusBar",i.show()}getSavedState(){const e=this.context.workspaceState.get(Bn);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}setSavedIssueState(e,r){const i=this.getSavedState();i.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(i.branches||(i.branches=Object.create(null)),i.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(Bn,JSON.stringify(i))}}class sp{constructor(e,r,i){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,i,n){var s;if(e.languageId!=="scminput"&&e.uri.scheme!==_t&&r.character>0&&n.triggerKind===l.CompletionTriggerKind.Invoke&&e.getText(new l.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(n.triggerKind===l.CompletionTriggerKind.TriggerCharacter&&l.workspace.getConfiguration(Ce).get("ignoreUserCompletionTrigger",[]).find(c=>c===e.languageId))return[];if(e.languageId!=="scminput"&&!await fn(e,r))return[];let a=new l.Range(r,r);r.character-1>=0&&e.getText(new l.Range(r.translate(0,-1),r))==="@"&&(a=new l.Range(r.translate(0,-1),r));const o=e.uri.scheme===_t?(s=Vn(e.uri))!=null?s:e.uri:e.languageId==="scminput"?Na(e.uri):e.uri;if(!o)return[];const u=[];return(await this.stateManager.getUserMap(o)).forEach(c=>{const h=new Ic(c.login,l.CompletionItemKind.User);h.insertText=`@${c.login}`,h.login=c.login,h.uri=o,h.range=a,h.detail=c.name,h.filterText=`@ ${c.login} ${c.name}`,e.uri.scheme===_t&&(h.commitCharacters=[" ",","]),u.push(h)}),u}async resolveCompletionItem(e,r){const i=this.manager.getManagerForFile(e.uri);if(!i)return e;const n=await i.getPullRequestDefaults(),s=await i.resolveUser(n.owner,n.repo,e.login);return s&&(e.documentation=mn(n,s),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class ap{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,i){if(!await Pa(e,r))return;let n=e.getWordRangeAtPosition(r,un);if(n&&n.start.character>0){n=new l.Range(new l.Position(n.start.line,n.start.character),n.end);const a=e.getText(n).match(un);if(a)return this.createHover(e.uri,a[1],n)}else return}async createHover(e,r,i){try{const n=this.manager.getManagerForFile(e);if(!n)return;const s=await n.getPullRequestDefaults(),a=await n.resolveUser(s.owner,s.repo,r);return a&&a.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new l.Hover(mn(s,a),i)):void 0}catch(n){return}}}var op=Object.defineProperty,Qn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?op(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const lp="issueCompletions.enabled",up="userCompletions.enabled";class cp{constructor(e,r,i,n,s){this.gitAPI=e,this.manager=r,this.reviewManagers=i,this.context=n,this.telemetry=s,Qn(this,"_stateManager"),Qn(this,"createIssueInfo"),Qn(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new np(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(l.workspace.registerFileSystemProvider(_t,new Wh)),this.registerCompletionProviders(),this.context.subscriptions.push(l.languages.registerCompletionItemProvider({scheme:_t},new zh(this.manager)," ",",")),this.context.subscriptions.push(l.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new Jh(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(l.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(l.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(l.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(l.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(l.commands.registerCommand("issue.goToLinkedCode",async e=>Cc(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(l.languages.registerHoverProvider("*",new Kh(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(l.languages.registerHoverProvider("*",new ap(this.manager,this.telemetry))),this.context.subscriptions.push(l.languages.registerCodeActionsProvider("*",new ep(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:Bh,trigger:"#",disposable:void 0,configuration:lp},{provider:sp,trigger:"@",disposable:void 0,configuration:up}];for(const r of e)l.workspace.getConfiguration(Ce).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=l.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(l.workspace.onDidChangeConfiguration(r=>{for(const i of e)if(r.affectsConfiguration(`${Ce}.${i.configuration}`)){const n=l.workspace.getConfiguration(Ce).get(i.configuration,!0);!n&&i.disposable?(i.disposable.dispose(),i.disposable=void 0):n&&!i.disposable&&this.context.subscriptions.push(i.disposable=l.languages.registerCompletionItemProvider(this.documentFilters,new i.provider(this._stateManager,this.manager,this.context),i.trigger));break}}))}async createIssue(){var e,r;let i=(e=l.window.activeTextEditor)==null?void 0:e.document.uri;if(i||(i=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),i)return this.makeNewIssueFile(i)}async createIssueFromFile(){var e,r,i,n;let s;if(!l.window.activeTextEditor||l.window.activeTextEditor.document.uri.scheme!==_t)return;s=l.window.activeTextEditor.document.getText();const a=s.indexOf(`\r
\r
`),o=s.indexOf(`

`);let u;if(a<0&&o<0)return;a<0?u=o:o<0?u=a:u=Math.min(a,o);const c=s.substring(0,u);let h;if(s=s.substring(u+2).trim(),s.startsWith(ki)){const V=s.split(/\r\n|\n/,1);V.length===1&&(h=V[0].substring(ki.length).split(",").map(U=>(U=U.trim(),U.startsWith("@")&&(U=U.substring(1)),U)),s=s.substring(V[0].length).trim())}let w;if(s.startsWith(Lr)){const V=s.split(/\r\n|\n/,1);V.length===1&&(w=V[0].substring(Lr.length).split(",").map(U=>U.trim()).filter(U=>U),s=s.substring(V[0].length).trim())}const R=s;if(!c||!R)return;const q=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,c,R,h,w,(i=this.createIssueInfo)==null?void 0:i.lineNumber,(n=this.createIssueInfo)==null?void 0:n.insertIndex,Vn(l.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,q&&await l.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=l.workspace.getConfiguration(Ce),i=r.inspect(or);let n;if(i==null?void 0:i.workspaceValue)n="workbench.action.openWorkspaceSettingsFile";else{const a=r.get(or);(i==null?void 0:i.defaultValue)&&JSON.stringify(i==null?void 0:i.defaultValue)===JSON.stringify(a)&&r.update(or,i.defaultValue,l.ConfigurationTarget.Global),n="workbench.action.openSettingsJson"}await l.commands.executeCommand(n);const s=l.window.activeTextEditor;if(s){const o=s.document.getText().search(e.labelAsString);if(o>=0){const u=s.document.positionAt(o);s.revealRange(new l.Range(u,u)),s.selection=new l.Selection(u,u)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await l.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),l.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof Fe)return l.env.openExternal(l.Uri.parse(e.html_url))}async doStartWorking(e,r,i){if(!e){l.window.showErrorMessage(`There are no repositories open that match ${r.remote.url}`);return}const n=await e.findUpstreamForItem(r);n.needsFork&&await e.tryOfferToFork(r.githubRepository)===void 0||await this._stateManager.setCurrentIssue(e,new Yo(r,e,this._stateManager,n.remote,i))}async startWorking(e){e instanceof Fe&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof Fe&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;const i=this.manager.getManagerForIssueModel(e);!i||e instanceof Fe&&((r=this._stateManager.currentIssue(i.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(i,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,i=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let n;try{n=await e.manager.getPullRequestDefaults()}catch(u){}const s=`$(primitive-square) Stop working on #${e.issue.number}`,a=e.branchName&&n?[r,i,s]:[r,i,s];switch(await l.window.showQuickPick(a,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case i:{const u=Wt.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(u)return Bc(e.manager,u,this._stateManager);break}case s:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(n=>({label:`#${n.issue.number} from ${n.issue.githubRepository.remote.owner}/${n.issue.githubRepository.remote.repositoryName}`,currentIssue:n})),i=await l.window.showQuickPick(r);if(i)return this.statusBarActions(i.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof Fe)return l.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof Fe)return l.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await l.env.clipboard.readText())}async createTodoIssue(e,r){let i,n,s,a,o,u;if(!e&&l.window.activeTextEditor)i=l.window.activeTextEditor.document,u=i.getText(l.window.activeTextEditor.selection);else if(e)i=e.document,s=e.insertIndex,a=e.lineNumber,n=e.line.substring(s,e.line.length).trim(),u=i.getText(e.range.isEmpty?i.lineAt(e.range.start.line).range:e.range);else return;const c=u.match(un);c&&c.length===2&&(await this._stateManager.getUserMap(i.uri)).has(c[1])&&(o=[c[1]]);let h;const w=r||(e==null?void 0:e.document.isUntitled)?r:(await pn(this.gitAPI,e)).permalink,R=l.window.createInputBox();R.value=n!=null?n:"",R.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",R.title="Create Issue",R.buttons=[{iconPath:new l.ThemeIcon("edit"),tooltip:"Edit Description"}],R.onDidAccept(async()=>{h=R.value,h&&(R.busy=!0,await this.doCreateIssue(i,e,h,w,o,void 0,a,s),R.busy=!1),R.hide()}),R.onDidTriggerButton(async()=>{h=R.value,R.busy=!0,this.createIssueInfo={document:i,newIssue:e,lineNumber:a,insertIndex:s},this.makeNewIssueFile(i.uri,h,w,o),R.busy=!1,R.hide()}),R.show()}async makeNewIssueFile(e,r,i,n){const s=`?{"origin":"${e.toString()}"}`,a=l.Uri.parse(`${_t}:/${Qh}${s}`);if(l.window.visibleTextEditors.filter(U=>U.document.uri.scheme===_t).length>0)return;await l.workspace.fs.delete(a);const o=`${ki} ${n&&n.length>0?n.map(U=>"@"+U).join(", ")+" ":""}`,u=`${Lr} `,c=`${r!=null?r:"Issue Title"}

${o}
${u}

${i!=null?i:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await l.workspace.fs.writeFile(a,this.stringToUint8Array(c));const h=l.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new l.ThemeColor("issues.newIssueDecoration")}}),w=l.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new l.ThemeColor("issues.newIssueDecoration")}}),R=l.window.onDidChangeActiveTextEditor(U=>{if((U==null?void 0:U.document.uri.scheme)===_t){const z=U.document.lineAt(2);z.text.startsWith(ki)&&U.setDecorations(h,[new l.Range(new l.Position(2,0),new l.Position(2,z.text.length))]);const K=U.document.lineAt(3);K.text.startsWith(Lr)&&U.setDecorations(w,[new l.Range(new l.Position(3,0),new l.Position(3,K.text.length))])}}),q=await l.window.showTextDocument(a),V=l.workspace.onDidCloseTextDocument(U=>{U===q.document&&(R.dispose(),V.dispose())})}async verifyLabels(e,r){var i;if(!r.labels)return!0;const n=(await e.getLabels(void 0,r)).map(o=>o.name),s=[],a=[];if((i=r.labels)==null||i.forEach(o=>{typeof o!="string"&&(o=o.name),n.includes(o)?a.push(o):s.push(o)}),s.length>0){const o="Yes",u="No";switch(await l.window.showInformationMessage(`The following labels don't exist in this repository: ${s.join(", ")}. 
Do you want to create these labels?`,{modal:!0},o,u)){case o:return!0;case u:return r.labels=a,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const n of this.manager.folderManagers)try{const s=await n.getPullRequestDefaults();r.push({label:`${s.owner}/${s.repo}`,repo:n})}catch(s){}if(r.length===0)return;if(r.length===1)return r[0].repo;const i=await l.window.showQuickPick(r,{placeHolder:e});return i==null?void 0:i.repo}async doCreateIssue(e,r,i,n,s,a,o,u,c){let h,w;if(e?w=this.manager.getManagerForFile(e.uri):c?w=this.manager.getManagerForFile(c):w=await this.chooseRepo("Choose where to create the issue."),!w)return!1;try{h=await w.getPullRequestDefaults()}catch(U){return l.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const R=n||(r==null?void 0:r.document.isUntitled)?n:(await pn(this.gitAPI,r)).permalink,q={owner:h.owner,repo:h.repo,title:i,body:R,assignees:s,labels:a};if(!await this.verifyLabels(w,q))return!1;const V=await w.createIssue(q);if(V){if(e!==void 0&&u!==void 0&&o!==void 0){const U=new l.WorkspaceEdit,z=l.workspace.getConfiguration(Ce).get("createInsertFormat","number")==="number"?`#${V.number}`:V.html_url;U.insert(e.uri,new l.Position(o,u),` ${z}`),await l.workspace.applyEdit(U)}else{const U="Copy URL",z="Open Issue";l.window.showInformationMessage("Issue created",U,z).then(async K=>{switch(K){case U:await l.env.clipboard.writeText(V.html_url);break;case z:await l.env.openExternal(l.Uri.parse(V.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(){const e=await pn(this.gitAPI);return e.error&&l.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${e.error}`),e.permalink}async copyPermalink(){const e=await this.getPermalinkWithError();if(e)return l.env.clipboard.writeText(e)}getMarkdownLinkText(){if(!l.window.activeTextEditor)return;let e=l.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new l.Range(e.start,new l.Position(e.start.line+1,0)));const r=l.window.activeTextEditor.document.getText(e);if(r)return r;if(e=l.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return l.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e&&r)return l.env.clipboard.writeText(`[${r.trim()}](${e})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e)return l.env.openExternal(l.Uri.parse(e))}}var dp=Object.defineProperty,mp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class hp{constructor(){mp(this,"_disposables"),this._disposables=[],this._disposables.push(l.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){const i=is(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status)};const n=we(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status)}}letter(e){switch(e){case ne.MODIFY:return"M";case ne.ADD:return"A";case ne.DELETE:return"D";case ne.RENAME:return"R";case ne.UNKNOWN:return"U";case ne.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var pp=Object.defineProperty,_i=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class fp extends Ge{constructor(e,r,i,n,s){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=i,this.commit=n,this.comments=s,_i(this,"sha"),_i(this,"collapsibleState"),_i(this,"iconPath"),_i(this,"contextValue"),this.label=n.commit.message,this.sha=n.sha,this.collapsibleState=l.TreeItemCollapsibleState.Collapsed;let a;try{n.author&&n.author.avatar_url&&(a=l.Uri.parse(`${n.author.avatar_url}&s=${64}`))}catch(o){}this.iconPath=a,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){const r=(await this.pullRequest.getCommitChangedFiles(this.commit)).map(i=>{const n=this.comments.filter(u=>u.path===i.filename&&u.originalCommitId===this.commit.sha),s=i.filename,a=l.Uri.parse(b.join(`commit~${this.commit.sha.substr(0,8)}`,s)),o=new dr(this,this.pullRequestManager,this.pullRequest,Di(i.status),s,void 0,Ct(a,s,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),Ct(a,s,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],n,this.commit.sha);return o.useViewChangesCommand(),o});return Promise.resolve(r)}}var gp=Object.defineProperty,$r=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?gp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class vp extends Ge{constructor(e,r,i,n){super();$r(this,"label","Commits"),$r(this,"collapsibleState"),$r(this,"_folderRepoManager"),$r(this,"_pr"),$r(this,"_comments"),this.parent=e,this._pr=i,this._folderRepoManager=r,this._comments=n,this.collapsibleState=l.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const r=(await this._pr.getCommits()).map(i=>new fp(this,this._folderRepoManager,this._pr,i,this._comments));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var wp=Object.defineProperty,Wn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bp extends Ge{constructor(e,r){super();this.parent=e,this._fileChanges=r,Wn(this,"label","Files"),Wn(this,"collapsibleState"),Wn(this,"directories",[]),this.collapsibleState=l.TreeItemCollapsibleState.Expanded;const i=new Qt(this,"");this._fileChanges.forEach(n=>i.addFile(n)),i.finalize(),i.label===""?this.directories=i.children:this.directories=[i]}getTreeItem(){return this}async getChildren(){let e;return l.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var yp=Object.defineProperty,Ri=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class kp extends jt{constructor(e,r,i,n,s){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=i,this._comments=n,this._localFileChanges=s,Ri(this,"_filesCategoryNode"),Ri(this,"_commitsCategoryNode"),Ri(this,"collapsibleState",l.TreeItemCollapsibleState.Expanded),Ri(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(l.window.onDidChangeActiveTextEditor(a=>{const o=a==null?void 0:a.document.uri.toString();this.revealActiveEditorInTree(o)})),this._disposables.push(this.parent.onDidChangeVisibility(a=>{var o;const u=(o=l.window.activeTextEditor)==null?void 0:o.document.uri.toString();this.revealActiveEditorInTree(u)}))}revealActiveEditorInTree(e){if(this.parent.visible&&e){const r=this._localFileChanges.find(i=>i.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new bp(this.parent,this._localFileChanges),this._commitsCategoryNode=new vp(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var _p=Object.defineProperty,Gr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?_p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class el extends l.Disposable{constructor(e){super(()=>this.dispose());this._context=e,Gr(this,"_onDidChangeTreeData",new l.EventEmitter),Gr(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Gr(this,"_disposables",[]),Gr(this,"_pullRequestManagerMap",new Map),Gr(this,"_view"),this._view=l.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(l.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${yt}.fileListLayout`)){this._onDidChangeTreeData.fire();const i=l.workspace.getConfiguration(`${yt}`).get("fileListLayout");await l.commands.executeCommand("setContext","fileListLayout:flat",i==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,i,n,s){const a=new kp(this._view,r,e,n,i);this._pullRequestManagerMap.set(e,a),this.updateViewTitle(),await l.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),s&&this._view.reveal(a)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await l.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){this._view.reveal(e,r)}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const i of this._pullRequestManagerMap.values())r.push(i);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof dr&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}var Rp=Object.defineProperty,Mt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Rp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Rt;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(Rt||(Rt={}));class ct extends Ge{constructor(e,r,i){super();switch(Mt(this,"collapsibleState"),Mt(this,"iconPath"),Mt(this,"type"),Mt(this,"command"),this.parent=e,this.type=r,this.collapsibleState=l.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[i]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[i]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class zn extends Ge{constructor(e,r,i,n,s,a){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=i,this._type=n,this._categoryQuery=a,Mt(this,"collapsibleState"),Mt(this,"prs"),Mt(this,"fetchNextPage",!1),Mt(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=l.TreeItemCollapsibleState.Collapsed,n){case Ne.All:this.label="All Open";break;case Ne.Query:this.label=s;break;case Ne.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){let e=!1,r=!1,i=!1;if(this._type===Ne.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(n){l.window.showErrorMessage(`Fetching local pull requests failed: ${A(n)}`),i=n instanceof ti}else if(this.fetchNextPage){try{const n=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(n.items),e=n.hasMorePages,r=n.hasUnsearchedRepositories}catch(n){l.window.showErrorMessage(`Fetching pull requests failed: ${A(n)}`),i=n instanceof ti}this.fetchNextPage=!1}else try{const n=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=n.items,e=n.hasMorePages,r=n.hasUnsearchedRepositories,this._type){case Ne.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case Ne.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(n){l.window.showErrorMessage(`Fetching pull requests failed: ${A(n)}`),i=n instanceof ti}if(this.prs&&this.prs.length){const n=this.prs.map(s=>new pr(this,this._folderRepoManager,s,this._type===Ne.LocalPullRequest));return e?n.push(new ct(this,1,this)):r&&n.push(new ct(this,2,this)),this.childrenDisposables=n,n}else{const n=i?3:0,s=[new ct(this,n)];return this.childrenDisposables=s,s}}getTreeItem(){return this}}var Ep=Object.defineProperty,tl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ep(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rl="queries";class Hr extends Ge{constructor(e,r,i,n){super();this.folderManager=i,this.telemetry=n,tl(this,"collapsibleState"),tl(this,"iconPath"),this.parent=e,this.collapsibleState=l.TreeItemCollapsibleState.Expanded,this.label=b.basename(r.fsPath)}static getQueries(e){return l.workspace.getConfiguration(yt,e.repository.rootUri).get(rl)||[]}getTreeItem(){return this}async getChildren(){return Hr.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,i){const n=Hr.getQueries(e).map(s=>new zn(i,e,r,Ne.Query,s.label,s.query));return[new zn(i,e,r,Ne.LocalPullRequest),...n,new zn(i,e,r,Ne.All)]}}var Cp=Object.defineProperty,xt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class il{constructor(e){this._telemetry=e,xt(this,"_onDidChangeTreeData",new l.EventEmitter),xt(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),xt(this,"_onDidChange",new l.EventEmitter),xt(this,"_disposables"),xt(this,"_childrenDisposables"),xt(this,"_view"),xt(this,"_reposManager"),xt(this,"_initialized",!1),this._disposables=[],this._disposables.push(l.workspace.registerTextDocumentContentProvider("pr",za())),this._disposables.push(l.window.registerFileDecorationProvider($a)),this._disposables.push(l.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(l.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=l.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(l.commands.registerCommand("pr.configurePRViewlet",async()=>{var r;const i=((r=this._reposManager)==null?void 0:r.state)===Ve.RepositoriesLoaded;switch(await l.window.showQuickPick(["Configure Remotes...","Configure Queries...",...i?["Sign out of GitHub..."]:[]])){case"Configure Queries...":return l.commands.executeCommand("workbench.action.openSettings",`@ext:${qt} queries`);case"Configure Remotes...":return l.commands.executeCommand("workbench.action.openSettings",`@ext:${qt} remotes`);case"Sign out of GitHub...":return l.commands.executeCommand("auth.signout");default:return}})),this._disposables.push(l.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${yt}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(l.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${yt}.${rl}`)&&this.refresh()}))}async refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===Ve.NeedsAuthentication?Promise.resolve([]):l.workspace.getConfiguration(yt).get(vn)?Promise.resolve([new ct(this._view,Rt.NoMatchingRemotes),new ct(this._view,Rt.ConfigureRemotes)]):Promise.resolve([new ct(this._view,Rt.NoRemotes)])}async getChildren(e){if(!this._reposManager)return l.workspace.workspaceFolders?Promise.resolve([new ct(this._view,Rt.NoGitRepositories)]):Promise.resolve([new ct(this._view,Rt.NoOpenFolder)]);if(this._reposManager.state===Ve.Initializing)return Promise.resolve([new ct(this._view,Rt.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(i=>i.dispose());let r;return this._reposManager.folderManagers.length===1?Hr.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this._view):(r=this._reposManager.folderManagers.map(i=>new Hr(this._view,i.repository.rootUri,i,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r))}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new ct(this._view,Rt.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var Sp=Object.defineProperty,nl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Tp{constructor(e){this.gitAPI=e,nl(this,"_onDidChange",new l.EventEmitter),nl(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:i,commit:n,rootPath:s}=Ke(e);if(!i||!n)return"";const a=sa(this.gitAPI,l.Uri.file(s));if(!a)return l.window.showErrorMessage(`We couldn't find an open repository for ${n} locally.`),"";const o=b.join(a.rootUri.fsPath,i).replace(/\\/g,"/");let u;try{if(u=await a.show(n,o),!u)throw new Error}catch(c){if(u=await this._fallback(e),!u)try{await a.getCommit(n)}catch(h){l.window.showErrorMessage(`We couldn't find commit ${n} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return u||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Pp=Object.defineProperty,sl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class al{constructor(e,r,i,n,s,a,o){this._context=e,this._reposManager=r,this._reviewManagers=i,this._prsTreeDataProvider=n,this._prFileChangesProvider=s,this._telemetry=a,sl(this,"_disposables"),this._disposables=[];const u=new Tp(o);u.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(l.workspace.registerTextDocumentContentProvider("review",u)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(l.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new el(this._context);for(const r of this._reviewManagers)r.updateState()}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new il(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}sl(al,"ID","Reviews");const Np="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let qe;const ol="prompts",ll="createPROnPublish";async function ul(t,e,r,i,n,s){t.subscriptions.push($),$.appendLine("Git repository found, initializing review manager and pr tree view."),l.authentication.onDidChangeSessions(async U=>{U.provider.id==="github"&&(await u.clearCredentialCache(),h&&h.forEach(z=>z.updateState()))}),t.subscriptions.push(e.onDidPublish(async U=>{if(!U.branch||Xa(ol,ll)===!1)return;const z=h.find(ee=>ee.repository.rootUri.toString()===U.repository.rootUri.toString());if(z==null?void 0:z.isCreatingPullRequest)return;const K="Create Pull Request...",Z="Don't Show Again",re=await l.window.showInformationMessage(`Would you like to create a Pull Request for branch '${U.branch}'?`,K,Z);re===K?l.commands.executeCommand("pr.create"):re===Z&&eo(ol,ll,!1)})),t.subscriptions.push(l.window.registerUriHandler(yl)),t.subscriptions.push(new hp);const a=l.workspace.workspaceFolders;a&&(i=i.sort((U,z)=>{let K=a.length,Z=a.length;for(let re=0;re<a.length&&(a[re].uri.toString()===U.rootUri.toString()?K=re:a[re].uri.toString()===z.rootUri.toString()&&(Z=re),!(K!==a.length&&Z!==a.length));re++);return K-Z}));const o=i.map(U=>new ur(U,qe,e,r));t.subscriptions.push(...o);const u=new Qo(o,r,qe);t.subscriptions.push(u),s.then(U=>{U&&U.registerContactServiceProvider("github-pr",new $h(u))});const c=new el(t);t.subscriptions.push(c);const h=o.map(U=>new Wt(t,U.repository,U,qe,c)),w=new al(t,u,h,n,c,qe,e);t.subscriptions.push(w),e.onDidChangeState(()=>{$.appendLine(`Git initialization state changed: state=${e.state}}`),h.forEach(U=>U.updateState())}),e.onDidOpenRepository(U=>{const z=U.state.onDidChange(()=>{const K=new ur(U,qe,e,r);u.insertFolderManager(K);const Z=new Wt(t,K.repository,K,qe,c);h.push(Z),n.refresh(),z.dispose()})}),e.onDidCloseRepository(U=>{u.removeRepo(U);const z=h.findIndex(K=>K.repository.rootUri.toString()===U.rootUri.toString());if(z){const K=h[z];h.splice(z),K.dispose()}n.refresh()}),n.initialize(u),Md(t,u,h,qe,r,n);const R=l.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await l.commands.executeCommand("setContext","fileListLayout:flat",R==="flat");const q=new cp(e,u,h,t,qe);t.subscriptions.push(q),await q.initialize(),t.subscriptions.push(new Hh),await l.commands.executeCommand("setContext","github:initialized",!0),qe.sendTelemetryEvent("startup"),(await Vd(t,qe)).isCachedFlightEnabled("githubaa")}async function Dp(t){if(qt==="GitHub.vscode-pull-request-github-insiders"&&l.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");l.commands.registerCommand("github.api.preloadPullRequest",async()=>{await l.commands.executeCommand("setContext",Ut,!0),await l.commands.executeCommand("github:activePullRequest:welcome.focus")}),nt.initialize(t);const e=new Jn,r=l.extensions.getExtension(qt).packageJSON.version;return qe=new $d(new F.Z(qt,r,Np)),t.subscriptions.push(qe),Fp(t,e),e}async function Fp(t,e){Od(t);const r=new Rh(qe);t.subscriptions.push(r),await r.initialize();const i=Uh(r,e);i&&t.subscriptions.push(i);const n=qh(e);t.subscriptions.push(n);const s=n.initialize();t.subscriptions.push(e);const a=new il(qe);t.subscriptions.push(a),$.appendLine("Looking for git repository");const o=e.repositories;o.length>0?await ul(t,e,r,o,a,s):_(e.onDidOpenRepository)(async u=>{await ul(t,e,r,[u],a,s)})}async function Ip(){qe&&qe.dispose()}})(),module.exports=Ei})();
